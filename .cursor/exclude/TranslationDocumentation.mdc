---
description: Always
globs: 
---
# Translation System Documentation

## Overview

This document provides a comprehensive guide to the internationalization (i18n) system used in the InteriMed application. The application uses `react-i18next` for translation management, with a structured approach to organizing translation files and accessing them in components. Translations are NEVER integrated to .js files directly, even alternative translations. Translations are always directly integrated in the given json or a new one. Update this document as you go.

## Translation Structure

### Directory Organization 

Translations are organized by language and purpose:

```
frontend/src/locales/
├── en/                             # English translations
│   ├── common.json                 # Shared translations across the app
│   ├── dashboard.json              # Shared translations across the app
│   │   ├── dashboard.json          # About page translations
│   │   ├── personaldashboard.json          # About page translations
│   │   ├── profile.json            # About page translations
│   ├── pages/                      # Page-specific translations
│   │   ├── home.json               # Homepage translations
│   │   ├── about.json              # About page translations
│   │   ├── faq.json                # FAQ page translations
│   │   ├── pharmacies.json         # Pharmacies page translations
│   │   ├── professionals.json      # Professionals page translations
│   │   ├── blogArticles/           # Blog-related translations
│   │   │   └── common.json         # Common blog translations
│   │   └── ...                     # Other page-specific translations
│   └── ...                         # Other translation categories
├── fr/                             # French translations (same structure)
└── ...                             # Other languages
```

### Namespace Convention

We use a consistent namespace convention:
- Page-specific translations: Use the page name (e.g., 'home', 'about', 'faq')
- Shared components: Use 'common' for shared elements
- Feature-specific: Use feature name (e.g., 'auth', 'blog')

## Usage in Components

### Basic Usage

```javascript
import { useTranslation } from 'react-i18next';

const MyComponent = () => {
  const { t } = useTranslation('namespace');
  
  return <h1>{t('key', 'Default text')}</h1>;
};
```

### Using Multiple Namespaces

For components that need translations from multiple namespaces:

```javascript
const { t } = useTranslation(['primary', 'common']);
```

This allows fallback to the common namespace if a key isn't found in the primary namespace.

### Best Practices

1. Always provide fallback text for translation keys
   ```javascript
   t('hero.title', 'Welcome to InteriMed')
   ```

2. Use dot notation for nested keys
   ```javascript
   t('section.subsection.key')
   ```

3. Use the appropriate namespace for the component
   ```javascript
   // For page components
   const { t } = useTranslation('pageName');
   
   // For shared components
   const { t } = useTranslation('common');
   ```

4. Keep translation keys descriptive and organized

## Adding New Translations

1. Create a new JSON file in the appropriate directory
2. Add the file to the i18n.js configuration
3. Use the namespace in your components

## Handling Missing Translations

The system will:
1. Try the primary namespace
2. Fall back to any additional namespaces provided
3. Use the default text provided in the t() function
4. Fall back to the key itself as a last resort

## Creating Translation Files for New Languages

When adding a new language:
1. Create a directory structure matching the English version
2. Copy the English files as templates
3. Translate the content while maintaining the same key structure
4. Add the language to the i18n configuration

## Configuration

### i18n Configuration

The i18n configuration is set up in `frontend/src/i18n.js`. It uses `i18next` and `react-i18next` to manage translations. The configuration includes:

- **Resources**: This is where the translation files are loaded. The example configuration includes files for different namespaces (e.g., `translation`, `professionals`, `about`, `faq`, `home`, `pharmacies`, and `blogArticles`).
- **Language**: The default language is set to English (`en`).
- **Fallback Language**: If a translation is not found in the default language, it will fall back to English.
- **Interpolation**: This is set to `false` to prevent React from sanitizing the values, which is the default behavior.

### Example Configuration

```javascript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import translationEN from './locales/en/translation.json';
import professionalsEN from './locales/en/pages/professionals.json';
import aboutEN from './locales/en/pages/about.json';
import faqEN from './locales/en/pages/faq.json';
import homeEN from './locales/en/pages/home.json';
import pharmaciesEN from './locales/en/pages/pharmacies.json';
import blogArticlesEN from './locales/en/pages/blogArticles/common.json';

i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: {
        translation: translationEN,
        professionals: professionalsEN,
        about: aboutEN,
        faq: faqEN,
        home: homeEN,
        pharmacies: pharmaciesEN,
        blogArticles: blogArticlesEN,
      },
    },
    lng: 'en', // default language
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false, // react already safes from xss
    },
  });

export default i18n; 