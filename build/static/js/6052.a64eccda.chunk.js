(self.webpackChunkmedishift_deployment_server=self.webpackChunkmedishift_deployment_server||[]).push([[6052],{6052(e,t,a){"use strict";a.r(t),a.d(t,{calculateProfileCompleteness:()=>ce,default:()=>me,isTabAccessible:()=>ue,isTabCompleted:()=>de});var r=a(9379),n=a(2483),l=a(7958),i=a(3376),s=a(4304),o=a(2598),c=a(2504),d=a(6935),u=a(5702),m=a(627),p=a(4506),f=a(9832),x=a(6240),g=a(9389),h=a(8463),v=a(1268),b=a(2158),y=a(2335),j=a(5892),N=a(6723);const w=e=>{let{profile:t,config:a,activeTab:r,onTabChange:i,isTabCompleted:s,isTabAccessible:c,nextIncompleteSection:d,highlightTabId:u,collapsed:m=!1,onToggle:x,onAutofill:g}=e;const[h,v]=(0,n.useState)(!1),b=(0,f.n)(),{t:y}=(0,l.Bd)(["dashboardProfile","tabs"]),{isTutorialActive:w,stepData:C}=(0,p.s8)(),T=w&&(null===C||void 0===C?void 0:C.highlightUploadButton),A=(null===a||void 0===a?void 0:a.tabs)||[],S=e=>{switch(e){case"personalDetails":default:return(0,N.jsx)(o.JXP,{className:"w-5 h-5 shrink-0"});case"professionalBackground":return(0,N.jsx)(o.qYx,{className:"w-5 h-5 shrink-0"});case"billingInformation":return(0,N.jsx)(o.lZI,{className:"w-5 h-5 shrink-0"});case"documentUploads":return(0,N.jsx)(o.jH2,{className:"w-5 h-5 shrink-0"});case"settings":return(0,N.jsx)(o.VSk,{className:"w-5 h-5 shrink-0"})}};return(0,N.jsxs)("div",{className:(0,j.cn)("w-full h-fit bg-card rounded-xl border border-border/60 transition-all duration-300 ease-in-out overflow-x-hidden",m?"p-2":"p-4"),children:[x&&!b&&(0,N.jsx)("div",{className:(0,j.cn)("border-b border-border mb-3",m?"px-1 pb-2":"px-1 pb-3"),children:(0,N.jsx)("button",{onClick:x,className:(0,j.cn)("w-full h-10 rounded-md hover:bg-muted/50 text-muted-foreground/70 transition-colors flex items-center gap-2",m?"justify-center px-2":"justify-start px-2"),title:m?"Expand":"Collapse",children:m?(0,N.jsx)(o.fOo,{size:18}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.irw,{size:18}),(0,N.jsx)("span",{className:"text-sm font-medium",children:"Collapse"})]})})}),(0,N.jsxs)("nav",{className:(0,j.cn)("flex flex-col","gap-3"),children:[A.map(e=>{const n=r===e.id,l=s(t,e.id,a),d=c(t,e.id,a),p=u===e.id&&!l;return d?(0,N.jsxs)("button",{"data-tab":e.id,onClick:()=>{return r=e.id,void(c(t,r,a)&&i(r));var r},className:(0,j.cn)("group relative flex gap-3 rounded-lg hover:bg-muted/50 transition-all cursor-pointer border min-w-0",m?"p-2 justify-center":"p-3",n&&"bg-primary/5 border-primary/10",p&&"border-primary/30 bg-primary/10 ring-2 ring-primary/20",!n&&!p&&"border-transparent"),children:[(0,N.jsx)("div",{className:(0,j.cn)("w-1.5 h-full absolute left-0 top-0 bottom-0 rounded-l-lg",n&&"bg-primary")}),(0,N.jsxs)("div",{className:(0,j.cn)("w-full flex items-center justify-between min-w-0",m?"justify-center pl-0":"pl-2"),children:[(0,N.jsxs)("div",{className:(0,j.cn)("flex items-center min-w-0",m?"justify-center":"gap-3"),children:[(0,N.jsx)("div",{className:(0,j.cn)("transition-colors shrink-0",n?"text-primary":"text-muted-foreground group-hover:text-foreground"),children:S(e.id)}),!m&&(0,N.jsx)("span",{className:(0,j.cn)("text-sm font-medium truncate",n?"text-foreground":"text-muted-foreground group-hover:text-foreground"),children:y(e.labelKey,e.id)})]}),!m&&(0,N.jsx)("div",{className:"ml-2 shrink-0",children:l?(0,N.jsx)(o.A3x,{className:"w-4 h-4 text-green-500/80"}):(0,N.jsx)(o.sxA,{className:(0,j.cn)("w-4 h-4",n?"text-primary/40":"text-muted-foreground/20")})})]}),m&&(0,N.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap border border-border",children:[y(e.labelKey,e.id),l&&(0,N.jsx)("span",{className:"ml-1 text-green-500",children:"\u2713"})]})]},e.id):(0,N.jsxs)("div",{"data-tab":e.id,"data-tutorial-disabled":"true",className:(0,j.cn)("group relative flex gap-3 rounded-lg border min-w-0 transition-all duration-200 outline-none",m?"p-2 justify-center":"p-3","text-muted-foreground/40 cursor-not-allowed pointer-events-none select-none","border-transparent"),style:{pointerEvents:"none",userSelect:"none"},onClick:t=>(t.preventDefault(),t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),console.log("[ProfileHeader] Click prevented on ".concat(e.id," - tab is locked (rendered as div)")),!1),children:[(0,N.jsx)("div",{className:(0,j.cn)("w-1.5 h-full absolute left-0 top-0 bottom-0 rounded-l-lg")}),(0,N.jsxs)("div",{className:(0,j.cn)("w-full flex items-center justify-between min-w-0",m?"justify-center pl-0":"pl-2"),children:[(0,N.jsxs)("div",{className:(0,j.cn)("flex items-center min-w-0",m?"justify-center":"gap-3"),children:[(0,N.jsx)("div",{className:(0,j.cn)("shrink-0","bg-muted/10 text-muted-foreground/40"),children:S(e.id)}),!m&&(0,N.jsx)("span",{className:(0,j.cn)("text-sm font-medium truncate","text-muted-foreground/40"),children:y(e.labelKey,e.id)})]}),!m&&(0,N.jsx)("div",{className:"ml-2 shrink-0",children:(0,N.jsx)(o.sxA,{className:"w-4 h-4 text-muted-foreground/20"})})]}),m&&(0,N.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap border border-border",children:[y(e.labelKey,e.id)," (Locked)"]})]},e.id)}),g&&(0,N.jsxs)("div",{className:"mt-4 pt-4 border-t border-border relative",children:[h&&(0,N.jsxs)("div",{className:(0,j.cn)("absolute bottom-full left-0 w-full mb-2 bg-popover border border-border rounded-lg shadow-xl z-50 overflow-hidden animate-in slide-in-from-bottom-2 duration-200",m&&"left-full ml-2 w-48 bottom-0 mb-0"),children:[(0,N.jsxs)("button",{onClick:()=>{g("current"),v(!1)},className:"w-full text-left px-4 py-2.5 text-xs font-semibold hover:bg-muted transition-colors flex items-center gap-2 border-b border-border",children:[(0,N.jsx)(o.FrA,{className:"w-3.5 h-3.5 text-amber-500"}),"Fill Current Tab"]}),(0,N.jsxs)("button",{onClick:()=>{g("all"),v(!1)},className:"w-full text-left px-4 py-2.5 text-xs font-bold hover:bg-muted transition-colors flex items-center gap-2 text-amber-600",children:[(0,N.jsx)(o.FrA,{className:"w-3.5 h-3.5"}),"Fill All (Complete)"]})]}),(0,N.jsxs)("button",{onClick:()=>v(!h),"data-tutorial":"profile-upload-button",className:(0,j.cn)("w-full flex items-center gap-3 p-3 rounded-lg transition-all relative overflow-hidden","bg-amber-500/10 hover:bg-amber-500/20 text-amber-600 border border-amber-500/20",m?"justify-center px-2":"px-3",h&&"bg-amber-500/20 ring-2 ring-amber-500/30",T&&"ring-2 ring-amber-500/40 border-amber-500/40"),title:"Beta: Autofill Options",children:[T&&(0,N.jsx)("div",{className:"absolute inset-0 pointer-events-none animate-pulse bg-amber-500/10"}),(0,N.jsx)(o.FrA,{className:"w-5 h-5 shrink-0"}),!m&&(0,N.jsx)("span",{className:"text-sm font-bold uppercase tracking-wider",children:"(Beta) Fill"})]})]})]})]})};var C=a(5733),T=a(8996),A=a(5821),S=a(2206);const k={personalDetails:{identity:{legalFirstName:"Jean",legalLastName:"Dupont",dateOfBirth:"1985-06-15",nationality:"CH",ahvNumber:"756.1234.5678.90"},contact:{residentialAddress:{street:"Rue de la Gare",number:"42",postalCode:"1003",city:"Lausanne",canton:"VD",country:"CH"},primaryPhonePrefix:"+41",primaryPhone:"79 123 45 67",primaryEmail:"jean.dupont@example.com"}},professionalBackground:{education:[{degree:"doctorate",institution:"Universit\xe9 de Lausanne",field:"Medicine",startDate:"2003-09-01",endDate:"2009-06-30",currentlyStudying:!1,gpa:"5.5",honors:"Magna Cum Laude"}],workExperience:[{jobTitle:"Chief Medical Officer",employer:"H\xf4pital Universitaire de Gen\xe8ve",location:"Geneva, Switzerland",startDate:"2015-03-01",current:!0,description:"Leading a team of 25 physicians in the emergency department."},{jobTitle:"Senior Resident",employer:"Centre Hospitalier Universitaire Vaudois",location:"Lausanne, Switzerland",startDate:"2010-07-01",endDate:"2015-02-28",current:!1,description:"Internal medicine and emergency care."}],qualifications:[{type:"medical_license",title:"FMH Specialist in Internal Medicine",institution:"Swiss Medical Association (FMH)",licenseNumber:"FMH-123456",dateObtained:"2012-06-15",validForLife:!0,isVerified:!0}]},billingInformation:{employmentEligibility:{workPermit:{type:"swiss_citizen",expiryDate:null,permitNumber:"",issuingCanton:""}},payrollData:{numberOfChildren:2,civilStatus:"married",withholdingTaxInfo:{isSubject:!1,taxCanton:""},religion:"none"},banking:{iban:"CH9300762011623852957",bankName:"UBS Switzerland AG",accountHolderName:"Jean Dupont"}},settings:{platformSettings:{detailedAvailability:{availabilityType:["full_time","on_call"],maxHoursPerWeek:42,noticePeriodShortTerm:"24h",onCallPreferences:["weekends","holidays"],longTermContractEarliestStartDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],notes:"Available for emergency coverage on short notice."},defaultMarketplaceRadius:50,contractAutoApproval:{enabled:!0,minimumHoursInAdvance:48}},isActiveOnMarketplace:!0,notificationPreferences:{email:!0,push:!0,sms:!1,marketplaceUpdates:!0,scheduleChanges:!0,contractUpdates:!0}},facilityCoreDetails:{facilityName:"Pharmacie de la Navigation",facilityType:"community_pharmacy",address:{street:"Rue de la Navigation",number:"12",postalCode:"1201",city:"Gen\xe8ve",canton:"GE",country:"CH"},mainPhoneNumber:"+41 22 732 25 25",mainEmail:"info@pharmacie-navigation.ch",website:"https://pharmacie-navigation.ch"},facilityLegalBilling:{legalEntityName:"Pharmacie de la Navigation SA",uidNumber:"CHE-123.456.789 MWST",commercialRegisterNumber:"CH-660.1.234.567-8",legalRepresentative:{firstName:"Marc",lastName:"M\xfcller",email:"marc.mueller@pharmacie-navigation.ch",phone:"+41 78 987 65 43"},billingContact:{name:"Comptabilit\xe9",email:"compta@pharmacie-navigation.ch",phone:"+41 22 732 25 26"},facilityIBAN:"CH12 0000 0000 0000 0000 0",facilityBankName:"BCGE Gen\xe8ve"}};var D=a(5614),I=a(3694),E=a(1205);const P={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-0",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"personal-details-sections-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",gridSingle:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},O=e=>{var t,a,i,s,d,m;let{formData:p,config:f,errors:x,isSubmitting:g,onInputChange:v,onSaveAndContinue:b,onCancel:j,getNestedValue:w,onTriggerUpload:C,onStepGuideVisibilityChange:T}=e;const{t:A}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),{currentUser:S}=(0,c.A)(),{uploadImageAndRetrieveURL:k}=(0,u.A)(),[O,F]=(0,n.useState)(!1),[R,L]=(0,n.useState)(""),H=(0,n.useRef)(null),[_]=(0,n.useState)(!0);(0,n.useEffect)(()=>{T&&T(_)},[_,T]);const{countryOptions:W,cantonOptions:M,residencyPermitOptions:B,availabilityStatusOptions:U,contractTypeOptions:q,educationLevelOptions:z,phonePrefixOptions:V}=(0,D.n)(),K=(0,n.useCallback)(e=>{switch(e){case"countries":return W;case"cantons":return M;case"workPermits":return B;case"availability":return U;case"contractTypes":return q;case"education":return z;case"phonePrefixes":return V;default:return[]}},[W,M,B,U,q,z,V]),Y=(0,n.useMemo)(()=>{var e;const t=(null===f||void 0===f||null===(e=f.fields)||void 0===e?void 0:e.personalDetails)||[],a={},r=["identity","address","contact"];t.forEach(e=>{const t=e.group||"other";a[t]||(a[t]=[]),a[t].push(e)});return Object.keys(a).sort((e,t)=>{const a=r.indexOf(e),n=r.indexOf(t);return-1!==a&&-1!==n?a-n:-1!==a?-1:-1!==n?1:e.localeCompare(t)}).map(e=>({key:e,fields:a[e]}))},[f]),G=(0,n.useCallback)(()=>{j?j():window.location.reload()},[j]),Z=p||S||{},J=w(p,"profilePicture")||(null===p||void 0===p?void 0:p.profilePicture)||(null===S||void 0===S?void 0:S.photoURL),Q=(e,t)=>{const{name:a,type:n,required:l,labelKey:i,optionsKey:s,placeholder:o}=e,c=A(i,a),d=w(p,a),u=w(x,a),m=a,f={label:c,error:u,required:l,wrapperClassName:P.fieldWrapper};if("date"===n){const e="identity.dateOfBirth"===a?new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0]:void 0,t=d?"string"===typeof d?d:new Date(d).toISOString().split("T")[0]:"";return(0,N.jsxs)("div",{className:P.fieldWrapper,children:[c&&(0,N.jsxs)("label",{className:"boxed-date-label ".concat(u?"boxed-date-label--error":""),children:[c,l&&(0,N.jsx)("span",{className:"boxed-inputfield-required",children:"*"})]}),(0,N.jsx)("input",{type:"date",value:t,onChange:e=>v(a,e.target.value||null),max:e,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(u?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:u?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:u?"var(--boxed-inputfield-error-color)":"inherit"}})]},m)}return"dropdown"===n?(0,N.jsx)("div",{className:P.fieldWrapper,children:(0,N.jsx)(y.A,{label:f.label,options:K(s),value:d,onChange:e=>v(a,e),placeholder:A(o||"common.selectPlaceholder"),required:f.required,error:f.error})},m):(0,N.jsx)("div",{className:P.fieldWrapper,children:(0,N.jsx)(I.A,(0,r.A)((0,r.A)({},f),{},{name:a,type:"email"===n?"email":"tel"===n?"tel":"text",value:d||"",onChange:e=>v(a,e.target.value),placeholder:o?A(o):""}))},m)},X=e=>{const t=e.find(e=>"contact.primaryPhonePrefix"===e.name),a=e.find(e=>"contact.primaryPhone"===e.name),r=e.find(e=>"contact.primaryEmail"===e.name);return(0,N.jsxs)("div",{className:P.gridSingle,children:[t&&Q(t),a&&Q(a),r&&Q(r)]})},$=e=>{switch(e){case"identity":return(0,N.jsx)(o.JXP,{});case"address":return(0,N.jsx)(o.HzC,{});case"contact":return(0,N.jsx)(o.QFc,{});default:return(0,N.jsx)(o.S8s,{})}},ee=e=>A({identity:"personalDetails.identityInfo",address:"personalDetails.residentialAddress",contact:"personalDetails.contactInformation"}[e]||"personalDetails.".concat(e),e.charAt(0).toUpperCase()+e.slice(1));return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("style",{children:"\n        .personal-details-container {\n          container-type: inline-size;\n        }\n        @container (min-width: 700px) {\n          .personal-details-sections-wrapper {\n            flex-direction: row;\n          }\n        }\n      "}),(0,N.jsxs)("div",{className:"".concat(P.sectionContainer," personal-details-container"),children:[(0,N.jsx)("div",{className:P.headerCard,children:(0,N.jsxs)("div",{className:"flex items-center gap-6 mb-4",children:[(0,N.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{var e;return null===(e=H.current)||void 0===e?void 0:e.click()},children:[(0,N.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-border group-hover:border-primary transition-colors",children:J?(0,N.jsx)("img",{src:J,alt:"Profile",className:"w-full h-full object-cover"}):(0,N.jsxs)("div",{className:"w-full h-full bg-muted flex items-center justify-center text-2xl font-bold text-muted-foreground",children:[(null===Z||void 0===Z||null===(t=Z.firstName)||void 0===t?void 0:t[0])||(null===Z||void 0===Z||null===(a=Z.identity)||void 0===a||null===(i=a.legalFirstName)||void 0===i?void 0:i[0])||"U",(null===Z||void 0===Z||null===(s=Z.lastName)||void 0===s?void 0:s[0])||(null===Z||void 0===Z||null===(d=Z.identity)||void 0===d||null===(m=d.legalLastName)||void 0===m?void 0:m[0])||""]})}),(0,N.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,N.jsx)("span",{className:"text-xs text-white font-medium",children:A("common.edit")})}),(0,N.jsx)("input",{type:"file",ref:H,onChange:async e=>{const t=e.target.files[0];if(!t)return;if(t.size/1048576>2)L(A("accountBasics.errors.fileTooLarge"));else if(t.type.startsWith("image/")){F(!0),L("");try{const e=new FileReader;e.onload=async e=>{const t=await k(S.uid,e.target.result);v("profilePicture",t),F(!1)},e.readAsDataURL(t)}catch(a){console.error("Error uploading profile picture:",a),L(A("accountBasics.errors.uploadFailed")),F(!1)}}else L(A("accountBasics.errors.invalidFileType"))},accept:"image/*",className:"hidden"})]}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("h2",{className:P.sectionTitle,style:P.sectionTitleStyle,children:A("personalDetails.title")}),(0,N.jsxs)("div",{className:P.subtitleRow,children:[(0,N.jsx)("p",{className:P.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:A("personalDetails.subtitle","Please ensure your personal details are accurate and up to date.")}),(0,N.jsxs)("div",{className:P.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:P.mandatoryMark,children:"*"})," ",A("common.mandatoryFields")]})]}),R&&(0,N.jsx)("p",{className:"text-red-500 text-sm mt-1",children:R}),O&&(0,N.jsx)("p",{className:"text-primary text-sm mt-1",children:A("accountBasics.uploading")})]})]})}),(0,N.jsxs)("div",{className:P.sectionsWrapper,children:[(0,N.jsx)("div",{className:P.leftColumn,children:Y.filter(e=>"identity"===e.key||"contact"===e.key).map(e=>(0,N.jsx)("div",{className:P.sectionCard,children:"contact"===e.key?(0,N.jsxs)("div",{className:P.gridSingle,children:[(0,N.jsxs)("div",{className:P.cardHeader,children:[(0,N.jsx)("div",{className:P.cardIconWrapper,children:$(e.key)}),(0,N.jsx)("div",{className:P.cardTitle,children:(0,N.jsx)("h3",{className:P.cardTitleH3,style:P.cardTitleH3Style,children:ee(e.key)})})]}),X(e.fields)]}):(0,N.jsxs)("div",{className:P.grid,children:[(0,N.jsxs)("div",{className:P.cardHeader,children:[(0,N.jsx)("div",{className:P.cardIconWrapper,children:$(e.key)}),(0,N.jsx)("div",{className:P.cardTitle,children:(0,N.jsx)("h3",{className:P.cardTitleH3,style:P.cardTitleH3Style,children:ee(e.key)})})]}),e.fields.map(t=>Q(t,e.key))]})},e.key))}),(0,N.jsxs)("div",{className:P.rightColumn,children:[Y.filter(e=>"address"===e.key).map(e=>(0,N.jsx)("div",{className:P.sectionCard,children:(0,N.jsxs)("div",{className:P.grid,children:[(0,N.jsxs)("div",{className:P.cardHeader,children:[(0,N.jsx)("div",{className:P.cardIconWrapper,children:$(e.key)}),(0,N.jsx)("div",{className:P.cardTitle,children:(0,N.jsx)("h3",{className:P.cardTitleH3,style:P.cardTitleH3Style,children:ee(e.key)})})]}),e.fields.map(t=>Q(t,e.key))]})},e.key)),(0,N.jsx)("div",{className:P.sectionCard,children:(0,N.jsxs)("div",{className:P.gridSingle,children:[(0,N.jsxs)("div",{className:P.cardHeader,children:[(0,N.jsx)("div",{className:P.cardIconWrapper,children:(0,N.jsx)(o.jH2,{})}),(0,N.jsx)("div",{className:P.cardTitle,children:(0,N.jsx)("h3",{className:P.cardTitleH3,style:P.cardTitleH3Style,children:A("personalDetails.summary","Summary")})})]}),(0,N.jsx)("div",{className:P.gridSingle,children:(0,N.jsx)(E.A,{label:"",name:"bio",value:w(p,"bio")||"A recent graduate with a Master's degree in Pharmaceutical Sciences from ETH Zurich, specializing in research and immunology. William Abhamon possesses extensive hands-on experience in cutting-edge pharmaceutical research, including developing antibody fragments, investigating receptor aggregation, and studying protein-RNA interactions. Complementing his strong scientific background, he brings practical pharmacy experience, leadership skills from student associations, and proficiency in advanced scientific software and programming languages.",onChange:e=>v("bio",e.target.value),placeholder:A("personalDetails.summaryPlaceholder","Tell us about your professional background..."),error:w(x,"bio"),maxLength:1e3,rows:8,wrapperClassName:P.fieldWrapper})})]})})]})]}),(0,N.jsx)("div",{className:P.sectionCard,children:(0,N.jsxs)("div",{className:P.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:G,variant:"secondary",disabled:g,children:A("common.cancel")}),(0,N.jsx)(h.A,{onClick:b,variant:"confirmation",disabled:g,children:A(g?"common.saving":"common.saveAndContinue")})]})})]})]})};var F=a(1097),R=a.n(F);const L=e=>{let{label:t,checked:a=!1,onChange:r,color:l,error:i=null,required:s=!1,name:o=""}=e;const{showError:c}=(0,d.h)();(0,n.useEffect)(()=>{i&&c(i)},[i,c]);return(0,N.jsx)("div",{className:"checkbox-wrapper",children:(0,N.jsxs)("label",{className:"checkbox-container ".concat(i?"checkbox-container--error":""),children:[(0,N.jsx)("input",{type:"checkbox",name:o,checked:a,onChange:e=>{i&&r?r(e,null):r(e)},required:s}),(0,N.jsx)("span",{className:"checkmark",style:{backgroundColor:a?l:"#fff",borderColor:i?"var(--red-3)":l,opacity:a?1:.5}}),(0,N.jsxs)("span",{className:"checkbox-label ".concat(i?"checkbox-label--error":""),style:{opacity:a?1:.5},children:[t,s&&(0,N.jsx)("span",{className:"checkbox-required",children:"*"})]})]})})},H=e=>{let{label:t,checked:a=!1,onChange:r,labelColor:n="#333",switchColor:l="#4CAF50",marginTop:i="0",marginRight:s="0",marginBottom:o="20px",marginLeft:c="0"}=e;return(0,N.jsxs)("div",{className:"switch-wrapper",style:{marginTop:i,marginRight:s,marginBottom:o,marginLeft:c},children:[(0,N.jsx)("span",{className:"switch-label",style:{color:n},children:t}),(0,N.jsxs)("label",{className:"switch",children:[(0,N.jsx)("input",{type:"checkbox",checked:a,onChange:e=>r(e.target.checked)}),(0,N.jsx)("span",{className:"slider round",style:{backgroundColor:a?l:"#ccc"}})]})]})},_={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},itemTitleStyle:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)",fontSize:"var(--font-size-small)",fontWeight:"500"},grid:"grid grid-cols-1 gap-6 !grid-cols-1",gridSingle:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"",sectionContent:"space-y-4",formSectionError:"border-destructive/50",emptyStateText:"text-center text-muted-foreground py-8",addItemForm:"rounded-lg p-6 border border-border/60 mt-4",itemDisplayLine:"flex flex-col",itemContent:"flex flex-col gap-1",itemActions:"flex gap-2",formActions:"flex justify-end gap-4 mt-6",errorText:"text-destructive text-sm mt-2"},W=e=>{let{formData:t,config:a,errors:i,isSubmitting:c,onArrayChange:d,onSaveAndContinue:u,onCancel:m,getNestedValue:p,onInputChange:f}=e;const{t:x,i18n:g}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),v=(0,D.n)(),b=(0,n.useCallback)(()=>{m&&m(),window.location.reload()},[m]),j=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.professionalBackground)||{}},[a]),w=(0,n.useMemo)(()=>(null===a||void 0===a?void 0:a.itemSchemas)||{},[a]),[C,T]=(0,n.useState)({});(0,n.useMemo)(()=>{const e={};Object.keys(j).forEach(t=>{e[t]={showForm:!1,editIndex:-1,itemData:{},itemErrors:{}}}),T(e)},[j]);const A=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=v[a];if(r&&r.length>0)return r;if("educationLevels"===e){const e=v.educationLevelOptions;if(e&&e.length>0)return e}const n=g.getResourceBundle(g.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return console.warn("No options found for key: ".concat(e," (mapped to: ").concat(t,")")),[]},[v,g]),S=(0,n.useCallback)((e,t)=>{T(a=>(0,r.A)((0,r.A)({},a),{},{[e]:(0,r.A)((0,r.A)({},a[e]),{},{itemErrors:t})}))},[]),k=(0,n.useCallback)(e=>{T(t=>(0,r.A)((0,r.A)({},t),{},{[e]:{showForm:!1,editIndex:-1,itemData:{},itemErrors:{}}}))},[]),P=(e,t,a)=>{T(r=>{const n=(0,s.cloneDeep)(r);return(0,s.set)(n[e].itemData,t,a),(0,s.set)(n[e].itemErrors,t,void 0),n})},O=e=>{var a;const r=C[e];if(!r)return;const{itemData:n,editIndex:l}=r,i=null===(a=j[e])||void 0===a?void 0:a.itemSchemaRef,o=w[i]||[],c="professionalDetails.".concat(e),u=p(t,c)||[],m=((e,t,a)=>{const r={};let n=!0;return t?(t.forEach(t=>{const{name:l,required:i,dependsOn:o,validationRules:c}=t;let d=i;if(o){const a=(0,s.get)(e,o);let r=!1;r=t.dependsOnValue?t.dependsOnValue.includes(a):!t.dependsOnValueExclude||!t.dependsOnValueExclude.includes(a),r||(d=!1)}if(d){const t=(0,s.get)(e,l);null!==t&&void 0!==t&&""!==t||(n=!1,(0,s.set)(r,l,a("validation.required")))}const u=(0,s.get)(e,l);if(u&&c&&(c.minLength&&String(u).length<c.minLength&&(n=!1,(0,s.set)(r,l,a("validation.minLength",{count:c.minLength}))),c.pattern))try{new RegExp(c.pattern).test(String(u))||(n=!1,(0,s.set)(r,l,a(c.patternErrorKey||"validation.invalidFormat")))}catch(m){console.error("Invalid regex pattern in config:",c.pattern,m)}}),{isValid:n,errors:r}):{isValid:!0,errors:{}}})(n,o,x);(e=>{let t,{sectionKey:a,itemData:r,editIndex:n,currentList:l,onArrayChange:i,resetFormStateCallback:s,validationResult:o,setLocalErrorsCallback:c}=e;if(c(o.errors),!o.isValid)return console.warn("Validation failed for ".concat(a," item:"),o.errors),!1;const d=Array.isArray(l)?l:[];t=n>-1?d.map((e,t)=>t===n?r:e):[...d,r],i(a,t),s()})({sectionKey:c,itemData:n,editIndex:l,currentList:u,onArrayChange:d,resetFormStateCallback:()=>k(e),validationResult:m,setLocalErrorsCallback:t=>S(e,t)})},F=(e,a)=>{const r="professionalDetails.".concat(e);(e=>{let{sectionKey:t,indexToDelete:a,currentList:r,onArrayChange:n}=e;n(t,(Array.isArray(r)?r:[]).filter((e,t)=>t!==a))})({sectionKey:r,indexToDelete:a,currentList:p(t,r)||[],onArrayChange:d})},W=e=>{switch(e){case"education":return(0,N.jsx)(o.D1A,{});case"workExperience":default:return(0,N.jsx)(o.qYx,{});case"qualifications":return(0,N.jsx)(o.TPq,{})}},M=e=>{const a=j[e];if(!a)return null;const l=a.itemSchemaRef,c=w[l]||[],d="professionalDetails.".concat(e),u=p(t,d)||[],m=p(i,d),f=C[e],g=x(a.labelKey,e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"));return(0,N.jsx)("div",{className:_.sectionCard,children:(0,N.jsxs)("div",{className:R()(_.sectionContent,{[_.formSectionError]:m&&!u.length}),children:[(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,N.jsx)("div",{className:_.cardIconWrapper,children:W(e)}),(0,N.jsx)("h3",{className:_.cardTitleH3,style:_.cardTitleH3Style,children:g})]}),!(null!==f&&void 0!==f&&f.showForm)&&(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0,marginBottom:0},children:[u.length>0&&u.map((a,l)=>(0,N.jsxs)(n.Fragment,{children:[(0,N.jsxs)("div",{style:{padding:0,margin:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)("div",{className:_.itemContent,children:[(0,N.jsx)("div",{className:"text-sm font-medium",style:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:(0,N.jsx)("strong",{children:a.title||a.degree||a.jobTitle||"Item"})}),(0,N.jsx)("div",{className:"text-xs",style:{color:"hsl(var(--muted-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:a.institution||a.employer})]}),(0,N.jsxs)("div",{className:_.itemActions,style:{display:"flex",gap:"0.75rem"},children:[(0,N.jsx)("button",{onClick:()=>((e,a)=>{const n="professionalDetails.".concat(e),l=p(t,n)||[];T(t=>(0,r.A)((0,r.A)({},t),{},{[e]:{showForm:!0,editIndex:a,itemData:(0,s.cloneDeep)(l[a]),itemErrors:{}}}))})(e,l),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:x("common.edit"),"aria-label":x("common.edit"),children:(0,N.jsx)(o.SG1,{className:"w-4 h-4"})}),(0,N.jsx)("button",{onClick:()=>F(e,l),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors",title:x("common.delete"),"aria-label":x("common.delete"),children:(0,N.jsx)(o.IXo,{className:"w-4 h-4"})})]})]}),l<u.length-1&&(0,N.jsx)("div",{style:{height:"1px",backgroundColor:"hsl(var(--border) / 0.3)",margin:"0.5rem 0"}})]},"".concat(e,"-").concat(l))),0===u.length&&(0,N.jsx)("p",{className:_.emptyStateText,style:{textAlign:"center",color:"gray",padding:"2rem"},children:x("professionalBackground.no".concat(e.charAt(0).toUpperCase()+e.slice(1)),"No entries added yet.")}),m&&!u.length&&(0,N.jsx)("p",{className:_.errorText,children:m}),(0,N.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:0,padding:0},children:(0,N.jsx)("button",{onClick:()=>(e=>{T(t=>(0,r.A)((0,r.A)({},t),{},{[e]:{showForm:!0,editIndex:-1,itemData:{},itemErrors:{}}}))})(e),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:x("common.add"),"aria-label":x("common.add"),children:(0,N.jsx)(o.GGD,{className:"w-4 h-4"})})})]}),(null===f||void 0===f?void 0:f.showForm)&&(0,N.jsxs)("div",{className:_.addItemForm,children:[(0,N.jsxs)("h4",{style:{marginTop:0,marginBottom:"1.5rem",color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:[f.editIndex>-1?x("common.edit"):x("common.add")," ",g]}),(0,N.jsx)("div",{className:_.grid,children:c.map(t=>((e,t)=>{const{name:a,type:n,required:l,labelKey:i,optionsKey:o,dependsOn:c,dependsOnValue:d,dependsOnValueExclude:u,maxYear:m}=t,p=C[e];if(!p)return null;const{itemData:f,itemErrors:g}=p;if(c){const e=(0,s.get)(f,c);let t=!0;if(d?t=d.includes(e):u&&(t=!u.includes(e)),!t)return null}const h=(0,s.get)(f,a),v=(0,s.get)(g,a),b=x(i,a.charAt(0).toUpperCase()+a.slice(1).replace(/([A-Z])/g," $1"));let j=l;if(c&&j){const e=(0,s.get)(f,c);let t=!0;d?t=d.includes(e):u&&(t=!u.includes(e)),t||(j=!1)}const w={label:(0,N.jsxs)(N.Fragment,{children:[b," ",j&&(0,N.jsx)("span",{className:_.mandatoryMark,children:"*"})]}),error:v,required:j,wrapperClassName:_.fieldWrapper},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,N.jsx)("div",{className:R()(_.fieldWrapper,{[_.fullWidth]:t}),children:e},a)};switch(n){case"text":return T((0,N.jsx)(I.A,(0,r.A)((0,r.A)({},w),{},{value:h||"",onChange:t=>P(e,a,t.target.value)})));case"textarea":return T((0,N.jsx)(E.A,(0,r.A)((0,r.A)({},w),{},{value:h||"",onChange:t=>P(e,a,t.target.value)})),!0);case"date":const t=m?new Date(m,11,31).toISOString().split("T")[0]:void 0,n=h?"string"===typeof h?h:new Date(h).toISOString().split("T")[0]:"";return T((0,N.jsxs)("div",{children:[w.label&&(0,N.jsx)("label",{className:"boxed-date-label ".concat(w.error?"boxed-date-label--error":""),children:w.label}),(0,N.jsx)("input",{type:"date",value:n,onChange:t=>P(e,a,t.target.value||null),max:t,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(w.error?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:w.error?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:w.error?"var(--boxed-inputfield-error-color)":"inherit"}})]}));case"dropdown":const l=A(o);return T((0,N.jsx)(y.A,{label:w.label,options:l,value:h,onChange:t=>P(e,a,t),placeholder:x("common.selectPlaceholder","Select..."),required:w.required,error:w.error}));case"checkbox":return"currentlyStudying"===a||"current"===a?T((0,N.jsx)(H,{label:b,checked:!!h,onChange:t=>P(e,a,t),marginBottom:"0"}),!1):T((0,N.jsx)(L,{label:b,checked:!!h,onChange:t=>P(e,a,t.target.checked)}),!0);default:return null}})(e,t))}),(0,N.jsxs)("div",{className:_.formActions,style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},children:[(0,N.jsx)(h.A,{onClick:()=>(e=>{k(e)})(e),variant:"secondary",children:x("common.cancel")}),(0,N.jsx)(h.A,{onClick:()=>O(e),variant:"primary",children:f.editIndex>-1?x("common.update"):x("common.add")})]})]})]})},e)};return(0,N.jsxs)("div",{className:_.sectionContainer,children:[(0,N.jsxs)("div",{className:_.headerCard,children:[(0,N.jsx)("h2",{className:_.sectionTitle,style:_.sectionTitleStyle,children:x("professionalBackground.title")}),(0,N.jsxs)("div",{className:_.subtitleRow,children:[(0,N.jsx)("p",{className:_.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:x("professionalBackground.subtitle")}),(0,N.jsxs)("div",{className:_.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:_.mandatoryMark,children:"*"})," ",x("common.mandatoryFields")]})]})]}),(0,N.jsxs)("div",{className:_.sectionsWrapper,children:[(0,N.jsx)("div",{className:_.leftColumn,children:Object.keys(j).filter(e=>"education"===e||"qualifications"===e).map(e=>M(e))}),(0,N.jsx)("div",{className:_.rightColumn,children:Object.keys(j).filter(e=>"workExperience"===e).map(e=>M(e))})]}),(0,N.jsx)("div",{className:_.sectionCard,children:(0,N.jsxs)("div",{className:_.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:b,variant:"secondary",disabled:c,children:x("common.cancel")}),(0,N.jsx)(h.A,{onClick:u,variant:"confirmation",disabled:c,children:x(c?"common.saving":"common.saveAndContinue")})]})})]})};var M=a(3986);const B=["name","type","required","labelKey","optionsKey","dependsOn","dependsOnValue","dependsOnValueExclude","maxYear","placeholder"],U={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",hiringMandatoryMark:"text-orange-500",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",gridSingle:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},q=e=>{let{formData:t,config:a,errors:i,isSubmitting:s,onInputChange:c,onSaveAndContinue:d,onCancel:u,getNestedValue:m}=e;const{t:p,i18n:f}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),[x,g]=(0,n.useState)(!1),b=(0,D.n)(),j=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.billingInformation)||[]},[a]),w=(0,n.useCallback)(()=>{u&&u(),window.location.reload()},[u]),C=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=b[a];if(r&&r.length>0)return r;if("educationLevels"===e){const e=b.educationLevelOptions;if(e&&e.length>0)return e}const n=f.getResourceBundle(f.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return[]},[b,f]),T=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const a=m(t,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(a):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(a)},[t,m]),A=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{name:n,type:l,required:s,labelKey:o,optionsKey:d,dependsOn:u,dependsOnValue:f,dependsOnValueExclude:x,maxYear:g,placeholder:h}=e,v=(0,M.A)(e,B);if(!T(e))return null;const b=m(t,n),j=m(i,n),w=p(o,n);let A=s;u&&A&&(T(e)||(A=!1));const S=e.requiredForHiring&&!A&&T(e),k=(0,N.jsxs)(N.Fragment,{children:[w," ",A&&(0,N.jsx)("span",{className:"boxed-inputfield-required",children:"*"})," ",S&&(0,N.jsx)("span",{className:U.hiringMandatoryMark,children:"*"})]}),D={label:k,error:j,required:A,wrapperClassName:U.fieldWrapper},E=e=>(0,N.jsx)("div",{className:R()(U.fieldWrapper,{[U.fullWidth]:!a&&"checkbox"===l&&"withholdingTaxSubject"!==n}),children:e},n);switch(l){case"date":const e=g?new Date(g,11,31).toISOString().split("T")[0]:new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0],t=b?"string"===typeof b?b:new Date(b).toISOString().split("T")[0]:"";return E((0,N.jsxs)("div",{children:[k&&(0,N.jsx)("label",{className:"boxed-date-label ".concat(j?"boxed-date-label--error":""),children:k}),(0,N.jsx)("input",{type:"date",value:t,onChange:e=>c(n,e.target.value||null),max:e,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(j?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:j?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:j?"var(--boxed-inputfield-error-color)":"inherit"}})]}));case"dropdown":const a=C(d);return a.length,E((0,N.jsx)(y.A,{label:D.label,options:a,value:b,onChange:e=>{console.log("SimpleDropdown onChange:",{name:n,newValue:e}),c(n,e)},placeholder:h||p("common.selectPlaceholder","Select..."),required:D.required,error:D.error},n));case"checkbox":return E((0,N.jsx)(H,{label:w,checked:!!b,onChange:e=>c(n,e),marginBottom:"payrollData.withholdingTaxInfo.isSubject"===n?"0":"20px"},n));default:return E((0,N.jsx)(I.A,(0,r.A)((0,r.A)({},D),{},{name:n,type:"number"===l?"number":"text",value:b||"",onChange:e=>c(n,e.target.value),min:"number"===l?v.min:void 0,max:"number"===l?v.max:void 0}),n))}},S=(0,n.useMemo)(()=>{const e={};if(j.forEach(t=>{const a=t.group||"general";e[a]||(e[a]=[]),e[a].push(t)}),e.payrollData){const t=e.payrollData,a=t.filter(e=>e.name&&e.name.includes("withholdingTaxInfo")),r=[],n=[];let l=!1;t.forEach(e=>{e.name&&e.name.includes("withholdingTaxInfo")||("payrollData.religion"===e.name?(l=!0,r.push(e)):l?n.push(e):r.push(e))}),e.payrollData=[...r,...a,...n]}return e},[j]),k=(0,n.useCallback)(()=>{try{j.filter(e=>e.requiredForHiring).filter(e=>T(e)).some(e=>{const a=m(t,e.name);return void 0===a||null===a||""===a})&&g(!0)}catch(e){}d()},[j,t,m,d,T]);return(0,N.jsxs)("div",{className:U.sectionContainer,children:[(0,N.jsxs)("div",{className:U.headerCard,children:[(0,N.jsx)("h2",{className:U.sectionTitle,style:U.sectionTitleStyle,children:p("billingInformation.title")}),(0,N.jsxs)("div",{className:U.subtitleRow,children:[(0,N.jsx)("p",{className:U.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:p("billingInformation.subtitle","Provide your employment and billing details.")}),(0,N.jsxs)("div",{className:U.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:U.hiringMandatoryMark,children:"*"})," ",p("billingInformation.hiringRequiredLegend")]})]})]}),(0,N.jsxs)("div",{className:U.sectionsWrapper,children:[(0,N.jsxs)("div",{className:U.leftColumn,children:[S.employmentEligibility&&(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.grid,children:[(0,N.jsxs)("div",{className:U.cardHeader,children:[(0,N.jsx)("div",{className:U.cardIconWrapper,children:(0,N.jsx)(o.qYx,{})}),(0,N.jsx)("div",{className:U.cardTitle,children:(0,N.jsx)("h3",{className:U.cardTitleH3,style:U.cardTitleH3Style,children:p("billingInformation.employmentEligibilityTitle")})})]}),S.employmentEligibility.map(A)]})}),S.banking&&(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.grid,children:[(0,N.jsxs)("div",{className:U.cardHeader,children:[(0,N.jsx)("div",{className:U.cardIconWrapper,children:(0,N.jsx)(o.lZI,{})}),(0,N.jsx)("div",{className:U.cardTitle,children:(0,N.jsx)("h3",{className:U.cardTitleH3,style:U.cardTitleH3Style,children:p("billingInformation.bankingInfo")})})]}),S.banking.map(A)]})}),S.residency&&(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.grid,children:[(0,N.jsxs)("div",{className:U.cardHeader,children:[(0,N.jsx)("div",{className:U.cardIconWrapper,children:(0,N.jsx)(o.qYx,{})}),(0,N.jsx)("div",{className:U.cardTitle,children:(0,N.jsx)("h3",{className:U.cardTitleH3,style:U.cardTitleH3Style,children:p("billingInformation.residencyPermitTitle")})})]}),S.residency.map(A)]})}),S.insurance&&(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.grid,children:[(0,N.jsxs)("div",{className:U.cardHeader,children:[(0,N.jsx)("div",{className:U.cardIconWrapper,children:(0,N.jsx)(o.pcC,{})}),(0,N.jsx)("div",{className:U.cardTitle,children:(0,N.jsx)("h3",{className:U.cardTitleH3,style:U.cardTitleH3Style,children:p("billingInformation.insurance")})})]}),S.insurance.map(A)]})}),S.billingAddress&&(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.grid,children:[(0,N.jsxs)("div",{className:U.cardHeader,children:[(0,N.jsx)("div",{className:U.cardIconWrapper,children:(0,N.jsx)(o.V5Y,{})}),(0,N.jsx)("div",{className:U.cardTitle,children:(0,N.jsx)("h3",{className:U.cardTitleH3,style:U.cardTitleH3Style,children:p("billingInformation.billingAddress")})})]}),S.billingAddress.find(e=>"sameAsResidential"===e.name)&&A(S.billingAddress.find(e=>"sameAsResidential"===e.name)),S.billingAddress.filter(e=>"sameAsResidential"!==e.name).map(A)]})})]}),(0,N.jsx)("div",{className:U.rightColumn,children:S.payrollData&&(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.gridSingle,children:[(0,N.jsxs)("div",{className:U.cardHeader,children:[(0,N.jsx)("div",{className:U.cardIconWrapper,children:(0,N.jsx)(o.z8N,{})}),(0,N.jsx)("div",{className:U.cardTitle,children:(0,N.jsx)("h3",{className:U.cardTitleH3,style:U.cardTitleH3Style,children:p("billingInformation.payrollDataTitle")})})]}),S.payrollData.map(e=>A(e,!0))]})})})]}),(0,N.jsx)("div",{className:U.sectionCard,children:(0,N.jsxs)("div",{className:U.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:w,variant:"secondary",disabled:s,children:p("common.cancel")}),(0,N.jsx)(h.A,{onClick:k,variant:"confirmation",disabled:s,children:p(s?"common.saving":"common.saveAndContinue")})]})}),(0,N.jsx)(v.A,{isOpen:x,onClose:()=>g(!1),title:p("billingInformation.hiringInfoTitle"),actions:(0,N.jsx)(h.A,{onClick:()=>g(!1),variant:"primary",children:"OK"}),children:(0,N.jsx)("p",{children:p("billingInformation.hiringInfoMessage")})})]})},z={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto",sectionContent:"space-y-4",errorText:"text-destructive text-sm mt-2",errorUpload:"border-destructive"},V=e=>{let{formData:t,config:a,errors:i,isSubmitting:s,onInputChange:c,onArrayChange:d,onSaveAndContinue:u,onCancel:m,getNestedValue:p}=e;const{t:f}=(0,l.Bd)(["dashboardProfile","common","validation"]),{upload:x,uploadState:g}=(()=>{const[e,t]=(0,n.useState)({isLoading:!1,progress:0,error:null,type:null});return{upload:async(e,a,n)=>{t({isLoading:!0,progress:0,error:null,type:n});try{const l=await(0,C.QM)(e,a,e=>{t(t=>(0,r.A)((0,r.A)({},t),{},{progress:t.type===n?e:t.progress}))});return t({isLoading:!1,progress:0,error:null,type:null}),console.log("Upload complete for ".concat(n,": ").concat(l)),l}catch(l){throw console.error("Error uploading ".concat(n,":"),l),t({isLoading:!1,progress:0,error:l.message||"Upload failed",type:n}),l}},uploadState:e}})(),v="switzerland"===p(t,"identity.nationality"),j=(0,n.useMemo)(()=>{var e;return((null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.documentUploads)||[]).map(e=>"workPermit"===e.docType?v?(0,r.A)((0,r.A)({},e),{},{docType:"idCard",name:"workPermitUrl",labelKey:"documents.idCard",descriptionKey:"documents.idCardDescription",required:!0}):(0,r.A)((0,r.A)({},e),{},{labelKey:"documents.workPermit",descriptionKey:"documents.workPermitDescription"}):e)},[a,v]),w=(0,n.useCallback)(()=>{m&&m(),window.location.reload()},[m]),T=(0,n.useMemo)(()=>p(t,"professionalDetails.education")||[],[t,p]),A=(0,n.useMemo)(()=>p(t,"professionalDetails.workExperience")||[],[t,p]),S=(0,n.useCallback)(function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const s=e.split(".").pop(),o=(e.substring(0,e.lastIndexOf("."))||e).toLowerCase().replace(/[^a-z0-9]/g,"_"),c=Date.now();if("diploma"===a&&null!==r&&T[r]){const e=T[r],t=(e.degree||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),n=(e.institution||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_").concat(t,"_").concat(n,"_").concat(c,".").concat(s)}if("qualification"===a&&null!==n){const e=p(t,"professionalDetails.qualifications")||[];if(e[n]){const t=e[n],r=(t.title||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),l=(t.institution||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_").concat(r,"_").concat(l,"_").concat(c,".").concat(s)}}if("referenceLetter"===a&&"workExperience"===i&&null!==l&&A[l]){const e=A[l],t=(e.jobTitle||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),r=(e.employer||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_work_").concat(t,"_").concat(r,"_").concat(c,".").concat(s)}if("referenceLetter"===a&&"education"===i&&null!==r&&T[r]){const e=T[r],t=(e.degree||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),n=(e.institution||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_edu_").concat(t,"_").concat(n,"_").concat(c,".").concat(s)}return"".concat(a,"_").concat(o,"_").concat(c,".").concat(s)},[T,t,p,A]),k=(0,n.useCallback)(async function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!e||0===e.length)return;const i=e[0],{docType:s,name:o,isMultiple:u}=a;let m=null,f=null,g=null;"referenceLetter"===s&&l&&(l.startsWith("work_")?(f="workExperience",m=parseInt(l.split("_")[1])):l.startsWith("edu_")&&(f="education",g=parseInt(l.split("_")[1])));try{const e=p(t,"userId")||"unknown_user",a=S(i.name,s,r||g,n,m,f),l="documents/".concat(e,"/").concat(s,"/").concat(a),h=await x(i,l,s),v=(new Date).toISOString(),b={documentId:"doc_".concat(Date.now()),userId:e,type:s,category:s,fileName:a,originalFileName:i.name,storageUrl:h,fileSize:i.size,fileType:i.type||"application/octet-stream",uploadedAt:v,status:"pending_verification",educationIndex:"diploma"===s?null!==r?parseInt(r):null:"referenceLetter"===s&&"education"===f?g:null,qualificationIndex:"qualification"===s&&null!==n?parseInt(n):null,workExperienceIndex:"referenceLetter"===s&&"workExperience"===f?m:null,referenceType:"referenceLetter"===s?f:null};if(u){const e=p(t,"verification.verificationDocuments")||[];d("verification.verificationDocuments",[...e,b])}else{const e=(p(t,"verification.verificationDocuments")||[]).filter(e=>e.type!==s);d("verification.verificationDocuments",[...e,b]),c(o,h)}}catch(h){console.error("Error uploading ".concat(s,":"),h)}},[x,t,p,c,d,S]),D=(0,n.useCallback)((e,a)=>{const{name:r,isMultiple:n,docType:l}=e;if(n){const e=p(t,"verification.verificationDocuments")||[];let r;if("number"===typeof a){const t=e.filter(e=>e.type===l)[a];r=e.filter(e=>e!==t)}else r=e.filter(e=>e.storageUrl!==a);d("verification.verificationDocuments",r)}else{const e=(p(t,"verification.verificationDocuments")||[]).filter(e=>e.type!==l);d("verification.verificationDocuments",e),c(r,"")}},[p,t,c,d]),I=(0,n.useCallback)(e=>{const{isMultiple:a,docType:r}=e,n=(p(t,"verification.verificationDocuments")||[]).filter(e=>e.type===r);return a?n.map(e=>({url:e.storageUrl,doc:e})):n.length>0?[{url:n[0].storageUrl,doc:n[0]}]:[]},[t,p]),E=(0,n.useMemo)(()=>p(t,"professionalDetails.qualifications")||[],[t,p]),P=(0,n.useMemo)(()=>{const e=T.map((e,t)=>{const a=e.degree?f("dropdowns:educationLevels.".concat(e.degree),e.degree):"",r=e.institution||"",n=e.field||"",l="".concat(a).concat(r?", ".concat(r):"").concat(n?", ".concat(n):"");return{value:t.toString(),label:l||"Education ".concat(t+1)}});return e.push({value:"other",label:f("common.other","Other")}),e},[T,f]),O=(0,n.useMemo)(()=>{const e=E.map((e,t)=>{const a=e.title||"",r=e.institution||"",n=e.type?f("dropdowns:qualificationTypes.".concat(e.type),e.type):"",l="".concat(a).concat(r?", ".concat(r):"").concat(n?" (".concat(n,")"):"");return{value:t.toString(),label:l||"Qualification ".concat(t+1)}});return e.push({value:"other",label:f("common.other","Other")}),e},[E,f]),F=(0,n.useMemo)(()=>{const e=[];return A.length>0&&A.forEach((t,a)=>{const r=t.jobTitle||"",n=t.employer||"",l=t.location||"",i="".concat(r).concat(n?", ".concat(n):"").concat(l?", ".concat(l):"");e.push({value:"work_".concat(a),label:"[".concat(f("documents.workExperience","Work Experience"),"] ").concat(i||"Work ".concat(a+1))})}),T.length>0&&T.forEach((t,a)=>{const r=t.degree?f("dropdowns:educationLevels.".concat(t.degree),t.degree):"",n=t.institution||"",l=t.field||"",i="".concat(r).concat(n?", ".concat(n):"").concat(l?", ".concat(l):"");e.push({value:"edu_".concat(a),label:"[".concat(f("documents.education","Education"),"] ").concat(i||"Education ".concat(a+1))})}),e.push({value:"other",label:f("common.other","Other")}),e},[A,T,f]),R=e=>{let{fieldConfig:t}=e;const{docType:a,name:r,required:l,isMultiple:s,labelKey:c,accept:d}=t,u=I(t),m=p(i,r),x=f(c,a),h=g.isLoading&&g.type===a,v=(0,n.useRef)(null),j=(0,n.useMemo)(()=>{if("diploma"===a&&u.length>0&&!s){var e;const t=null===(e=u[0])||void 0===e?void 0:e.doc;if(null!==(null===t||void 0===t?void 0:t.educationIndex)&&void 0!==(null===t||void 0===t?void 0:t.educationIndex))return t.educationIndex.toString()}return null},[u,a,s]),w=(0,n.useMemo)(()=>{if("qualification"===a&&u.length>0&&!s){var e;const t=null===(e=u[0])||void 0===e?void 0:e.doc;if(null!==(null===t||void 0===t?void 0:t.qualificationIndex)&&void 0!==(null===t||void 0===t?void 0:t.qualificationIndex))return t.qualificationIndex.toString()}return null},[u,a,s]),C=(0,n.useMemo)(()=>{if("referenceLetter"===a&&u.length>0&&!s){var e;const t=null===(e=u[0])||void 0===e?void 0:e.doc;if("workExperience"===(null===t||void 0===t?void 0:t.referenceType)&&null!==(null===t||void 0===t?void 0:t.workExperienceIndex)&&void 0!==(null===t||void 0===t?void 0:t.workExperienceIndex))return"work_".concat(t.workExperienceIndex);if("education"===(null===t||void 0===t?void 0:t.referenceType)&&null!==(null===t||void 0===t?void 0:t.educationIndex)&&void 0!==(null===t||void 0===t?void 0:t.educationIndex))return"edu_".concat(t.educationIndex)}return null},[u,a,s]),[S,R]=(0,n.useState)(j),[L,H]=(0,n.useState)(w),[_,W]=(0,n.useState)(C),M="diploma"===a&&T.length>0,B="qualification"===a&&E.length>0,U="referenceLetter"===a&&F.length>0,q=s?f("documents.add".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Add ".concat(a)):u.length>0?f("documents.replace".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Replace ".concat(a)):f("documents.upload".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Upload ".concat(a)),V=(e,r,n)=>{const l=e.url||e,i=e.doc||null,c=(null===i||void 0===i?void 0:i.originalFileName)||(e=>{if(!e)return"";try{const t=new URL(e).pathname.split("/");return decodeURIComponent(t[t.length-1])}catch(t){const a=e.split("/");return a[a.length-1]}})(l);let d=c;if(null!==(null===i||void 0===i?void 0:i.educationIndex)&&void 0!==(null===i||void 0===i?void 0:i.educationIndex)&&T[i.educationIndex]){const e=T[i.educationIndex],t=e.degree?f("dropdowns:educationLevels.".concat(e.degree),e.degree):"",a=e.institution||"",r=e.field||"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?", ".concat(r):"")}else if(null!==(null===i||void 0===i?void 0:i.qualificationIndex)&&void 0!==(null===i||void 0===i?void 0:i.qualificationIndex)&&E[i.qualificationIndex]){const e=E[i.qualificationIndex],t=e.title||"",a=e.institution||"",r=e.type?f("dropdowns:qualificationTypes.".concat(e.type),e.type):"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?" (".concat(r,")"):"")}else if("workExperience"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.workExperienceIndex)&&void 0!==(null===i||void 0===i?void 0:i.workExperienceIndex)&&A[i.workExperienceIndex]){const e=A[i.workExperienceIndex],t=e.jobTitle||"",a=e.employer||"",r=e.location||"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?", ".concat(r):"")}else if("education"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.educationIndex)&&void 0!==(null===i||void 0===i?void 0:i.educationIndex)&&T[i.educationIndex]){const e=T[i.educationIndex],t=e.degree?f("dropdowns:educationLevels.".concat(e.degree),e.degree):"",a=e.institution||"",r=e.field||"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?", ".concat(r):"")}const u="string"===typeof l?l:(null===l||void 0===l?void 0:l.url)||l;return(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:0,margin:0},children:[(0,N.jsx)("div",{style:{width:"32px",height:"32px",color:"hsl(var(--foreground))",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"0.75rem"},children:(0,N.jsx)(o.jH2,{})}),(0,N.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,N.jsx)("p",{style:{margin:0,fontWeight:500,fontSize:"var(--font-size-small)",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:c,children:d}),(0,N.jsxs)("p",{style:{margin:0,fontSize:"0.75rem",color:"hsl(var(--muted-foreground))",display:"flex",alignItems:"center",gap:"4px"},children:[(0,N.jsx)(o.A3x,{size:12})," ",f("common.uploaded")]})]}),(0,N.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,N.jsx)("button",{onClick:()=>{var e;if("diploma"===a)R((null===i||void 0===i||null===(e=i.educationIndex)||void 0===e?void 0:e.toString())||null);else if("qualification"===a){var t;H((null===i||void 0===i||null===(t=i.qualificationIndex)||void 0===t?void 0:t.toString())||null)}else"referenceLetter"===a&&("workExperience"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.workExperienceIndex)&&void 0!==(null===i||void 0===i?void 0:i.workExperienceIndex)?W("work_".concat(i.workExperienceIndex)):"education"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.educationIndex)&&void 0!==(null===i||void 0===i?void 0:i.educationIndex)&&W("edu_".concat(i.educationIndex)));v.current&&v.current.click()},className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:f("documents.replace"),"aria-label":f("documents.replace"),children:(0,N.jsx)(o.SG1,{className:"w-4 h-4"})}),(0,N.jsx)("button",{onClick:()=>{D(t,s?r:u)},className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors",title:f("documents.remove"),"aria-label":f("documents.remove"),children:(0,N.jsx)(o.IXo,{className:"w-4 h-4"})})]})]},u||r)};return(0,N.jsx)("div",{className:z.sectionCard,children:(0,N.jsxs)("div",{className:z.sectionContent,children:[(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,N.jsx)("div",{className:z.cardIconWrapper,children:(0,N.jsx)(o.YoE,{})}),(0,N.jsxs)("h3",{className:z.cardTitleH3,style:z.cardTitleH3Style,children:[x," ",l&&(0,N.jsx)("span",{className:z.mandatoryMark,children:"*"})]})]}),(0,N.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:0,paddingBottom:s||1!==u.length?void 0:0},children:s?u.map((e,t)=>{const a=e.url||e;return(0,N.jsxs)(n.Fragment,{children:[V(e,t,u.length),t<u.length-1&&(0,N.jsx)("div",{style:{height:"1px",backgroundColor:"hsl(var(--border) / 0.3)",margin:"0.5rem 0"}})]},a||t)}):u.length>0?V(u[0],0):null}),(0,N.jsxs)("div",{style:{marginTop:0===u.length?0:s||1!==u.length?"1.5rem":0},children:[M&&(s||0===u.length)&&(0,N.jsx)("div",{style:{marginBottom:"1rem"},children:(0,N.jsx)(y.A,{label:"",options:P,value:S,onChange:e=>R(e),placeholder:f("documents.selectEducationPlaceholder","Select education entry..."),required:!0})}),B&&(s||0===u.length)&&(0,N.jsx)("div",{style:{marginBottom:"1rem"},children:(0,N.jsx)(y.A,{label:"",options:O,value:L,onChange:e=>H(e),placeholder:f("documents.selectQualificationPlaceholder","Select qualification..."),required:!0})}),U&&(s||0===u.length)&&(0,N.jsx)("div",{style:{marginBottom:"1rem"},children:(0,N.jsx)(y.A,{label:"",options:F,value:_,onChange:e=>W(e),placeholder:f("documents.selectReferencePlaceholder","Select work experience or education..."),required:!0})}),s||0===u.length?(0,N.jsx)(b.A,{ref:v,onChange:e=>{if(M&&(null===S||""===S))return;if(B&&(null===L||""===L))return;if(U&&(null===_||""===_))return;k(e,t,M&&null!==S&&"other"!==S?S:null,B&&null!==L&&"other"!==L?L:null,U&&null!==_&&"other"!==_?_:null),M&&R(null),B&&H(null),U&&W(null)},isLoading:h,progress:h?g.progress:0,accept:d||".pdf,.jpg,.png,.doc,.docx",label:q,documentName:x.toLowerCase(),className:m&&0===u.length?z.errorUpload:"",disabled:M&&(null===S||""===S)||B&&(null===L||""===L)||U&&(null===_||""===_)}):(0,N.jsxs)(N.Fragment,{children:[M&&(0,N.jsx)("div",{style:{marginBottom:"1rem"},children:(0,N.jsx)(y.A,{label:"",options:P,value:S,onChange:e=>R(e),placeholder:f("documents.selectEducationPlaceholder","Select education entry..."),required:!0})}),B&&(0,N.jsx)("div",{style:{marginBottom:"1rem"},children:(0,N.jsx)(y.A,{label:"",options:O,value:L,onChange:e=>H(e),placeholder:f("documents.selectQualificationPlaceholder","Select qualification..."),required:!0})}),U&&(0,N.jsx)("div",{style:{marginBottom:"1rem"},children:(0,N.jsx)(y.A,{label:"",options:F,value:_,onChange:e=>W(e),placeholder:f("documents.selectReferencePlaceholder","Select work experience or education..."),required:!0})}),(0,N.jsx)("input",{ref:v,type:"file",accept:d||".pdf,.jpg,.png,.doc,.docx",onChange:e=>{if(e.target.files&&e.target.files[0]){if(M&&(null===S||""===S))return void(e.target.value="");if(B&&(null===L||""===L))return void(e.target.value="");if(U&&(null===_||""===_))return void(e.target.value="");const a=M&&null!==S&&"other"!==S?S:null,r=B&&null!==L&&"other"!==L?L:null,n=U&&null!==_&&"other"!==_?_:null;k([e.target.files[0]],t,a,r,n),M&&R(null),B&&H(null),U&&W(null),e.target.value=""}},style:{display:"none"}})]})]}),m&&0===u.length&&(0,N.jsx)("p",{className:z.errorText,style:{marginTop:"0.5rem"},children:m}),g.type===a&&g.error&&(0,N.jsx)("p",{className:z.errorText,style:{marginTop:"0.5rem"},children:g.error})]})})};return(0,N.jsxs)("div",{className:z.sectionContainer,children:[(0,N.jsxs)("div",{className:z.headerCard,children:[(0,N.jsx)("h2",{className:z.sectionTitle,style:z.sectionTitleStyle,children:f("documents.title")}),(0,N.jsxs)("div",{className:z.subtitleRow,children:[(0,N.jsx)("p",{className:z.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:f("documents.subtitle")}),(0,N.jsxs)("div",{className:z.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:z.mandatoryMark,children:"*"})," ",f("common.mandatoryFields")]})]})]}),(0,N.jsxs)("div",{className:z.sectionsWrapper,children:[(0,N.jsx)("div",{className:z.leftColumn,children:j.filter((e,t)=>t%2===0).map(e=>(0,N.jsx)(R,{fieldConfig:e},e.docType))}),(0,N.jsx)("div",{className:z.rightColumn,children:j.filter((e,t)=>t%2===1).map(e=>(0,N.jsx)(R,{fieldConfig:e},e.docType))})]}),(0,N.jsx)("div",{className:z.sectionCard,children:(0,N.jsxs)("div",{className:z.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:w,variant:"secondary",disabled:s||g.isLoading,children:f("common.cancel")}),(0,N.jsx)(h.A,{onClick:u,variant:"confirmation",disabled:s||g.isLoading,children:f(s?"common.saving":"common.saveAndContinue")})]})})]})};var K=a(6711);const Y={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5001",REACT_APP_FIREBASE_API_KEY:"AIzaSyBKMnh477m8ZDmk7WhQZKPzb3VDe3PktDs",REACT_APP_FIREBASE_AUTH_DOMAIN:"interimed-620fd.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"interimed-620fd",REACT_APP_FIREBASE_STORAGE_BUCKET:"interimed-620fd.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"436488373074",REACT_APP_FIREBASE_APP_ID:"1:436488373074:web:60c3a26935b6238d9a308b",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-66V8BS82V0",REACT_APP_USE_FIREBASE_EMULATORS:"false"}.REACT_APP_API_BASE_URL||"https://europe-west6-medishift-fd594.cloudfunctions.net",G=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=await(async()=>{const e=S.auth.currentUser;if(!e)throw new Error("User not authenticated");return await e.getIdToken()})(),n=await fetch("".concat(Y,"/").concat(e),(0,r.A)((0,r.A)({},t),{},{headers:(0,r.A)({"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},t.headers)})),l=await n.json();if(!n.ok)throw new Error(l.message||"API error: ".concat(n.status));return l},Z=async()=>{try{return(await G("accountDeletionPreview",{method:"GET"})).data}catch(e){throw console.error("[AccountManagement] Error getting deletion preview:",e),e}},J=async function(){let{reason:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return await G("accountDelete",{method:"POST",body:JSON.stringify({confirmPhrase:"DELETE MY ACCOUNT",reason:e||"User requested account deletion"})})}catch(t){throw console.error("[AccountManagement] Error deleting account:",t),t}};var Q=a(287);const X=()=>{var e,t;const{t:a}=(0,l.Bd)(["dashboardProfile","common"]),{currentUser:r,logout:i}=(0,c.A)(),{showNotification:s}=(0,d.h)(),[u,m]=(0,n.useState)(null),[p,f]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[C,T]=(0,n.useState)(""),[A,k]=(0,n.useState)(""),[D,E]=(0,n.useState)(""),[P,O]=(0,n.useState)(""),[F,R]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(r){var e;const t=null===(e=r.providerData)||void 0===e?void 0:e.some(e=>"google.com"===e.providerId);R(t?"google.com":"password")}},[r]),(0,n.useEffect)(()=>{(async()=>{try{const e=await Z();m(e)}catch(e){console.error("Error loading deletion preview:",e),m(null)}finally{f(!1)}})()},[]);const L=(0,n.useCallback)(()=>{T(""),k(""),g(!0)},[]),H=(0,n.useCallback)(()=>{"DELETE MY ACCOUNT"===C?(g(!1),E(""),O(""),y(!0)):k(a("settings.accountDeletion.confirmMismatch"))},[C,a]),_=(0,n.useCallback)(async()=>{w(!0);try{const e=await J({reason:"User requested account deletion from profile settings"});if(!e.success)throw new Error(e.message||"Deletion failed");s(a("settings.accountDeletion.success"),"success"),await i(),window.location.href="/"}catch(e){console.error("Error deleting account:",e),s(a("settings.accountDeletion.error")+": "+e.message,"error")}finally{w(!1),y(!1)}},[s,i,a]),W=(0,n.useCallback)(async()=>{if(S.auth.currentUser){w(!0),O("");try{if("google.com"===F){const e=new Q.HF;await(0,Q.df)(S.auth,e)}else{if(!D)return O(a("validation.required")),void w(!1);const e=Q.IX.credential(S.auth.currentUser.email,D);await(0,Q.kZ)(S.auth.currentUser,e)}await _()}catch(e){console.error("Error during reauthentication:",e),"auth/wrong-password"===e.code?O(a("accountBasics.errors.wrongPassword")):"auth/too-many-requests"===e.code?s(a("errors.tooManyRequests"),"error"):"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code?s(a("errors.popupClosed"),"info"):O(a("accountBasics.errors.deleteFailed")),w(!1)}}else s(a("errors.notLoggedIn"),"error")},[F,D,_,s,a]);return(0,N.jsxs)("div",{className:"space-y-6",children:[p?(0,N.jsx)("div",{className:"bg-card rounded-xl border border-border/60 p-6 shadow-sm",children:(0,N.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground",children:[(0,N.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent"}),(0,N.jsx)("span",{className:"text-sm",children:a("settings.accountDeletion.loadingPreview")})]})}):u&&(0,N.jsxs)("div",{className:"bg-card rounded-xl border border-border/60 p-6 shadow-sm",children:[(0,N.jsx)("h3",{className:"text-sm font-medium m-0 mb-4",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:a("settings.accountDeletion.previewTitle")}),(0,N.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2 text-destructive font-medium text-sm",children:[(0,N.jsx)(o.yGN,{className:"w-4 h-4"}),a("settings.accountDeletion.immediatelyDeleted")]}),(0,N.jsx)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-6",children:null===(e=u.whatWillBeDeleted)||void 0===e?void 0:e.map((e,t)=>(0,N.jsx)("li",{className:"list-disc",children:e},t))})]}),u.hasLegalRecords&&(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 font-medium text-sm",children:[(0,N.jsx)(o.OZ2,{className:"w-4 h-4"}),a("settings.accountDeletion.retainedForLegalReasons")]}),(0,N.jsx)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-6",children:null===(t=u.whatWillBeRetained)||void 0===t?void 0:t.map((e,t)=>(0,N.jsx)("li",{className:"list-disc",children:e},t))}),u.retentionPeriod&&(0,N.jsxs)("p",{className:"text-xs text-muted-foreground italic mt-2 pl-6",children:[a("settings.accountDeletion.retentionPeriod"),": ",u.retentionPeriod]})]})]}),u.hasLegalRecords?(0,N.jsx)("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-800",children:(0,N.jsxs)("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[(0,N.jsx)(o.F5$,{className:"inline w-3 h-3 mr-1"}),a("settings.accountDeletion.swissLawNotice")]})}):(0,N.jsx)("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:(0,N.jsxs)("p",{className:"text-xs text-green-800 dark:text-green-200",children:[(0,N.jsx)(o.YrT,{className:"inline w-3 h-3 mr-1"}),a("settings.accountDeletion.noLegalRecords")]})})]}),(0,N.jsx)("div",{className:"bg-red-50/50 dark:bg-red-950/10 rounded-xl border border-red-100 dark:border-red-900/30 p-6 shadow-sm",children:(0,N.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,N.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,N.jsx)("div",{className:"p-2 rounded-lg bg-white text-red-600 dark:text-red-400 shrink-0",children:(0,N.jsx)(o.eHT,{className:"w-5 h-5"})}),(0,N.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,N.jsx)("h3",{className:"text-sm font-medium m-0 text-red-600 dark:text-red-400",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:a("settings.dangerZone")}),(0,N.jsx)("h4",{className:"font-medium text-foreground mt-2 mb-1",children:a("settings.accountDeletion.title")}),(0,N.jsx)("p",{className:"text-sm text-muted-foreground",children:a("settings.accountDeletion.description")})]})]}),(0,N.jsx)("div",{className:"shrink-0 md:ml-4",children:(0,N.jsx)(h.A,{onClick:L,disabled:j,variant:"danger",size:"sm",icon:(0,N.jsx)(o.IXo,{}),children:a("settings.accountDeletion.deleteButton")})})]})}),(0,N.jsx)(v.A,{isOpen:x,onClose:()=>g(!1),title:a("settings.accountDeletion.confirmTitle"),size:"small",messageType:"warning",actions:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{onClick:()=>g(!1),variant:"secondary",disabled:j,children:a("common.cancel")}),(0,N.jsx)(h.A,{onClick:H,variant:"danger",disabled:j||"DELETE MY ACCOUNT"!==C,children:a("accountBasics.confirmDelete")})]}),children:(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsx)("p",{className:"font-bold text-red-600",children:a("accountBasics.deleteWarningPermanent")}),(0,N.jsx)("p",{children:a("settings.accountDeletion.confirmMessage")}),(0,N.jsx)(I.A,{name:"confirmPhrase",value:C,onChange:e=>{T(e.target.value),A&&k("")},placeholder:a("settings.accountDeletion.confirmPlaceholder"),error:A})]})}),(0,N.jsx)(v.A,{isOpen:b,onClose:()=>{y(!1),E(""),O("")},title:a("settings.accountDeletion.reauthTitle"),size:"small",messageType:"warning",actions:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{onClick:()=>{y(!1),E(""),O("")},variant:"secondary",disabled:j,children:a("common.cancel")}),(0,N.jsx)(h.A,{onClick:W,variant:"danger",disabled:j||"google.com"!==F&&!D,children:a(j?"settings.accountDeletion.processing":"accountBasics.confirmDeleteAccount")})]}),children:(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsx)("p",{children:a("google.com"===F?"settings.accountDeletion.reauthMessageGoogle":"settings.accountDeletion.reauthMessage")}),"google.com"!==F&&(0,N.jsx)(K.A,{label:a("accountBasics.password"),name:"reauthPassword",value:D,onChange:e=>{E(e.target.value),P&&O("")},error:P,type:"password",showErrors:!0})]})})]})},$=["name","type","required","labelKey","optionsKey","dependsOn","dependsOnValue","dependsOnValueExclude","maxYear","placeholder"],ee={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},te=e=>{let{formData:t,config:a,errors:i,isSubmitting:s,onInputChange:c,onSaveAndContinue:d,onCancel:u,getNestedValue:m}=e;const{t:p,i18n:f}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),x=(0,D.n)(),g=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.settings)||[]},[a]),v=(0,n.useCallback)(()=>{u&&u(),window.location.reload()},[u]),b=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=x[a];if(r&&r.length>0)return r;const n=f.getResourceBundle(f.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return[]},[x,f]),j=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const a=m(t,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(a):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(a)},[t,m]),w=e=>{const{name:a,type:n,required:l,labelKey:s,optionsKey:o,dependsOn:d,dependsOnValue:u,dependsOnValueExclude:f,maxYear:x,placeholder:g}=e,h=(0,M.A)(e,$);if(!j(e))return null;const v=m(t,a),w=m(i,a),C=p(s,a);let T=l;d&&T&&(j(e)||(T=!1));const A=(0,N.jsxs)(N.Fragment,{children:[C," ",T&&(0,N.jsx)("span",{className:"boxed-inputfield-required",children:"*"})]}),S={label:A,error:w,required:T,wrapperClassName:ee.fieldWrapper},k=e=>(0,N.jsx)("div",{className:R()(ee.fieldWrapper,{[ee.fullWidth]:"textarea"===n}),children:e},a);switch(n){case"date":const t=x?new Date(x,11,31).toISOString().split("T")[0]:void 0,l=v?"string"===typeof v?v:new Date(v).toISOString().split("T")[0]:"";return k((0,N.jsxs)("div",{children:[A&&(0,N.jsx)("label",{className:"boxed-date-label ".concat(w?"boxed-date-label--error":""),children:A}),(0,N.jsx)("input",{type:"date",value:l,onChange:e=>c(a,e.target.value||null),max:t,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(w?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:w?"var(--red-3)":"hsl(var(--border) / 0.6)",color:w?"var(--red-3)":"inherit"}})]}));case"dropdown":const i=b(o);return i.length,k((0,N.jsx)(y.A,{label:S.label,options:i,value:v,onChange:e=>{console.log("SimpleDropdown onChange:",{name:a,newValue:e}),c(a,e)},placeholder:g||p("common.selectPlaceholder","Select..."),required:S.required,error:S.error},a));case"checkbox":return"notifications"===e.group||"marketplace"===e.group?k((0,N.jsx)(H,{label:C,checked:!!v,onChange:e=>c(a,e),marginBottom:"0"},a)):k((0,N.jsx)(L,(0,r.A)((0,r.A)({},S),{},{label:C,checked:!!v,onChange:e=>c(a,e.target.checked)}),a));case"textarea":return k((0,N.jsx)(E.A,(0,r.A)((0,r.A)({},S),{},{value:v||"",onChange:e=>c(a,e.target.value),placeholder:g,maxLength:h.maxLength}),a));default:return k((0,N.jsx)(I.A,(0,r.A)((0,r.A)({},S),{},{name:a,type:"number"===n?"number":"text",value:v||"",onChange:e=>c(a,e.target.value),min:"number"===n?h.min:void 0,max:"number"===n?h.max:void 0,placeholder:g}),a))}},C=(0,n.useMemo)(()=>{const e={};return g.forEach(t=>{const a=t.group||"general";e[a]||(e[a]=[]),e[a].push(t)}),e},[g]),T=(0,n.useMemo)(()=>{var e;return(null===(e=C.platformSettings)||void 0===e?void 0:e.filter(e=>"platformSettings.detailedAvailability.notes"!==e.name))||[]},[C.platformSettings]),A=(0,n.useMemo)(()=>{var e;return null===(e=C.platformSettings)||void 0===e?void 0:e.find(e=>"platformSettings.detailedAvailability.notes"===e.name)},[C.platformSettings]);return(0,N.jsxs)("div",{className:ee.sectionContainer,children:[(0,N.jsxs)("div",{className:ee.headerCard,children:[(0,N.jsx)("h2",{className:ee.sectionTitle,style:ee.sectionTitleStyle,children:p("settings.title")}),(0,N.jsxs)("div",{className:ee.subtitleRow,children:[(0,N.jsx)("p",{className:ee.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:p("settings.subtitle")}),(0,N.jsxs)("div",{className:ee.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:ee.mandatoryMark,children:"*"})," ",p("common.mandatoryFields")]})]})]}),(0,N.jsxs)("div",{className:ee.sectionsWrapper,children:[(0,N.jsxs)("div",{className:ee.leftColumn,children:[T.length>0&&(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.grid,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.VSk,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.platformSettingsTitle")})})]}),T.map(w)]})}),C.privacy&&(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.grid,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.pcC,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.privacySettingsTitle")})})]}),C.privacy.map(w)]})}),C.marketplace&&(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.grid,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.VeH,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.marketplaceSettingsTitle")})})]}),C.marketplace.map(w)]})})]}),(0,N.jsxs)("div",{className:ee.rightColumn,children:[C.availability&&(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.grid,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.Ohp,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.availabilitySettingsTitle")})})]}),C.availability.map(w)]})}),C.notifications&&(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.grid,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.zd,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.notificationPreferencesTitle")})})]}),C.notifications.map(w)]})}),A&&(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.grid,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.Ohp,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.availabilityNotes")})})]}),w(A)]})})]})]}),(0,N.jsx)("div",{className:"w-full max-w-[1000px] mx-auto",children:(0,N.jsxs)("div",{className:ee.sectionCard,children:[(0,N.jsxs)("div",{className:ee.cardHeader,children:[(0,N.jsx)("div",{className:ee.cardIconWrapper,children:(0,N.jsx)(o.JOY,{})}),(0,N.jsx)("div",{className:ee.cardTitle,children:(0,N.jsx)("h3",{className:ee.cardTitleH3,style:ee.cardTitleH3Style,children:p("settings.accountDeletion.title","Account Management")})})]}),(0,N.jsx)("div",{className:"mt-4",children:(0,N.jsx)(X,{})})]})}),(0,N.jsx)("div",{className:ee.sectionCard,children:(0,N.jsxs)("div",{className:ee.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:v,variant:"secondary",disabled:s,children:p("common.cancel")}),(0,N.jsx)(h.A,{onClick:d,variant:"confirmation",disabled:s,children:p(s?"common.saving":"common.saveAndContinue")})]})})]})},ae={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-0",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"facility-details-sections-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},re=e=>{var t;let{activeTab:a,formData:i,config:s,errors:c,isSubmitting:d,onInputChange:u,onSaveAndContinue:m,onCancel:p,getNestedValue:f}=e;const{t:x,i18n:g}=(0,l.Bd)(["dashboardProfile","dropdowns","validation","common"]),v=(0,D.n)(),b=(0,n.useMemo)(()=>s&&a&&s.fields&&s.fields[a]?s.fields[a]:[],[s,a]),j=(0,n.useCallback)(e=>{const t=v["".concat(e,"Options")];if(t&&t.length>0)return t;const a="".concat(e.replace(/s$/,""),"Options"),r=v[a];if(r&&r.length>0)return r;const n=g.getResourceBundle(g.language,"dropdowns");if(n&&n[e]){const t=Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t.length>0)return t}return f(null===s||void 0===s?void 0:s.dropdownOptionsResolved,e)||[]},[s,f,v,g]),w=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const t=f(i,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(t):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(t)},[i,f]),C=e=>{const{name:t,type:a,required:n,labelKey:l,optionsKey:s,placeholderKey:o,infoKey:d,dependsOn:m}=e;if(!w(e))return null;const p=f(i,t),g=f(c,t),h=x(l,t),v=o?x(o):x("common.selectPlaceholder","Select..."),b=t;let C=n;m&&C&&!w(e)&&(C=!1);const T={label:h,error:g,required:C,wrapperClassName:ae.fieldWrapper};if("date"===a){const e=t.includes("dateOfBirth")?new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0]:void 0,a=p?"string"===typeof p?p:new Date(p).toISOString().split("T")[0]:"";return(0,N.jsxs)("div",{className:ae.fieldWrapper,children:[T.label&&(0,N.jsx)("label",{className:"boxed-date-label ".concat(g?"boxed-date-label--error":""),children:T.label}),(0,N.jsx)("input",{type:"date",value:a,onChange:e=>u(t,e.target.value||null),max:e,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(g?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:g?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:g?"var(--boxed-inputfield-error-color)":"inherit"}})]},b)}if("dropdown"===a){const e=j(s);e.length,0;let a=null;return null!==p&&void 0!==p&&""!==p&&(a=e.find(e=>e.value===p),a||(a=e.find(e=>String(e.value)===String(p)))),(0,N.jsx)("div",{className:ae.fieldWrapper,children:(0,N.jsx)(y.A,{label:T.label,options:e,value:p,onChange:e=>{u(t,e)},placeholder:v||x("common.selectPlaceholder","Select..."),required:T.required,error:T.error})},b)}return(0,N.jsx)("div",{className:ae.fieldWrapper,children:(0,N.jsx)(I.A,(0,r.A)((0,r.A)({},T),{},{name:t,type:"url"===a?"url":"email"===a?"email":"tel"===a?"tel":"text",value:p||"",onChange:e=>u(t,e.target.value),infoText:d?x(d):void 0,placeholder:v}),t)},b)},T=(0,n.useMemo)(()=>{const e={},t=["general","address","legal","legalRep","billing","bankingFacility"];b.forEach(t=>{let a=t.group;a||(a=t.name.startsWith("address")?"address":t.name.startsWith("legalRepresentative")?"legalRep":t.name.startsWith("billingContact")?"billing":t.name.startsWith("facilityIBAN")||t.name.startsWith("facilityBank")?"bankingFacility":"general"),e[a]||(e[a]=[]),e[a].push(t)});return Object.keys(e).sort((e,a)=>{const r=t.indexOf(e),n=t.indexOf(a);return-1!==r&&-1!==n?r-n:-1!==r?-1:-1!==n?1:e.localeCompare(a)}).map(t=>({key:t,fields:e[t]}))},[b]),A=null===s||void 0===s||null===(t=s.tabs)||void 0===t?void 0:t.find(e=>e.id===a),S=e=>{switch(e){case"general":return(0,N.jsx)(o.V5Y,{});case"address":return(0,N.jsx)(o.HzC,{});case"legal":return(0,N.jsx)(o.qYx,{});case"legalRep":return(0,N.jsx)(o.JXP,{});case"billing":return(0,N.jsx)(o.jH2,{});case"bankingFacility":return(0,N.jsx)(o.lZI,{});default:return(0,N.jsx)(o.S8s,{})}},k=e=>{if("legalRep"===e)return x("facilityDetails.groupTitle_legalRep","Responsible Person");const t="facilityDetails.groupTitle_".concat(e),a=e.replace(/([A-Z])/g," $1").trim().replace(/^\w/,e=>e.toUpperCase());return x(t,a)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("style",{children:"\n        .facility-details-container {\n          container-type: inline-size;\n        }\n        @container (min-width: 700px) {\n          .facility-details-sections-wrapper {\n            flex-direction: row;\n          }\n        }\n      "}),(0,N.jsxs)("div",{className:"".concat(ae.sectionContainer," facility-details-container"),children:[(0,N.jsx)("div",{className:ae.headerCard,children:(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("h2",{className:ae.sectionTitle,style:ae.sectionTitleStyle,children:A?x(A.labelKey):a}),(0,N.jsxs)("div",{className:ae.subtitleRow,children:[(0,N.jsx)("p",{className:ae.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:x("facilityDetails.subtitle","Please ensure facility details are accurate and up to date.")}),(0,N.jsxs)("div",{className:ae.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:ae.mandatoryMark,children:"*"})," ",x("common.mandatoryFields")]})]})]})}),(0,N.jsxs)("div",{className:ae.sectionsWrapper,children:[(0,N.jsx)("div",{className:ae.leftColumn,children:T.filter((e,t)=>t%2===0).map(e=>(0,N.jsx)("div",{className:ae.sectionCard,children:(0,N.jsxs)("div",{className:ae.grid,children:[(0,N.jsxs)("div",{className:ae.cardHeader,children:[(0,N.jsx)("div",{className:ae.cardIconWrapper,children:S(e.key)}),(0,N.jsx)("div",{className:ae.cardTitle,children:(0,N.jsx)("h3",{className:ae.cardTitleH3,style:ae.cardTitleH3Style,children:k(e.key)})})]}),e.fields.map(e=>C(e))]})},e.key))}),(0,N.jsx)("div",{className:ae.rightColumn,children:T.filter((e,t)=>t%2!==0).map(e=>(0,N.jsx)("div",{className:ae.sectionCard,children:(0,N.jsxs)("div",{className:ae.grid,children:[(0,N.jsxs)("div",{className:ae.cardHeader,children:[(0,N.jsx)("div",{className:ae.cardIconWrapper,children:S(e.key)}),(0,N.jsx)("div",{className:ae.cardTitle,children:(0,N.jsx)("h3",{className:ae.cardTitleH3,style:ae.cardTitleH3Style,children:k(e.key)})})]}),e.fields.map(e=>C(e))]})},e.key))})]}),(0,N.jsxs)("div",{className:ae.formActions,children:[(0,N.jsx)(h.A,{onClick:p,variant:"secondary",disabled:d,children:x("common.cancel")}),(0,N.jsx)(h.A,{onClick:m,variant:"confirmation",disabled:d,children:x(d?"common.saving":"common.saveAndContinue")})]})]})]})},ne={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"facility-uploads-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto",sectionContent:"space-y-4",errorText:"text-destructive text-sm mt-2",errorUpload:"border-destructive"},le=e=>{let{formData:t,config:a,errors:i,isSubmitting:s,onInputChange:c,onArrayChange:d,onSaveAndContinue:u,onCancel:m,getNestedValue:p}=e;const{t:f}=(0,l.Bd)(["dashboardProfile","common","validation"]),{upload:x,uploadState:g}=(()=>{const[e,t]=(0,n.useState)({isLoading:!1,progress:0,error:null,type:null});return{upload:async(e,a,n)=>{t({isLoading:!0,progress:0,error:null,type:n});try{const l=await(0,C.QM)(e,a,e=>{t(t=>(0,r.A)((0,r.A)({},t),{},{progress:t.type===n?e:t.progress}))});return t({isLoading:!1,progress:0,error:null,type:null}),console.log("Upload complete for ".concat(n,": ").concat(l)),l}catch(l){throw console.error("Error uploading ".concat(n,":"),l),t({isLoading:!1,progress:0,error:l.message||"Upload failed",type:n}),l}},uploadState:e}})(),v=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.documentUploads)||[]},[a]),y=(0,n.useCallback)(()=>{m&&m()},[m]),j=(0,n.useCallback)(async(e,a)=>{if(!e||0===e.length)return;const r=e[0],{docType:n,name:l,isMultiple:i}=a;try{const e=p(t,"userId")||"unknown_user",a=p(t,"facilityId")||e,s=Date.now(),o=r.name.split(".").pop(),u=r.name.substring(0,r.name.lastIndexOf("."))||r.name,m="".concat(u.toLowerCase().replace(/[^a-z0-9]/g,"_"),"_").concat(s,".").concat(o),f="documents/facilities/".concat(a,"/").concat(n,"/").concat(m),g=await x(r,f,n),h=(new Date).toISOString(),v={documentId:"facility_doc_".concat(Date.now()),userId:e,facilityId:a,type:n,category:n,fileName:m,originalFileName:r.name,storageUrl:g,fileSize:r.size,fileType:r.type||"application/octet-stream",uploadedAt:h,status:"pending_verification"},b=p(t,"verification.verificationDocumentsProvided")||[];if(i){d("verification.verificationDocumentsProvided",[...b,v]);const e=p(t,l)||[];d(l,[...e,g])}else{const e=b.filter(e=>e.type!==n);d("verification.verificationDocumentsProvided",[...e,v]),c(l,g)}}catch(s){console.error("Error uploading ".concat(n,":"),s)}},[x,t,p,c,d]),w=(0,n.useCallback)((e,a)=>{const{name:r,isMultiple:n,docType:l}=e,i=p(t,"verification.verificationDocumentsProvided")||[];if(n){const e=p(t,r)||[];let n,s;if("number"===typeof a){const t=i.filter(e=>e.type===l)[a];s=i.filter(e=>e!==t),n=e.filter((e,t)=>t!==a)}else s=i.filter(e=>e.storageUrl!==a),n=e.filter(e=>e!==a);d("verification.verificationDocumentsProvided",s),d(r,n)}else{const e=i.filter(e=>e.type!==l);d("verification.verificationDocumentsProvided",e),c(r,"")}},[p,t,c,d]),T=(0,n.useCallback)(e=>{const{isMultiple:a,docType:r,name:n}=e,l=(p(t,"verification.verificationDocumentsProvided")||[]).filter(e=>e.type===r);return a?l.map(e=>({url:e.storageUrl,doc:e})):l.length>0?[{url:l[0].storageUrl,doc:l[0]}]:[]},[t,p]),A=e=>{let{fieldConfig:t}=e;const{docType:a,name:r,required:l,isMultiple:s,labelKey:c,accept:d}=t,u=T(t),m=p(i,r),x=f(c,a),h=g.isLoading&&g.type===a,v=(0,n.useRef)(null),y=s?f("documents.add".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Add ".concat(a)):u.length>0?f("documents.replace".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Replace ".concat(a)):f("documents.upload".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Upload ".concat(a)),C=(e,a)=>{const r=e.url||e,n=e.doc||null,l=(null===n||void 0===n?void 0:n.originalFileName)||(e=>{if(!e)return"";try{const t=new URL(e).pathname.split("/");return decodeURIComponent(t[t.length-1])}catch(t){const a=e.split("/");return a[a.length-1]}})(r);return(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:0,margin:0},children:[(0,N.jsx)("div",{style:{width:"32px",height:"32px",color:"hsl(var(--foreground))",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"0.75rem"},children:(0,N.jsx)(o.jH2,{})}),(0,N.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,N.jsx)("p",{style:{margin:0,fontWeight:500,fontSize:"var(--font-size-small)",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:l,children:l}),(0,N.jsxs)("p",{style:{margin:0,fontSize:"0.75rem",color:"hsl(var(--muted-foreground))",display:"flex",alignItems:"center",gap:"4px"},children:[(0,N.jsx)(o.A3x,{size:12})," ",f("common.uploaded")]})]}),(0,N.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,N.jsx)("button",{onClick:()=>v.current&&v.current.click(),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:f("documents.replace"),"aria-label":f("documents.replace"),children:(0,N.jsx)(o.SG1,{className:"w-4 h-4"})}),(0,N.jsx)("button",{onClick:()=>{w(t,s?a:r)},className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors",title:f("documents.remove"),"aria-label":f("documents.remove"),children:(0,N.jsx)(o.IXo,{className:"w-4 h-4"})})]})]},r||a)};return(0,N.jsx)("div",{className:ne.sectionCard,children:(0,N.jsxs)("div",{className:ne.sectionContent,children:[(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,N.jsx)("div",{className:ne.cardIconWrapper,children:(0,N.jsx)(o.YoE,{})}),(0,N.jsxs)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:[x," ",l&&(0,N.jsx)("span",{className:ne.mandatoryMark,children:"*"})]})]}),(0,N.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:0,paddingBottom:s||1!==u.length?void 0:0},children:s?u.map((e,t)=>{const a=e.url||e;return(0,N.jsxs)(n.Fragment,{children:[C(e,t),t<u.length-1&&(0,N.jsx)("div",{style:{height:"1px",backgroundColor:"hsl(var(--border) / 0.3)",margin:"0.5rem 0"}})]},a||t)}):u.length>0?C(u[0],0):null}),(0,N.jsx)("div",{style:{marginTop:0===u.length?0:s||1!==u.length?"1.5rem":0},children:s||0===u.length?(0,N.jsx)(b.A,{ref:v,onChange:e=>j(e,t),isLoading:h,progress:h?g.progress:0,accept:d||".pdf,.jpg,.png,.doc,.docx",label:y,documentName:x.toLowerCase(),className:m&&0===u.length?ne.errorUpload:""}):(0,N.jsx)("input",{ref:v,type:"file",accept:d||".pdf,.jpg,.png,.doc,.docx",onChange:e=>{e.target.files&&e.target.files[0]&&(j([e.target.files[0]],t),e.target.value="")},style:{display:"none"}})}),m&&0===u.length&&(0,N.jsx)("p",{className:ne.errorText,style:{marginTop:"0.5rem"},children:m}),g.type===a&&g.error&&(0,N.jsx)("p",{className:ne.errorText,style:{marginTop:"0.5rem"},children:g.error})]})})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("style",{children:"\n            .facility-uploads-wrapper {\n                 container-type: inline-size;\n            }\n             @container (min-width: 700px) {\n              .facility-uploads-wrapper {\n                flex-direction: row;\n              }\n            }\n            /* Fallback for browsers not supporting container queries or just media query */\n            @media (min-width: 1024px) {\n                 .facility-uploads-wrapper {\n                    flex-direction: row;\n                 }\n            }\n        "}),(0,N.jsxs)("div",{className:ne.sectionContainer,children:[(0,N.jsxs)("div",{className:ne.headerCard,children:[(0,N.jsx)("h2",{className:ne.sectionTitle,style:ne.sectionTitleStyle,children:f("documents.title")}),(0,N.jsxs)("div",{className:ne.subtitleRow,children:[(0,N.jsx)("p",{className:ne.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:f("documents.subtitle")}),(0,N.jsxs)("div",{className:ne.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:ne.mandatoryMark,children:"*"})," ",f("common.mandatoryFields")]})]})]}),(0,N.jsxs)("div",{className:ne.sectionsWrapper,children:[(0,N.jsx)("div",{className:ne.leftColumn,children:v.filter((e,t)=>t%2===0).map(e=>(0,N.jsx)(A,{fieldConfig:e},e.docType))}),(0,N.jsx)("div",{className:ne.rightColumn,children:v.filter((e,t)=>t%2===1).map(e=>(0,N.jsx)(A,{fieldConfig:e},e.docType))})]}),(0,N.jsx)("div",{className:ne.sectionCard,children:(0,N.jsxs)("div",{className:ne.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:y,variant:"secondary",disabled:s||g.isLoading,children:f("common.cancel")}),(0,N.jsx)(h.A,{onClick:u,variant:"confirmation",disabled:s||g.isLoading,children:f(s?"common.saving":"common.saveAndContinue")})]})})]})]})},ie=["name","type","required","labelKey","optionsKey","dependsOn","placeholder"],se={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},oe=e=>{let{formData:t,config:a,errors:i,isSubmitting:s,onInputChange:c,onSaveAndContinue:d,onCancel:u,getNestedValue:m}=e;const{t:p,i18n:f}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),x=(0,D.n)(),g=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.settings)||[]},[a]),v=(0,n.useCallback)(()=>{u&&u(),window.location.reload()},[u]),b=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=x[a];if(r&&r.length>0)return r;const n=f.getResourceBundle(f.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return[]},[x,f]),j=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const a=m(t,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(a):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(a)},[t,m]),w=e=>{const{name:a,type:n,required:l,labelKey:s,optionsKey:o,dependsOn:d,placeholder:u}=e,f=(0,M.A)(e,ie);if(!j(e))return null;const x=m(t,a),g=m(i,a),h=p(s,a);let v=l;d&&v&&(j(e)||(v=!1));const w={label:(0,N.jsxs)(N.Fragment,{children:[h," ",v&&(0,N.jsx)("span",{className:"boxed-inputfield-required",children:"*"})]}),error:g,required:v,wrapperClassName:se.fieldWrapper},C=e=>(0,N.jsx)("div",{className:R()(se.fieldWrapper,{[se.fullWidth]:"textarea"===n}),children:e},a);switch(n){case"dropdown":const t=b(o);return C((0,N.jsx)(y.A,{label:w.label,options:t,value:x,onChange:e=>{c(a,e)},placeholder:u||p("common.selectPlaceholder","Select..."),required:w.required,error:w.error},a));case"checkbox":return"contractSettings"===e.group?C((0,N.jsx)(H,{label:h,checked:!!x,onChange:e=>c(a,e),marginBottom:"0"},a)):C((0,N.jsx)(L,(0,r.A)((0,r.A)({},w),{},{label:h,checked:!!x,onChange:e=>c(a,e.target.checked)}),a));case"textarea":return C((0,N.jsx)(E.A,(0,r.A)((0,r.A)({},w),{},{value:x||"",onChange:e=>c(a,e.target.value),placeholder:u,maxLength:f.maxLength}),a));default:return C((0,N.jsx)(I.A,(0,r.A)((0,r.A)({},w),{},{name:a,type:"number"===n?"number":"text",value:x||"",onChange:e=>c(a,e.target.value),min:"number"===n?f.min:void 0,max:"number"===n?f.max:void 0,placeholder:u}),a))}},C=(0,n.useMemo)(()=>{const e={};return g.forEach(t=>{const a=t.group||"general";e[a]||(e[a]=[]),e[a].push(t)}),e},[g]);return(0,N.jsxs)("div",{className:se.sectionContainer,children:[(0,N.jsxs)("div",{className:se.headerCard,children:[(0,N.jsx)("h2",{className:se.sectionTitle,style:se.sectionTitleStyle,children:p("settings.title")}),(0,N.jsxs)("div",{className:se.subtitleRow,children:[(0,N.jsx)("p",{className:se.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:p("settings.subtitle")}),(0,N.jsxs)("div",{className:se.mandatoryFieldLegend,children:[(0,N.jsx)("span",{className:se.mandatoryMark,children:"*"})," ",p("common.mandatoryFields")]})]})]}),(0,N.jsx)("div",{className:se.sectionsWrapper,children:(0,N.jsxs)("div",{className:se.leftColumn,children:[C.operationalSettings&&(0,N.jsx)("div",{className:se.sectionCard,children:(0,N.jsxs)("div",{className:se.grid,children:[(0,N.jsxs)("div",{className:se.cardHeader,children:[(0,N.jsx)("div",{className:se.cardIconWrapper,children:(0,N.jsx)(o.Ohp,{})}),(0,N.jsx)("div",{className:se.cardTitle,children:(0,N.jsx)("h3",{className:se.cardTitleH3,style:se.cardTitleH3Style,children:p("settings.operationalSettingsTitle")})})]}),C.operationalSettings.map(w)]})}),C.contractSettings&&(0,N.jsx)("div",{className:se.sectionCard,children:(0,N.jsxs)("div",{className:se.grid,children:[(0,N.jsxs)("div",{className:se.cardHeader,children:[(0,N.jsx)("div",{className:se.cardIconWrapper,children:(0,N.jsx)(o.jH2,{})}),(0,N.jsx)("div",{className:se.cardTitle,children:(0,N.jsx)("h3",{className:se.cardTitleH3,style:se.cardTitleH3Style,children:p("settings.contractSettingsTitle")})})]}),C.contractSettings.map(w)]})})]})}),(0,N.jsx)("div",{className:"w-full max-w-[1000px] mx-auto",children:(0,N.jsxs)("div",{className:se.sectionCard,children:[(0,N.jsxs)("div",{className:se.cardHeader,children:[(0,N.jsx)("div",{className:se.cardIconWrapper,children:(0,N.jsx)(o.JOY,{})}),(0,N.jsx)("div",{className:se.cardTitle,children:(0,N.jsx)("h3",{className:se.cardTitleH3,style:se.cardTitleH3Style,children:p("settings.accountDeletion.title","Account Management")})})]}),(0,N.jsx)("div",{className:"mt-4",children:(0,N.jsx)(X,{})})]})}),(0,N.jsx)("div",{className:se.sectionCard,children:(0,N.jsxs)("div",{className:se.formActions,style:{marginTop:0},children:[(0,N.jsx)(h.A,{onClick:v,variant:"secondary",disabled:s,children:p("common.cancel")}),(0,N.jsx)(h.A,{onClick:d,variant:"confirmation",disabled:s,children:p(s?"common.saving":"common.saveAndContinue")})]})})]})},ce=(e,t)=>{if(!e||null===t||void 0===t||!t.tabs)return 0;const a=t.tabs.map(e=>e.id),r=a.filter(a=>de(e,a,t));return a.length>0?Math.round(r.length/a.length*100):0},de=(e,t,a)=>{if(!e||null===a||void 0===a||!a.fields||!a.fields[t])return!1;const r=a.fields[t];if(Array.isArray(r))return r.every(t=>{if(!t.required)return!0;if(t.dependsOn){const a=(0,s.get)(e,t.dependsOn);if(t.dependsOnValue&&!t.dependsOnValue.includes(a))return!0;if(t.dependsOnValueExclude&&t.dependsOnValueExclude.includes(a))return!0}const a=(0,s.get)(e,t.name);return null!==a&&void 0!==a&&""!==String(a).trim()});if("object"===typeof r){let t=!0;return Object.entries(r).forEach(a=>{let[r,n]=a;if(n.required&&n.minItems>0){const a=(0,s.get)(e,r);(!Array.isArray(a)||a.length<n.minItems)&&(t=!1)}}),t}return!0},ue=(e,t,a)=>{var r,n;if(null===a||void 0===a||!a.tabs)return t===(null===a||void 0===a||null===(r=a.tabs)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id);const l=a.tabs.findIndex(e=>e.id===t);if(l<=0)return!0;for(let i=0;i<l;i++)if(!de(e,a.tabs[i].id,a))return!1;return!0},me=()=>{var e,t,D,I,E,P,F,R,L;const{t:H}=(0,l.Bd)(["dashboardProfile","common","validation"]),{currentUser:_}=(0,c.A)(),{showNotification:M}=(0,d.h)(),B=(0,i.Zp)(),U=(0,i.zy)(),{setProfileCompletionStatus:z}=(0,m.M)(),K=(0,f.n)(),Y=(0,x.K)(),{profileData:G,isLoading:Z,error:J,updateProfileData:Q,initializeProfileDocument:X,refreshProfileData:$}=(0,u.A)(),[ee,ae]=(0,n.useState)(""),[ne,ie]=(0,n.useState)(null),[se,me]=(0,n.useState)(null),[pe,fe]=(0,n.useState)(!1),xe=(0,n.useRef)(null),[ge,he]=(0,n.useState)(!1),[ve,be]=(0,n.useState)({}),[ye,je]=(0,n.useState)("free"),[Ne,we]=(0,n.useState)(!1),[Ce,Te]=(0,n.useState)(!0),[Ae,Se]=(0,n.useState)(!1),[ke,De]=(0,n.useState)(""),[Ie,Ee]=(0,n.useState)(!1),[Pe,Oe]=(0,n.useState)(!1),[Fe,Re]=(0,n.useState)(!1),[Le,He]=(0,n.useState)(null),[_e,We]=(0,n.useState)(!1),[Me,Be]=(0,n.useState)(null),[Ue,qe]=(0,n.useState)(!1),[ze,Ve]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{if(null!==_&&void 0!==_&&_.uid){const e=await(0,T.FD)(_.uid);e&&Ve(e)}})()},[_]);const Ke=(0,n.useRef)(null),Ye=(0,n.useMemo)(()=>!(!xe.current||!ne)&&!(0,s.isEqual)(xe.current,ne),[ne]);(0,n.useEffect)(()=>{!_||G||Z||J||X().then(e=>{e&&$()})},[_,G,Z,J,X,$]);const{tutorialPassed:Ge,startTutorial:Ze,activeTutorial:Je,completedTutorials:Qe,isTutorialActive:Xe,stepData:$e,currentStep:et,isWaitingForSave:tt,onTabCompleted:at}=(0,p.s8)(),rt=(0,n.useRef)(!1),[nt,lt]=(0,n.useState)(!1),[it,st]=(0,n.useState)(0),ot=(0,n.useRef)(null),ct="professional"===(null===ne||void 0===ne?void 0:ne.role);(0,n.useEffect)(()=>{if(_&&ne&&!Ge&&!(null!==Qe&&void 0!==Qe&&Qe.profileTabs)&&"profileTabs"!==Je&&!rt.current&&("dashboard"===Je||U.pathname.includes("/profile"))){const e=setTimeout(()=>{rt.current=!0,Ze("profileTabs")},500);return()=>clearTimeout(e)}},[Ge,Je,Ze,_,ne,Qe,Xe,U.pathname]),(0,n.useEffect)(()=>{if(null!==G&&void 0!==G&&G.profileType&&null!==G&&void 0!==G&&G.role){const e=G.role,t=G.profileType;(async()=>{fe(!0),me(null);try{var r,n,l,i,o,c,d;let u;if("professional"===e)u=await a(6456)("./professionals-".concat(t,".json"));else{if("facility"!==e&&"company"!==e)throw new Error("Unknown role: ".concat(e));u=await a.e(4274).then(a.t.bind(a,4274,19))}me(u.default||u);const m=(0,s.cloneDeep)(G);ie(m),xe.current=m,ae((null===(r=u)||void 0===r||null===(n=r.default)||void 0===n||null===(l=n.tabs)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.id)||(null===(o=u)||void 0===o||null===(c=o.tabs)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.id)||"")}catch(u){console.error("[Profile] Error loading config:",u),M(H("errors.loadingConfig"),"error"),be({_config:H("errors.loadingConfig")})}finally{fe(!1)}})()}},[G,H,M]),(0,n.useEffect)(()=>{(()=>{if(ne){var e;const t=ne.platformSubscriptionPlan||ne.subscriptionTier||(null===(e=ne.subscription)||void 0===e?void 0:e.tier)||"free",a=t&&"free"!==t&&"starter"!==t&&"free"!==t.toLowerCase();je(a?"premium":"free")}else if(G){var t;const e=G.platformSubscriptionPlan||G.subscriptionTier||(null===(t=G.subscription)||void 0===t?void 0:t.tier)||"free",a=e&&"free"!==e&&"starter"!==e&&"free"!==e.toLowerCase();je(a?"premium":"free")}})()},[ne,G]),(0,n.useEffect)(()=>{ne&&_&&!ne._onboardingDocumentsMerged&&(async(e,t,a)=>{if(!e||!a)return console.log("[mergeOnboardingDocuments] Missing formData or currentUser"),0;if(e._onboardingDocumentsMerged)return console.log("[mergeOnboardingDocuments] Already merged"),0;try{var n;const l=(0,A.doc)(S.db,"users",a.uid),i=await(0,A.getDoc)(l);if(!i.exists())return console.warn("[mergeOnboardingDocuments] User document does not exist"),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0;const s=i.data(),o=(null===s||void 0===s?void 0:s.onboardingDocuments)||[];if(0===o.length)return console.log("[mergeOnboardingDocuments] No onboarding documents found"),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0;console.log("[mergeOnboardingDocuments] Found ".concat(o.length," onboarding documents"));const c=(null===(n=e.verification)||void 0===n?void 0:n.verificationDocuments)||[],d=new Set(c.map(e=>e.storagePath||e.storageUrl)),u=o.filter(e=>!d.has(e.storagePath)&&!d.has(e.downloadURL));if(0===u.length)return console.log("[mergeOnboardingDocuments] All onboarding documents already exist in profile"),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0;console.log("[mergeOnboardingDocuments] Merging ".concat(u.length," new documents"));const m=u.map(e=>({documentId:e.uid||"onboarding_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:e.id_type||e.subfolder||"identity",category:e.id_type||e.subfolder||"identity",fileName:e.fileName,originalFileName:e.originalFileName||e.fileName,storageUrl:e.downloadURL,storagePath:e.storagePath,fileSize:e.fileSize,fileType:e.fileType,mimeType:e.fileType,uploadedAt:e.uploadedAt,status:e.verified?"verified":"pending_verification",verificationStatus:e.verified?"verified":"pending",source:"onboarding"}));return t(e=>(0,r.A)((0,r.A)({},e),{},{verification:(0,r.A)((0,r.A)({},e.verification),{},{verificationDocuments:[...c,...m]}),_onboardingDocumentsMerged:!0})),console.log("[mergeOnboardingDocuments] Successfully merged ".concat(m.length," onboarding documents")),m.length}catch(l){return console.error("[mergeOnboardingDocuments] Error:",l),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0}})(ne,ie,_)},[ne,_]),(0,n.useEffect)(()=>{if(!se||!ne||pe||Z)return;const e=U.pathname.split("/"),t=e[e.length-1],a=se.tabs.map(e=>e.id);let r=ee||a[0];t&&a.includes(t)?r=ue(ne,t,se)?t:a.find(e=>ue(ne,e,se))||a[0]:(U.pathname.endsWith("/profile")||U.pathname.endsWith("/profile/"))&&(r=a.find(e=>ue(ne,e,se))||a[0]),r!==ee&&ae(r);const n=U.pathname.substring(U.pathname.lastIndexOf("/")+1);r&&r!==n&&B("/dashboard/profile/".concat(r),{replace:!0})},[U.pathname,se,ne,pe,Z,ee,B]);const dt=(0,n.useCallback)((e,t)=>{ie(a=>{const r=(0,s.cloneDeep)(a);return(0,s.set)(r,e,t),r}),be(t=>{const a=(0,s.cloneDeep)(t);return(0,s.set)(a,e,void 0),a})},[]),ut=(0,n.useCallback)((e,t)=>{ie(a=>(0,r.A)((0,r.A)({},a),{},{[e]:t})),be(t=>{const a=(0,r.A)({},t);return delete a[e],a})},[]),mt=(0,n.useCallback)((e,t)=>(0,s.get)(e,t),[]),pt=(0,n.useCallback)(async e=>{if(e&&e.storageUrl)try{We(!0),M(H("dashboardProfile:documents.analyzing","Analyzing document..."),"info");const t=e.type||(ct?"cv":"businessDocument"),a=e.mimeType||e.fileType||"application/pdf",r=await(0,T.tK)(e.storageUrl,t,e.storagePath,a);if(!r.success||!r.data)throw new Error("Analysis failed or returned no data");Be(r.data),Ve(r.data),qe(!0)}catch(t){console.error("[Profile] Error analyzing document:",t),M(H("dashboardProfile:documents.analysisError","Failed to analyze document"),"error")}finally{We(!1)}},[ct,M,H]),ft=(0,n.useCallback)(()=>{Oe(!1),He(null)},[]),xt=(0,n.useCallback)(async e=>{if(!e||0===e.length||!_)return;if(!Le)return void M(H("dashboardProfile:documents.selectDocumentTypeFirst","Please select a document type first"),"warning");const t=e[0];lt(!0),st(0);try{var a,r;const e=_.uid,l=Le,i=Date.now(),o=t.name.split(".").pop(),c=t.name.substring(0,t.name.lastIndexOf("."))||t.name,d="".concat(c.toLowerCase().replace(/[^a-z0-9]/g,"_"),"_").concat(i,".").concat(o),u=ct?"documents/".concat(e,"/").concat(l,"/").concat(d):"documents/facilities/".concat(e,"/").concat(l,"/").concat(d),m=await(0,C.QM)(t,u,e=>{st(e)}),p={documentId:"".concat(l,"_").concat(Date.now()),userId:e,type:l,category:l,fileName:d,originalFileName:t.name,storageUrl:m,storagePath:u,fileSize:t.size,fileType:t.type||"application/octet-stream",mimeType:t.type||"application/octet-stream",uploadedAt:(new Date).toISOString(),status:"pending_verification"};if(!ne)return;const f=(0,s.cloneDeep)(ne),x=null===se||void 0===se||null===(a=se.fields)||void 0===a||null===(r=a.documentUploads)||void 0===r?void 0:r.find(e=>e.docType===l),g=(null===x||void 0===x?void 0:x.name)||("cv"===l?"cvUrl":"verificationDocumentsProvided");if("cv"===l||"cvUrl"===g)f.documents||(f.documents={}),f.documents.cv||(f.documents.cv=[]),f.documents.cv.push(p);else if(ct){const e=g.includes(".")?g:"documents.".concat(g),t=mt(f,e)||[];(0,s.set)(f,e,[...t,p])}else f.verification||(f.verification={}),f.verification.verificationDocumentsProvided||(f.verification.verificationDocumentsProvided=[]),f.verification.verificationDocumentsProvided.push(p);ie(f);try{await Q(f),console.log("[Profile] Document metadata saved to database"),M(H("dashboardProfile:documents.uploadSuccess","Document uploaded successfully"),"success"),setTimeout(()=>{ft(),pt(p)},500)}catch(n){console.error("[Profile] Error saving document metadata to database:",n),M(H("dashboardProfile:documents.uploadSuccessButSaveError","Document uploaded but failed to save metadata. Please try again."),"warning")}lt(!1),st(0)}catch(l){console.error("[Profile] Error uploading file:",l),lt(!1),st(0),M(H("dashboardProfile:documents.uploadError","Error uploading document"),"error")}},[_,ct,ne,se,Le,M,H,Q,pt,ft,mt]),gt=(0,n.useCallback)(()=>{ot.current&&ot.current.click()},[]),ht=Xe&&"profileTabs"===Je&&0===et&&!tt,vt=(0,n.useCallback)(()=>{ht||(He(null),Oe(!0))},[ht]),bt=(0,n.useCallback)(()=>{Re(!1)},[]),yt=(0,n.useCallback)(e=>{console.log("Selected document:",e),Re(!1),pt(e)},[pt]),jt=(0,n.useCallback)(async()=>{if(Me&&ne)try{he(!0);const e=(0,T.DZ)(ne,Me);ie(e),await Q(e),M(H("dashboardProfile:documents.autoFillSuccess","Profile auto-filled successfully!"),"success"),qe(!1),Be(null)}catch(e){console.error("[Profile] Error applying extracted data:",e),M(H("dashboardProfile:documents.autoFillError","Error updating profile"),"error")}finally{he(!1)}},[Me,ne,Q,M,H]),Nt=(0,n.useCallback)(()=>{jt()},[jt]),wt=(0,n.useCallback)(()=>{qe(!1),Be(null)},[]),Ct=(0,n.useCallback)(function(){let e,t;ne&&("current"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all")?(e=k[ee]||{},t=H("dashboardProfile:common.autofillTabSuccess","Current tab populated with test data (Beta)")):(e=Object.keys(k).reduce((e,t)=>(0,r.A)((0,r.A)({},e),k[t]),{}),t=H("dashboardProfile:common.autofillSuccess","Full profile populated with test data (Beta)")),ie(t=>(0,r.A)((0,r.A)({},t),e)),M(t,"success"))},[ne,ee,H,M]),Tt=(0,n.useMemo)(()=>{if(!ne)return[];return[...mt(ne,"verification.verificationDocuments")||[],...mt(ne,"documents.cv")||[],...mt(ne,"verification.verificationDocumentsProvided")||[]].filter(e=>e&&e.storageUrl)},[ne,mt]),At=(0,n.useMemo)(()=>{var e;if(!se)return[];return((null===(e=se.fields)||void 0===e?void 0:e.documentUploads)||[]).map(e=>{const t=e.labelKey?H("dashboardProfile:".concat(e.labelKey),e.docType):H("dashboardProfile:documents.".concat(e.docType),e.docType);return{value:e.docType,label:t,accept:e.accept||".pdf,.doc,.docx,.jpg,.png"}})},[se,H]),St=(0,n.useMemo)(()=>{var e,t;return Le&&se?null===(e=se.fields)||void 0===e||null===(t=e.documentUploads)||void 0===t?void 0:t.find(e=>e.docType===Le):null},[Le,se]),kt=(0,n.useCallback)(()=>{ze&&(ft(),Be(ze),qe(!0))},[ze,ft]),Dt=(0,n.useCallback)(()=>{if(!se||!ne)return!1;const e=ee,t=se.fields[e];let a=!0;const r={},n=e=>{const{name:t,required:n,dependsOn:l,dependsOnValue:i,dependsOnValueExclude:o,validationRules:c}=e;let d=n,u=!0;if(l){const e=(0,s.get)(ne,l);let t=!0;i&&!i.includes(e)&&(t=!1),o&&o.includes(e)&&(t=!1),t||(d=!1,u=!1)}const m=(0,s.get)(ne,t);if(!d||null!==m&&void 0!==m&&""!==String(m).trim()||(a=!1,(0,s.set)(r,t,H("validation:required")),u=!1),u&&m&&c)if(c.minLength&&String(m).length<c.minLength)a=!1,(0,s.set)(r,t,H("validation:minLength",{count:c.minLength}));else if(c.pattern)try{new RegExp(c.pattern).test(String(m))||(a=!1,(0,s.set)(r,t,H(c.patternErrorKey||"validation:invalidFormat")))}catch(p){}};return Array.isArray(t)?t.forEach(n):"object"===typeof t&&Object.entries(t).forEach(e=>{let[t,n]=e;if(n.required&&n.minItems>0){const e=(0,s.get)(ne,t);(!Array.isArray(e)||e.length<n.minItems)&&(a=!1,(0,s.set)(r,t,H("validation:minItemsRequired",{count:n.minItems})))}}),be(r),a},[ee,ne,se,H]),It=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{navigateToNextTab:t=!1}=e;if(!_||!ne)return M(H("errors.notLoggedIn"),"error"),!1;const a=Dt();if(t&&!a)return M(H("validation:errorFixFieldsBeforeContinuing"),"warning"),!1;he(!0);try{let e=!1;if(a){const t=(0,s.cloneDeep)(ne);e=se.tabs.every(e=>e.id===ee||de(t,e.id,se))}const r=await Q(ne);if(r){if(xe.current=(0,s.cloneDeep)(r),ie((0,s.cloneDeep)(r)),M(H("validation:profileSaved"),"success"),e&&await z(!0),Xe&&"profileTabs"===Je){de(r,ee,se)?(console.log("[Profile] Tab completed:",ee,"- notifying tutorial context"),at(ee,!0)):console.log("[Profile] Tab saved but not complete yet:",ee)}if(t&&a){const e=se.tabs.findIndex(e=>e.id===ee),t=se.tabs[e+1];t&&B("/dashboard/profile/".concat(t.id))}return!0}throw new Error("Profile update failed silently.")}catch(r){return M(r.message||H("validation:errorSavingProfile"),"error"),!1}finally{he(!1)}},[_,ne,Q,Dt,M,H,ee,se,B,z,Xe,Je,at]),Et=(0,n.useCallback)(async()=>{await It({navigateToNextTab:!0})},[It]);(0,n.useEffect)(()=>{const e=null===Y||void 0===Y?void 0:Y.setPageMobileState;if(e&&"function"===typeof e)if(K&&ee&&!Ce){e(!0,()=>{var e,t;ae((null===se||void 0===se||null===(e=se.tabs)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id)||""),Te(!0)})}else e(!1,null)},[K,ee,Ce,se,Y]);const Pt=(0,n.useCallback)(e=>{e!==ee&&(ue(ne,e,se)?Ye?(De(e),Se(!0)):(B("/dashboard/profile/".concat(e)),be({}),K&&Te(!1)):M(H("validation:completePreviousSteps"),"warning"))},[Ye,ee,B,ne,se,M,H,K]),Ot=(0,n.useCallback)(async()=>{Se(!1);const e=await It({navigateToNextTab:!1});B("/dashboard/profile/".concat(ke)),e||$()},[It,ke,B,$]),Ft=(0,n.useCallback)(()=>{Se(!1),De("")},[]),Rt=(0,n.useCallback)(()=>{Ye?Ee(!0):M(H("common:noChangesToCancel"),"info")},[Ye,M,H]),Lt=(0,n.useCallback)(()=>{xe.current&&ie((0,s.cloneDeep)(xe.current)),be({}),Ee(!1),M(H("common:changesDiscarded"),"info")},[M,H]),Ht=(0,n.useCallback)(()=>{Ee(!1)},[]),_t=Z||pe,Wt=(0,n.useMemo)(()=>ce(ne,se),[ne,se]),Mt=(0,n.useMemo)(()=>{if(!se||!ne)return null;const e=se.tabs||[];for(const t of e)if(!de(ne,t.id,se)&&ue(ne,t.id,se))return t.id;return null},[ne,se]);return(0,N.jsxs)("div",{className:(0,j.cn)("h-full flex flex-col overflow-hidden animate-in fade-in duration-500 [&_button]:!text-sm",K&&"overflow-y-hidden"),children:[(0,N.jsx)("div",{className:(0,j.cn)("shrink-0 w-full z-20 bg-card/95 backdrop-blur-sm border-b border-border shadow-sm h-16 flex items-center",K?"px-4":"px-6"),children:(0,N.jsxs)("div",{className:"flex items-center justify-between gap-4 w-full",children:[(0,N.jsxs)("div",{className:(0,j.cn)("flex items-center gap-2 px-3 h-9 rounded-lg border transition-colors","premium"===ye?"bg-primary/10 border-primary/30 text-primary":"bg-muted/30 border-border/50 text-muted-foreground"),children:[(0,N.jsxs)("span",{className:"text-xs font-medium",children:[H("dashboardProfile:subscription.status"),":"]}),(0,N.jsx)("span",{className:"text-sm font-semibold",children:H("premium"===ye?"dashboardProfile:subscription.premium":"dashboardProfile:subscription.free")})]}),(0,N.jsxs)("div",{className:"flex-1 flex justify-center",children:[(0,N.jsx)("div",{className:"relative",ref:Ke,children:(0,N.jsxs)("button",{onClick:vt,disabled:nt||_e||ht,className:(0,j.cn)("h-9 px-4 flex items-center justify-center gap-2 rounded-lg border transition-all shrink-0","bg-background border-border text-muted-foreground hover:text-foreground hover:bg-muted/50",(nt||_e||ht)&&"opacity-50 cursor-not-allowed"),"data-tutorial":"profile-upload-button",children:[_e?(0,N.jsx)(g.A,{size:"sm"}):(0,N.jsx)(o.B88,{className:"w-4 h-4"}),(0,N.jsx)("span",{className:"text-sm font-medium",children:_e?H("dashboardProfile:documents.analyzing","Analyzing..."):H("dashboardProfile:documents.autofill","Auto Fill")})]})}),(0,N.jsx)(b.A,{ref:ot,onChange:xt,isLoading:nt,progress:it,accept:".pdf,.doc,.docx,.jpg,.png",label:"",className:"hidden"})]}),ne&&(0,N.jsxs)("div",{className:"flex items-center gap-3 px-3 h-9 bg-muted/30 rounded-lg border border-border/50",children:[(0,N.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Profile Completion"}),(0,N.jsx)("div",{className:"w-32 h-2.5 bg-muted rounded-full overflow-hidden shadow-inner",children:(0,N.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 transition-all duration-500 rounded-full",style:{width:"".concat(Wt,"%")}})}),(0,N.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:[Wt,"%"]})]})]})}),(0,N.jsx)(v.A,{isOpen:Pe,onClose:ft,title:H("dashboardProfile:documents.autofill","Auto Fill"),size:"medium",actions:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{variant:"secondary",onClick:ft,children:H("common.cancel")}),ze&&(0,N.jsx)(h.A,{variant:"primary",onClick:kt,children:H("personalDetails.useExistingData","Use Existing Data")})]}),children:(0,N.jsxs)("div",{className:"space-y-4",children:[ze&&(0,N.jsx)("div",{className:"p-4 rounded-lg bg-primary/10 border-2 border-primary",children:(0,N.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,N.jsx)(o.FrA,{className:"text-primary",size:18}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsxs)("div",{className:"font-semibold text-sm text-primary flex items-center gap-2",children:[H("personalDetails.useExistingData","Use Existing Data"),(0,N.jsx)("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full",children:H("common.cached","Cached")})]}),(0,N.jsx)("div",{className:"text-xs text-primary/80 mt-1",children:H("personalDetails.recentlyExtractedData","Recently extracted data available")})]})]})}),(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsx)("div",{children:(0,N.jsx)(y.A,{label:H("dashboardProfile:documents.selectDocumentType","Document Type"),options:At,value:Le,onChange:He,placeholder:H("dashboardProfile:documents.selectDocumentTypePlaceholder","Select document type...")})}),(0,N.jsxs)("div",{className:"mt-10",children:[(0,N.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:H("personalDetails.upload","Upload")}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)(b.A,{onChange:xt,isLoading:nt,progress:it,accept:(null===St||void 0===St?void 0:St.accept)||".pdf,.doc,.docx,.jpg,.png",label:"",documentName:H("dashboardProfile:documents.clickToUpload","click to upload"),disabled:!Le}),!nt&&(0,N.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:(0,N.jsx)(o.B88,{className:"text-primary/50",size:24})})]}),!Le&&(0,N.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:H("dashboardProfile:documents.selectDocumentTypeFirst","Please select a document type first")})]})]})]})}),(0,N.jsxs)(v.A,{isOpen:Ue,onClose:wt,title:H("dashboardProfile:documents.autoFillTitle","Auto Fill Profile?"),actions:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{variant:"secondary",onClick:wt,disabled:ge,children:H("common.cancel")}),(0,N.jsx)(h.A,{variant:"primary",onClick:Nt,isLoading:ge,children:H("dashboardProfile:documents.fillEmptyFields","Fill Empty Fields")})]}),children:[(0,N.jsx)("p",{className:"mb-4",children:H("dashboardProfile:documents.autoFillDescription","We have extracted information from your document. This will fill empty fields in your profile (Personal Details, Professional Background, etc.). Existing data will NOT be overwritten. Do you want to proceed?")}),(0,N.jsxs)("div",{className:"p-4 rounded-lg border text-sm bg-primary/5 border-primary/20 text-secondary",children:[(0,N.jsx)("p",{className:"mb-2 font-medium",children:H("dashboardProfile:documents.extractedSummary","Extracted Data Summary:")}),(0,N.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(null===Me||void 0===Me||null===(e=Me.personalDetails)||void 0===e||null===(t=e.identity)||void 0===t?void 0:t.legalFirstName)&&(0,N.jsxs)("li",{children:[H("personalDetails.firstName"),": ",Me.personalDetails.identity.legalFirstName]}),(null===Me||void 0===Me||null===(D=Me.personalDetails)||void 0===D||null===(I=D.identity)||void 0===I?void 0:I.legalLastName)&&(0,N.jsxs)("li",{children:[H("personalDetails.lastName"),": ",Me.personalDetails.identity.legalLastName]}),(null===Me||void 0===Me||null===(E=Me.personalDetails)||void 0===E||null===(P=E.contact)||void 0===P?void 0:P.primaryEmail)&&(0,N.jsxs)("li",{children:[H("personalDetails.email"),": ",Me.personalDetails.contact.primaryEmail]}),(null===Me||void 0===Me||null===(F=Me.professionalBackground)||void 0===F?void 0:F.professionalSummary)&&(0,N.jsxs)("li",{className:"mt-2",children:[(0,N.jsxs)("span",{className:"font-medium",children:[H("professionalBackground.summary","Professional Summary"),":"]}),(0,N.jsxs)("p",{className:"mt-1 italic",children:['"',Me.professionalBackground.professionalSummary,'"']})]}),(null===Me||void 0===Me||null===(R=Me.professionalBackground)||void 0===R||null===(L=R.workExperience)||void 0===L?void 0:L.length)>0&&(0,N.jsxs)("li",{children:[H("professionalBackground.experience"),": ",Me.professionalBackground.workExperience.length," items"]})]})]})]}),(0,N.jsxs)("div",{className:(0,j.cn)("flex-1 flex overflow-hidden min-h-0 relative",K?"p-0":"p-4 gap-4"),children:[(0,N.jsx)("div",{className:(0,j.cn)("flex flex-col transition-all duration-300 shrink-0",K?(0,j.cn)("absolute inset-0 z-10 bg-background overflow-y-auto",Ce?"translate-x-0":"-translate-x-full"):(0,j.cn)(Ne?"w-[70px]":"w-full md:w-[320px] lg:w-[360px]","overflow-hidden")),children:se&&ne&&(0,N.jsx)(w,{profile:ne,config:se,activeTab:ee,onTabChange:Pt,isTabCompleted:e=>de(ne,e,se),isTabAccessible:(e,t,a)=>ue(e,t,a),nextIncompleteSection:Mt,highlightTabId:(null===$e||void 0===$e?void 0:$e.highlightTab)||Mt,collapsed:Ne,onToggle:()=>we(!Ne),onAutofill:Ct})}),(0,N.jsx)("div",{className:(0,j.cn)("flex-1 flex flex-col bg-transparent relative min-w-0 min-h-0 transition-all duration-300 custom-scrollbar",K&&!Ce?"translate-x-0 overflow-y-auto":K?"translate-x-full absolute inset-0 z-20 overflow-y-auto":"overflow-y-auto"),style:{scrollbarGutter:"stable"},children:(()=>{if(_t&&!ne)return(0,N.jsx)(g.A,{});if(J)return(0,N.jsxs)("div",{className:"p-8 text-center text-red-500",children:[H("errors.loadingProfile"),": ",J.message]});if(!se&&!_t&&G)return(0,N.jsx)("div",{className:"p-8 text-center text-red-500",children:H("errors.loadingConfig")});return G&&G.role&&!["professional","facility","company"].includes(G.role)?(0,N.jsx)("div",{className:"p-8 text-center text-red-500",children:H("errors.accessDenied")}):null})()||(0,N.jsx)("div",{className:"flex-1",children:(0,N.jsx)("div",{className:"w-full",children:(0,N.jsx)("div",{className:"animate-in slide-in-from-bottom-2 duration-500",children:(()=>{if(!se||!ne||!ee)return null;const e={formData:ne,config:se,errors:ve,isSubmitting:ge,onInputChange:dt,onArrayChange:ut,onSaveAndContinue:Et,onCancel:Rt,getNestedValue:mt},t="facility"===ne.role||"company"===ne.role;switch(ee){case"personalDetails":return(0,N.jsx)(O,(0,r.A)((0,r.A)({},e),{},{onTriggerUpload:gt}));case"professionalBackground":return(0,N.jsx)(W,(0,r.A)({},e));case"billingInformation":return(0,N.jsx)(q,(0,r.A)({},e));case"documentUploads":return(0,N.jsx)(V,(0,r.A)({},e));case"facilityCoreDetails":case"facilityLegalBilling":return(0,N.jsx)(re,(0,r.A)({activeTab:ee},e));case"facilityDocuments":return(0,N.jsx)(le,(0,r.A)({},e));case"settings":return t?(0,N.jsx)(oe,(0,r.A)({},e)):(0,N.jsx)(te,(0,r.A)({},e));default:return(0,N.jsx)("div",{children:H("common.selectTab")})}})()})})})})]}),Fe&&(0,N.jsx)(v.A,{isOpen:Fe,onClose:bt,title:H("personalDetails.selectDocument","Select Document"),size:"small",children:(0,N.jsxs)("div",{className:"space-y-4",children:[0===Tt.length?(0,N.jsxs)("div",{className:"text-center py-12 animate-in fade-in duration-500",children:[(0,N.jsx)("div",{className:"mx-auto w-20 h-20 rounded-full bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center mb-6 shadow-lg shadow-primary/15",children:(0,N.jsx)(o.jH2,{className:"text-primary/60",size:36})}),(0,N.jsx)("p",{className:"text-muted-foreground text-base",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:H("personalDetails.noDocumentsAvailable","No documents available. Please upload a document first.")})]}):(0,N.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:Tt.map((e,t)=>(0,N.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 border border-border rounded-lg hover:bg-muted/30 transition-colors cursor-pointer",onClick:()=>yt(e),children:[(0,N.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,N.jsx)("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:(0,N.jsx)(o.jH2,{size:20})}),(0,N.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,N.jsx)("div",{className:"font-semibold text-sm truncate mb-1",style:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:e.originalFileName||e.fileName||"Document ".concat(t+1)}),(0,N.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:[e.type&&(0,N.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary font-medium",children:H("dashboardProfile:documents.".concat(e.type),e.type)}),e.uploadedAt&&(0,N.jsxs)("span",{children:["\u2022 ",new Date(e.uploadedAt).toLocaleDateString()]})]})]})]}),(0,N.jsx)("div",{className:"shrink-0"})]},t))}),(0,N.jsx)("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:(0,N.jsx)(h.A,{variant:"secondary",onClick:bt,children:H("common.cancel")})})]})}),(0,N.jsx)(v.A,{isOpen:Ae,onClose:Ft,title:H("validation:confirmTabChangeTitle"),actions:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{onClick:Ft,variant:"secondary",children:H("common:cancel")}),(0,N.jsx)(h.A,{onClick:Ot,variant:"confirmation",children:H("common:saveAndContinue")})]}),children:(0,N.jsx)("p",{children:H("validation:unsavedChangesWarningNavigate")})}),(0,N.jsx)(v.A,{isOpen:Ie,onClose:Ht,title:H("validation:confirmCancelTitle"),messageType:"warning",actions:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{onClick:Ht,variant:"secondary",children:H("common:no")}),(0,N.jsx)(h.A,{onClick:Lt,variant:"warning",children:H("common:yesDiscard")})]}),children:(0,N.jsx)("p",{children:H("validation:discardChangesWarning")})})]})}},6456(e,t,a){var r={"./professionals-doctor.json":[1038,1038],"./professionals-pharmacist.json":[5555,5555]};function n(e){if(!a.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],n=t[0];return a.e(t[1]).then(()=>a.t(n,19))}n.keys=()=>Object.keys(r),n.id=6456,e.exports=n},9832(e,t,a){"use strict";a.d(t,{n:()=>n});var r=a(2483);const n=()=>{const[e,t]=(0,r.useState)(()=>"undefined"!==typeof window&&window.innerWidth<768);return(0,r.useEffect)(()=>{const e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}}}]);
//# sourceMappingURL=6052.a64eccda.chunk.js.map