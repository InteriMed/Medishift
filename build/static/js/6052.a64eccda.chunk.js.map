{"version":3,"file":"static/js/6052.a64eccda.chunk.js","mappings":"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","sources":["dashboard/pages/profile/components/ProfileHeader.js","dashboard/utils/mergeOnboardingDocuments.js","dashboard/pages/profile/utils/mockProfileData.js","dashboard/pages/profile/professionals/components/PersonalDetails.js","dashboard/pages/profile/utils/professionalBackgroundUtils.js","components/BoxedInputFields/CheckboxField.js","components/BoxedInputFields/Switch.js","dashboard/pages/profile/professionals/components/ProfessionalBackground.js","dashboard/pages/profile/professionals/components/BillingInformation.js","dashboard/pages/profile/professionals/components/DocumentUploads.js","services/accountManagementService.js","dashboard/pages/profile/components/AccountDeletion.js","dashboard/pages/profile/professionals/components/Settings.js","dashboard/pages/profile/facilities/components/FacilityDetails.js","dashboard/pages/profile/facilities/components/DocumentUploads.js","dashboard/pages/profile/facilities/components/Settings.js","dashboard/pages/profile/Profile.js","dashboard/pages/profile/professionals/configs|lazy|/^/.//professionals/-.*/.json$/|groupOptions: {}|namespace object","dashboard/hooks/useMobileView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { useMobileView } from '../../../hooks/useMobileView';\nimport { cn } from '../../../../utils/cn';\nimport {\n  FiUser,\n  FiBriefcase,\n  FiCreditCard,\n  FiFileText,\n  FiSettings,\n  FiCheckCircle,\n  FiCircle,\n  FiChevronLeft,\n  FiChevronRight,\n  FiZap\n} from 'react-icons/fi';\nimport { useTutorial } from '../../../contexts/TutorialContext';\n\nconst ProfileHeader = ({\n  profile,\n  config,\n  activeTab,\n  onTabChange,\n  isTabCompleted,\n  isTabAccessible,\n  nextIncompleteSection,\n  highlightTabId,\n  collapsed = false,\n  onToggle,\n  onAutofill\n}) => {\n  const [showMenu, setShowMenu] = useState(false);\n  const isMobile = useMobileView();\n  const { t } = useTranslation(['dashboardProfile', 'tabs']);\n  const { isTutorialActive, stepData } = useTutorial();\n\n  const isAutofillHighlighted = isTutorialActive && stepData?.highlightUploadButton;\n\n  const tabs = config?.tabs || [];\n\n  const handleTabClick = (tabId) => {\n    if (isTabAccessible(profile, tabId, config)) {\n      onTabChange(tabId);\n    }\n  };\n\n  const getIconForTab = (tabId) => {\n    switch (tabId) {\n      case 'personalDetails':\n        return <FiUser className=\"w-5 h-5 shrink-0\" />;\n      case 'professionalBackground':\n        return <FiBriefcase className=\"w-5 h-5 shrink-0\" />;\n      case 'billingInformation':\n        return <FiCreditCard className=\"w-5 h-5 shrink-0\" />;\n      case 'documentUploads':\n        return <FiFileText className=\"w-5 h-5 shrink-0\" />;\n      case 'settings':\n        return <FiSettings className=\"w-5 h-5 shrink-0\" />;\n      default:\n        return <FiUser className=\"w-5 h-5 shrink-0\" />;\n    }\n  };\n\n  return (\n    <div className={cn(\n      \"w-full h-fit bg-card rounded-xl border border-border/60 transition-all duration-300 ease-in-out overflow-x-hidden\",\n      collapsed ? \"p-2\" : \"p-4\"\n    )}>\n      {onToggle && !isMobile && (\n        <div className={cn(\n          \"border-b border-border mb-3\",\n          collapsed ? \"px-1 pb-2\" : \"px-1 pb-3\"\n        )}>\n          <button\n            onClick={onToggle}\n            className={cn(\n              \"w-full h-10 rounded-md hover:bg-muted/50 text-muted-foreground/70 transition-colors flex items-center gap-2\",\n              collapsed ? \"justify-center px-2\" : \"justify-start px-2\"\n            )}\n            title={collapsed ? \"Expand\" : \"Collapse\"}\n          >\n            {collapsed ? (\n              <FiChevronRight size={18} />\n            ) : (\n              <>\n                <FiChevronLeft size={18} />\n                <span className=\"text-sm font-medium\">Collapse</span>\n              </>\n            )}\n          </button>\n        </div>\n      )}\n\n      <nav className={cn(\"flex flex-col\", \"gap-3\")}>\n        {tabs.map((tab) => {\n          const isActive = activeTab === tab.id;\n          const isCompleted = isTabCompleted(profile, tab.id, config);\n          const isAccessible = isTabAccessible(profile, tab.id, config);\n          const isHighlighted = highlightTabId === tab.id && !isCompleted;\n\n          if (!isAccessible) {\n            return (\n              <div\n                key={tab.id}\n                data-tab={tab.id}\n                data-tutorial-disabled=\"true\"\n                className={cn(\n                  \"group relative flex gap-3 rounded-lg border min-w-0 transition-all duration-200 outline-none\",\n                  collapsed ? \"p-2 justify-center\" : \"p-3\",\n                  \"text-muted-foreground/40 cursor-not-allowed pointer-events-none select-none\",\n                  \"border-transparent\"\n                )}\n                style={{ pointerEvents: 'none', userSelect: 'none' }}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  e.nativeEvent && e.nativeEvent.stopImmediatePropagation && e.nativeEvent.stopImmediatePropagation();\n                  console.log(`[ProfileHeader] Click prevented on ${tab.id} - tab is locked (rendered as div)`);\n                  return false;\n                }}\n              >\n                <div className={cn(\n                  \"w-1.5 h-full absolute left-0 top-0 bottom-0 rounded-l-lg\"\n                )} />\n                <div className={cn(\n                  \"w-full flex items-center justify-between min-w-0\",\n                  collapsed ? \"justify-center pl-0\" : \"pl-2\"\n                )}>\n                  <div className={cn(\n                    \"flex items-center min-w-0\",\n                    collapsed ? \"justify-center\" : \"gap-3\"\n                  )}>\n                    <div className={cn(\n                      \"shrink-0\",\n                      \"bg-muted/10 text-muted-foreground/40\"\n                    )}>\n                      {getIconForTab(tab.id)}\n                    </div>\n                    {!collapsed && (\n                      <span className={cn(\n                        \"text-sm font-medium truncate\",\n                        \"text-muted-foreground/40\"\n                      )}>\n                        {t(tab.labelKey, tab.id)}\n                      </span>\n                    )}\n                  </div>\n                  {!collapsed && (\n                    <div className=\"ml-2 shrink-0\">\n                      <FiCircle className=\"w-4 h-4 text-muted-foreground/20\" />\n                    </div>\n                  )}\n                </div>\n                {collapsed && (\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap border border-border\">\n                    {t(tab.labelKey, tab.id)} (Locked)\n                  </div>\n                )}\n              </div>\n            );\n          }\n\n          return (\n            <button\n              key={tab.id}\n              data-tab={tab.id}\n              onClick={() => handleTabClick(tab.id)}\n              className={cn(\n                \"group relative flex gap-3 rounded-lg hover:bg-muted/50 transition-all cursor-pointer border min-w-0\",\n                collapsed ? \"p-2 justify-center\" : \"p-3\",\n                isActive && \"bg-primary/5 border-primary/10\",\n                isHighlighted && \"border-primary/30 bg-primary/10 ring-2 ring-primary/20\",\n                !isActive && !isHighlighted && \"border-transparent\"\n              )}\n            >\n              <div className={cn(\n                \"w-1.5 h-full absolute left-0 top-0 bottom-0 rounded-l-lg\",\n                isActive && \"bg-primary\"\n              )} />\n              <div className={cn(\n                \"w-full flex items-center justify-between min-w-0\",\n                collapsed ? \"justify-center pl-0\" : \"pl-2\"\n              )}>\n                <div className={cn(\n                  \"flex items-center min-w-0\",\n                  collapsed ? \"justify-center\" : \"gap-3\"\n                )}>\n                  <div className={cn(\n                    \"transition-colors shrink-0\",\n                    isActive ? \"text-primary\" : \"text-muted-foreground group-hover:text-foreground\"\n                  )}>\n                    {getIconForTab(tab.id)}\n                  </div>\n                  {!collapsed && (\n                    <span className={cn(\n                      \"text-sm font-medium truncate\",\n                      isActive ? \"text-foreground\" : \"text-muted-foreground group-hover:text-foreground\"\n                    )}>\n                      {t(tab.labelKey, tab.id)}\n                    </span>\n                  )}\n                </div>\n                {!collapsed && (\n                  <div className=\"ml-2 shrink-0\">\n                    {isCompleted ? (\n                      <FiCheckCircle className=\"w-4 h-4 text-green-500/80\" />\n                    ) : (\n                      <FiCircle className={cn(\n                        \"w-4 h-4\",\n                        isActive ? \"text-primary/40\" : \"text-muted-foreground/20\"\n                      )} />\n                    )}\n                  </div>\n                )}\n              </div>\n              {collapsed && (\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap border border-border\">\n                  {t(tab.labelKey, tab.id)}\n                  {isCompleted && (\n                    <span className=\"ml-1 text-green-500\"></span>\n                  )}\n                </div>\n              )}\n            </button>\n          );\n        })}\n\n        {onAutofill && (\n          <div className=\"mt-4 pt-4 border-t border-border relative\">\n            {showMenu && (\n              <div className={cn(\n                \"absolute bottom-full left-0 w-full mb-2 bg-popover border border-border rounded-lg shadow-xl z-50 overflow-hidden animate-in slide-in-from-bottom-2 duration-200\",\n                collapsed && \"left-full ml-2 w-48 bottom-0 mb-0\"\n              )}>\n                <button\n                  onClick={() => {\n                    onAutofill('current');\n                    setShowMenu(false);\n                  }}\n                  className=\"w-full text-left px-4 py-2.5 text-xs font-semibold hover:bg-muted transition-colors flex items-center gap-2 border-b border-border\"\n                >\n                  <FiZap className=\"w-3.5 h-3.5 text-amber-500\" />\n                  Fill Current Tab\n                </button>\n                <button\n                  onClick={() => {\n                    onAutofill('all');\n                    setShowMenu(false);\n                  }}\n                  className=\"w-full text-left px-4 py-2.5 text-xs font-bold hover:bg-muted transition-colors flex items-center gap-2 text-amber-600\"\n                >\n                  <FiZap className=\"w-3.5 h-3.5\" />\n                  Fill All (Complete)\n                </button>\n              </div>\n            )}\n            <button\n              onClick={() => setShowMenu(!showMenu)}\n              data-tutorial=\"profile-upload-button\"\n              className={cn(\n                \"w-full flex items-center gap-3 p-3 rounded-lg transition-all relative overflow-hidden\",\n                \"bg-amber-500/10 hover:bg-amber-500/20 text-amber-600 border border-amber-500/20\",\n                collapsed ? \"justify-center px-2\" : \"px-3\",\n                showMenu && \"bg-amber-500/20 ring-2 ring-amber-500/30\",\n                isAutofillHighlighted && \"ring-2 ring-amber-500/40 border-amber-500/40\"\n              )}\n              title=\"Beta: Autofill Options\"\n            >\n              {isAutofillHighlighted && (\n                <div className=\"absolute inset-0 pointer-events-none animate-pulse bg-amber-500/10\" />\n              )}\n              <FiZap className=\"w-5 h-5 shrink-0\" />\n              {!collapsed && <span className=\"text-sm font-bold uppercase tracking-wider\">(Beta) Fill</span>}\n            </button>\n          </div>\n        )}\n      </nav>\n    </div>\n  );\n};\n\nProfileHeader.propTypes = {\n  profile: PropTypes.object.isRequired,\n  config: PropTypes.shape({\n    tabs: PropTypes.array\n  }).isRequired,\n  activeTab: PropTypes.string.isRequired,\n  onTabChange: PropTypes.func.isRequired,\n  isTabCompleted: PropTypes.func.isRequired,\n  isTabAccessible: PropTypes.func.isRequired,\n  nextIncompleteSection: PropTypes.string,\n  highlightTabId: PropTypes.string,\n  collapsed: PropTypes.bool,\n  onToggle: PropTypes.func,\n  onAutofill: PropTypes.func\n};\n\nexport default ProfileHeader;","import { doc, getDoc } from 'firebase/firestore';\r\nimport { db } from '../../services/firebase';\r\n\r\n/**\r\n * Merge onboarding documents into profile verification documents\r\n * Loads documents uploaded during onboarding (step 4) and adds them to the profile's verification documents array\r\n * Prevents duplicates by checking storagePath\r\n * \r\n * @param {Object} formData - Current profile form data\r\n * @param {function} setFormData - State setter for formData\r\n * @param {Object} currentUser - Current authenticated user\r\n * @returns {Promise<number>} - Number of documents merged\r\n */\r\nexport const mergeOnboardingDocuments = async (formData, setFormData, currentUser) => {\r\n    if (!formData || !currentUser) {\r\n        console.log('[mergeOnboardingDocuments] Missing formData or currentUser');\r\n        return 0;\r\n    }\r\n\r\n    // Check if we've already merged (to prevent re-merging on every render)\r\n    if (formData._onboardingDocumentsMerged) {\r\n        console.log('[mergeOnboardingDocuments] Already merged');\r\n        return 0;\r\n    }\r\n\r\n    try {\r\n        const userDocRef = doc(db, 'users', currentUser.uid);\r\n        const userDoc = await getDoc(userDocRef);\r\n\r\n        if (!userDoc.exists()) {\r\n            console.warn('[mergeOnboardingDocuments] User document does not exist');\r\n            setFormData(prev => ({ ...prev, _onboardingDocumentsMerged: true }));\r\n            return 0;\r\n        }\r\n\r\n        const userData = userDoc.data();\r\n        const onboardingDocs = userData?.onboardingDocuments || [];\r\n\r\n        if (onboardingDocs.length === 0) {\r\n            console.log('[mergeOnboardingDocuments] No onboarding documents found');\r\n            setFormData(prev => ({ ...prev, _onboardingDocumentsMerged: true }));\r\n            return 0;\r\n        }\r\n\r\n        console.log(`[mergeOnboardingDocuments] Found ${onboardingDocs.length} onboarding documents`);\r\n\r\n        const existingDocs = formData.verification?.verificationDocuments || [];\r\n\r\n        // Create a Set of existing storage paths to avoid duplicates\r\n        const existingPaths = new Set(existingDocs.map(d => d.storagePath || d.storageUrl));\r\n\r\n        // Filter out documents that already exist (by storagePath or downloadURL)\r\n        const newDocs = onboardingDocs.filter(doc =>\r\n            !existingPaths.has(doc.storagePath) && !existingPaths.has(doc.downloadURL)\r\n        );\r\n\r\n        if (newDocs.length === 0) {\r\n            console.log('[mergeOnboardingDocuments] All onboarding documents already exist in profile');\r\n            setFormData(prev => ({ ...prev, _onboardingDocumentsMerged: true }));\r\n            return 0;\r\n        }\r\n\r\n        console.log(`[mergeOnboardingDocuments] Merging ${newDocs.length} new documents`);\r\n\r\n        // Convert onboarding document format to verification document format\r\n        const convertedDocs = newDocs.map(doc => ({\r\n            documentId: doc.uid || `onboarding_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n            type: doc.id_type || doc.subfolder || 'identity',\r\n            category: doc.id_type || doc.subfolder || 'identity',\r\n            fileName: doc.fileName,\r\n            originalFileName: doc.originalFileName || doc.fileName,\r\n            storageUrl: doc.downloadURL,\r\n            storagePath: doc.storagePath,\r\n            fileSize: doc.fileSize,\r\n            fileType: doc.fileType,\r\n            mimeType: doc.fileType,\r\n            uploadedAt: doc.uploadedAt,\r\n            status: doc.verified ? 'verified' : 'pending_verification',\r\n            verificationStatus: doc.verified ? 'verified' : 'pending',\r\n            source: 'onboarding' // Mark as from onboarding for reference\r\n        }));\r\n\r\n        // Update formData with merged documents\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            verification: {\r\n                ...prev.verification,\r\n                verificationDocuments: [...existingDocs, ...convertedDocs]\r\n            },\r\n            _onboardingDocumentsMerged: true // Flag to prevent re-merging\r\n        }));\r\n\r\n        console.log(`[mergeOnboardingDocuments] Successfully merged ${convertedDocs.length} onboarding documents`);\r\n        return convertedDocs.length;\r\n\r\n    } catch (error) {\r\n        console.error('[mergeOnboardingDocuments] Error:', error);\r\n        // Still mark as attempted to prevent infinite retries\r\n        setFormData(prev => ({ ...prev, _onboardingDocumentsMerged: true }));\r\n        return 0;\r\n    }\r\n};\r\n","/**\r\n * Mock data for professional profile tabs.\r\n * Used for testing and development purposes.\r\n */\r\n\r\nexport const mockProfileData = {\r\n    personalDetails: {\r\n        identity: {\r\n            legalFirstName: 'Jean',\r\n            legalLastName: 'Dupont',\r\n            dateOfBirth: '1985-06-15',\r\n            nationality: 'CH',\r\n            ahvNumber: '756.1234.5678.90'\r\n        },\r\n        contact: {\r\n            residentialAddress: {\r\n                street: 'Rue de la Gare',\r\n                number: '42',\r\n                postalCode: '1003',\r\n                city: 'Lausanne',\r\n                canton: 'VD',\r\n                country: 'CH'\r\n            },\r\n            primaryPhonePrefix: '+41',\r\n            primaryPhone: '79 123 45 67',\r\n            primaryEmail: 'jean.dupont@example.com'\r\n        }\r\n    },\r\n\r\n    professionalBackground: {\r\n        education: [\r\n            {\r\n                degree: 'doctorate',\r\n                institution: 'Universit de Lausanne',\r\n                field: 'Medicine',\r\n                startDate: '2003-09-01',\r\n                endDate: '2009-06-30',\r\n                currentlyStudying: false,\r\n                gpa: '5.5',\r\n                honors: 'Magna Cum Laude'\r\n            }\r\n        ],\r\n        workExperience: [\r\n            {\r\n                jobTitle: 'Chief Medical Officer',\r\n                employer: 'Hpital Universitaire de Genve',\r\n                location: 'Geneva, Switzerland',\r\n                startDate: '2015-03-01',\r\n                current: true,\r\n                description: 'Leading a team of 25 physicians in the emergency department.'\r\n            },\r\n            {\r\n                jobTitle: 'Senior Resident',\r\n                employer: 'Centre Hospitalier Universitaire Vaudois',\r\n                location: 'Lausanne, Switzerland',\r\n                startDate: '2010-07-01',\r\n                endDate: '2015-02-28',\r\n                current: false,\r\n                description: 'Internal medicine and emergency care.'\r\n            }\r\n        ],\r\n        qualifications: [\r\n            {\r\n                type: 'medical_license',\r\n                title: 'FMH Specialist in Internal Medicine',\r\n                institution: 'Swiss Medical Association (FMH)',\r\n                licenseNumber: 'FMH-123456',\r\n                dateObtained: '2012-06-15',\r\n                validForLife: true,\r\n                isVerified: true\r\n            }\r\n        ]\r\n    },\r\n\r\n    billingInformation: {\r\n        employmentEligibility: {\r\n            workPermit: {\r\n                type: 'swiss_citizen',\r\n                expiryDate: null,\r\n                permitNumber: '',\r\n                issuingCanton: ''\r\n            }\r\n        },\r\n        payrollData: {\r\n            numberOfChildren: 2,\r\n            civilStatus: 'married',\r\n            withholdingTaxInfo: {\r\n                isSubject: false,\r\n                taxCanton: ''\r\n            },\r\n            religion: 'none'\r\n        },\r\n        banking: {\r\n            iban: 'CH9300762011623852957',\r\n            bankName: 'UBS Switzerland AG',\r\n            accountHolderName: 'Jean Dupont'\r\n        }\r\n    },\r\n\r\n    settings: {\r\n        platformSettings: {\r\n            detailedAvailability: {\r\n                availabilityType: ['full_time', 'on_call'],\r\n                maxHoursPerWeek: 42,\r\n                noticePeriodShortTerm: '24h',\r\n                onCallPreferences: ['weekends', 'holidays'],\r\n                longTermContractEarliestStartDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n                notes: 'Available for emergency coverage on short notice.'\r\n            },\r\n            defaultMarketplaceRadius: 50,\r\n            contractAutoApproval: {\r\n                enabled: true,\r\n                minimumHoursInAdvance: 48\r\n            }\r\n        },\r\n        isActiveOnMarketplace: true,\r\n        notificationPreferences: {\r\n            email: true,\r\n            push: true,\r\n            sms: false,\r\n            marketplaceUpdates: true,\r\n            scheduleChanges: true,\r\n            contractUpdates: true\r\n        }\r\n    },\r\n\r\n    facilityCoreDetails: {\r\n        facilityName: 'Pharmacie de la Navigation',\r\n        facilityType: 'community_pharmacy',\r\n        address: {\r\n            street: 'Rue de la Navigation',\r\n            number: '12',\r\n            postalCode: '1201',\r\n            city: 'Genve',\r\n            canton: 'GE',\r\n            country: 'CH'\r\n        },\r\n        mainPhoneNumber: '+41 22 732 25 25',\r\n        mainEmail: 'info@pharmacie-navigation.ch',\r\n        website: 'https://pharmacie-navigation.ch'\r\n    },\r\n\r\n    facilityLegalBilling: {\r\n        legalEntityName: 'Pharmacie de la Navigation SA',\r\n        uidNumber: 'CHE-123.456.789 MWST',\r\n        commercialRegisterNumber: 'CH-660.1.234.567-8',\r\n        legalRepresentative: {\r\n            firstName: 'Marc',\r\n            lastName: 'Mller',\r\n            email: 'marc.mueller@pharmacie-navigation.ch',\r\n            phone: '+41 78 987 65 43'\r\n        },\r\n        billingContact: {\r\n            name: 'Comptabilit',\r\n            email: 'compta@pharmacie-navigation.ch',\r\n            phone: '+41 22 732 25 26'\r\n        },\r\n        facilityIBAN: 'CH12 0000 0000 0000 0000 0',\r\n        facilityBankName: 'BCGE Genve'\r\n    }\r\n};\r\n\r\n/**\r\n * Gets mock data for a specific tab.\r\n * @param {string} tabId - The tab identifier\r\n * @returns {object} Mock data for the specified tab\r\n */\r\nexport const getMockDataForTab = (tabId) => {\r\n    return mockProfileData[tabId] || {};\r\n};\r\n\r\n/**\r\n * Gets all mock data combined.\r\n * @returns {object} Complete mock profile data\r\n */\r\nexport const getAllMockData = () => {\r\n    return Object.keys(mockProfileData).reduce((acc, key) => {\r\n        return { ...acc, ...mockProfileData[key] };\r\n    }, {});\r\n};\r\n\r\nexport default mockProfileData;\r\n","import React, { useMemo, useCallback, useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../../../../contexts/AuthContext';\nimport useProfileData from '../../../../hooks/useProfileData';\nimport { useDropdownOptions } from '../../utils/DropdownListsImports';\nimport { FiUser, FiMapPin, FiPhone, FiInfo, FiFileText } from 'react-icons/fi';\n\n// --- Import Base Components ---\nimport InputField from '../../../../../components/BoxedInputFields/Personnalized-InputField';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport TextareaField from '../../../../../components/BoxedInputFields/TextareaField';\nimport Button from '../../../../../components/BoxedInputFields/Button';\n\n// --- \nconst DEFAULT_BIO = \"A recent graduate with a Master's degree in Pharmaceutical Sciences from ETH Zurich, specializing in research and immunology. William Abhamon possesses extensive hands-on experience in cutting-edge pharmaceutical research, including developing antibody fragments, investigating receptor aggregation, and studying protein-RNA interactions. Complementing his strong scientific background, he brings practical pharmacy experience, leadership skills from student associations, and proficiency in advanced scientific software and programming languages.\";\n\n// Tailwind styles\nconst styles = {\n  sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n  headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n  sectionTitle: \"text-2xl font-semibold mb-0\",\n  sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n  subtitleRow: \"flex items-end justify-between gap-4\",\n  mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n  mandatoryMark: \"text-destructive\",\n  sectionsWrapper: \"personal-details-sections-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto\",\n  leftColumn: \"flex flex-col gap-6 flex-1\",\n  rightColumn: \"flex flex-col gap-6 flex-1\",\n  sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n  cardHeader: \"flex items-center gap-4 mb-0\",\n  cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n  cardTitle: \"flex-1\",\n  cardTitleH3: \"m-0\",\n  cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  grid: \"grid grid-cols-1 gap-6\",\n  gridSingle: \"grid grid-cols-1 gap-6\",\n  fieldWrapper: \"space-y-2\",\n  fullWidth: \"md:col-span-2\",\n  formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\"\n};\n\nconst PersonalDetails = ({\n  formData,\n  config,\n  errors,\n  isSubmitting,\n  onInputChange,\n  onSaveAndContinue,\n  onCancel,\n  getNestedValue,\n  onTriggerUpload,\n  onStepGuideVisibilityChange,\n}) => {\n  const { t } = useTranslation(['dashboardProfile', 'dropdowns', 'common', 'validation']);\n  const { currentUser } = useAuth();\n  const { uploadImageAndRetrieveURL } = useProfileData();\n  const [isUploadingPicture, setIsUploadingPicture] = useState(false);\n  const [pictureError, setPictureError] = useState('');\n  const fileInputRef = useRef(null);\n  const [showStepGuide] = useState(true);\n\n  useEffect(() => {\n    if (onStepGuideVisibilityChange) {\n      onStepGuideVisibilityChange(showStepGuide);\n    }\n  }, [showStepGuide, onStepGuideVisibilityChange]);\n\n  const {\n    countryOptions,\n    cantonOptions,\n    residencyPermitOptions,\n    availabilityStatusOptions,\n    contractTypeOptions,\n    educationLevelOptions,\n    phonePrefixOptions\n  } = useDropdownOptions();\n\n  // Helper to get dropdown options\n  const getDropdownOptions = useCallback((optionsKey) => {\n    switch (optionsKey) {\n      case 'countries': return countryOptions;\n      case 'cantons': return cantonOptions;\n      case 'workPermits': return residencyPermitOptions;\n      case 'availability': return availabilityStatusOptions;\n      case 'contractTypes': return contractTypeOptions;\n      case 'education': return educationLevelOptions;\n      case 'phonePrefixes': return phonePrefixOptions;\n      default: return [];\n    }\n  }, [countryOptions, cantonOptions, residencyPermitOptions, availabilityStatusOptions, contractTypeOptions, educationLevelOptions, phonePrefixOptions]);\n\n  // Group fields by their 'group' property\n  const groupedFields = useMemo(() => {\n    const fields = config?.fields?.personalDetails || [];\n    const groups = {};\n\n    // Define the order of groups (optional, but good for consistency)\n    const order = ['identity', 'address', 'contact'];\n\n    fields.forEach(field => {\n      const groupKey = field.group || 'other';\n      if (!groups[groupKey]) {\n        groups[groupKey] = [];\n      }\n      groups[groupKey].push(field);\n    });\n\n    // Sort keys based on defined order, appending any others at the end\n    const sortedKeys = Object.keys(groups).sort((a, b) => {\n      const indexA = order.indexOf(a);\n      const indexB = order.indexOf(b);\n      if (indexA !== -1 && indexB !== -1) return indexA - indexB;\n      if (indexA !== -1) return -1;\n      if (indexB !== -1) return 1;\n      return a.localeCompare(b);\n    });\n\n    return sortedKeys.map(key => ({\n      key: key,\n      fields: groups[key]\n    }));\n  }, [config]);\n\n  const handleCancel = useCallback(() => {\n    if (onCancel) onCancel();\n    else window.location.reload();\n  }, [onCancel]);\n\n  const handleProfilePictureChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const fileSizeInMB = file.size / (1024 * 1024);\n    if (fileSizeInMB > 2) {\n      setPictureError(t('accountBasics.errors.fileTooLarge'));\n      return;\n    }\n\n    if (!file.type.startsWith('image/')) {\n      setPictureError(t('accountBasics.errors.invalidFileType'));\n      return;\n    }\n\n    setIsUploadingPicture(true);\n    setPictureError('');\n\n    try {\n      const reader = new FileReader();\n      reader.onload = async (event) => {\n        const photoURL = await uploadImageAndRetrieveURL(currentUser.uid, event.target.result);\n        onInputChange('profilePicture', photoURL);\n        setIsUploadingPicture(false);\n      };\n      reader.readAsDataURL(file);\n    } catch (error) {\n      console.error('Error uploading profile picture:', error);\n      setPictureError(t('accountBasics.errors.uploadFailed'));\n      setIsUploadingPicture(false);\n    }\n  };\n\n  const displayProfile = formData || currentUser || {};\n  const profilePicture = getNestedValue(formData, 'profilePicture') || formData?.profilePicture || currentUser?.photoURL;\n\n  const renderField = (fieldConfig, groupKey) => {\n    const { name, type, required, labelKey, optionsKey, placeholder } = fieldConfig;\n    const label = t(labelKey, name);\n    const value = getNestedValue(formData, name);\n    const error = getNestedValue(errors, name);\n    const fieldKey = name;\n\n    const commonProps = {\n      label: label,\n      error: error,\n      required: required,\n      wrapperClassName: styles.fieldWrapper\n    };\n\n    if (type === 'date') {\n      const maxDate = name === 'identity.dateOfBirth'\n        ? new Date(new Date().setFullYear(new Date().getFullYear() - 18)).toISOString().split('T')[0]\n        : undefined;\n      const dateValue = value ? (typeof value === 'string' ? value : new Date(value).toISOString().split('T')[0]) : '';\n      return (\n        <div key={fieldKey} className={styles.fieldWrapper}>\n          {label && (\n            <label className={`boxed-date-label ${error ? 'boxed-date-label--error' : ''}`}>\n              {label}\n              {required && <span className=\"boxed-inputfield-required\">*</span>}\n            </label>\n          )}\n          <input\n            type=\"date\"\n            value={dateValue}\n            onChange={(e) => onInputChange(name, e.target.value || null)}\n            max={maxDate}\n            className={`w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ${error ? 'date-input-error' : ''}`}\n            style={{\n              fontFamily: 'var(--font-family-text, Roboto, sans-serif)',\n              borderColor: error ? 'var(--boxed-inputfield-error-color)' : 'hsl(var(--border) / 0.6)',\n              color: error ? 'var(--boxed-inputfield-error-color)' : 'inherit'\n            }}\n          />\n        </div>\n      );\n    }\n\n    if (type === 'dropdown') {\n      return (\n        <div key={fieldKey} className={styles.fieldWrapper}>\n          <SimpleDropdown\n            label={commonProps.label}\n            options={getDropdownOptions(optionsKey)}\n            value={value}\n            onChange={(newValue) => onInputChange(name, newValue)}\n            placeholder={placeholder ? t(placeholder) : t('common.selectPlaceholder')}\n            required={commonProps.required}\n            error={commonProps.error}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div key={fieldKey} className={styles.fieldWrapper}>\n        <InputField\n          {...commonProps}\n          name={name}\n          type={type === 'email' ? 'email' : (type === 'tel' ? 'tel' : 'text')}\n          value={value || ''}\n          onChange={(e) => onInputChange(name, e.target.value)}\n          placeholder={placeholder ? t(placeholder) : ''}\n        />\n      </div>\n    );\n  };\n\n  const renderContactFields = (fields) => {\n    const phonePrefixField = fields.find(f => f.name === 'contact.primaryPhonePrefix');\n    const phoneField = fields.find(f => f.name === 'contact.primaryPhone');\n    const emailField = fields.find(f => f.name === 'contact.primaryEmail');\n\n    return (\n      <div className={styles.gridSingle}>\n        {phonePrefixField && renderField(phonePrefixField, 'contact')}\n        {phoneField && renderField(phoneField, 'contact')}\n        {emailField && renderField(emailField, 'contact')}\n      </div>\n    );\n  };\n\n  const getGroupIcon = (groupKey) => {\n    switch (groupKey) {\n      case 'identity': return <FiUser />;\n      case 'address': return <FiMapPin />;\n      case 'contact': return <FiPhone />;\n      default: return <FiInfo />;\n    }\n  };\n\n  const getGroupTitle = (groupKey) => {\n    // Map group keys to translation keys\n    const titleMap = {\n      'identity': 'personalDetails.identityInfo',\n      'address': 'personalDetails.residentialAddress',\n      'contact': 'personalDetails.contactInformation'\n    };\n    return t(titleMap[groupKey] || `personalDetails.${groupKey}`, groupKey.charAt(0).toUpperCase() + groupKey.slice(1));\n  };\n\n  return (\n    <>\n      <style>{`\n        .personal-details-container {\n          container-type: inline-size;\n        }\n        @container (min-width: 700px) {\n          .personal-details-sections-wrapper {\n            flex-direction: row;\n          }\n        }\n      `}</style>\n      <div className={`${styles.sectionContainer} personal-details-container`}>\n\n\n        {/* Title Card */}\n        <div className={styles.headerCard}>\n          <div className=\"flex items-center gap-6 mb-4\">\n            <div\n              className=\"relative group cursor-pointer\"\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <div className=\"w-24 h-24 rounded-full overflow-hidden border-2 border-border group-hover:border-primary transition-colors\">\n                {profilePicture ? (\n                  <img\n                    src={profilePicture}\n                    alt=\"Profile\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-full h-full bg-muted flex items-center justify-center text-2xl font-bold text-muted-foreground\">\n                    {displayProfile?.firstName?.[0] || displayProfile?.identity?.legalFirstName?.[0] || 'U'}{displayProfile?.lastName?.[0] || displayProfile?.identity?.legalLastName?.[0] || ''}\n                  </div>\n                )}\n              </div>\n              <div className=\"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                <span className=\"text-xs text-white font-medium\">{t('common.edit')}</span>\n              </div>\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleProfilePictureChange}\n                accept=\"image/*\"\n                className=\"hidden\"\n              />\n            </div>\n            <div className=\"flex-1\">\n              <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('personalDetails.title')}</h2>\n              <div className={styles.subtitleRow}>\n                <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('personalDetails.subtitle', 'Please ensure your personal details are accurate and up to date.')}</p>\n                <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n              </div>\n              {pictureError && <p className=\"text-red-500 text-sm mt-1\">{pictureError}</p>}\n              {isUploadingPicture && <p className=\"text-primary text-sm mt-1\">{t('accountBasics.uploading')}</p>}\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.sectionsWrapper}>\n          {/* Left Column */}\n          <div className={styles.leftColumn}>\n            {groupedFields.filter(group => group.key === 'identity' || group.key === 'contact').map((group) => (\n              <div key={group.key} className={styles.sectionCard}>\n                {group.key === 'contact' ? (\n                  <div className={styles.gridSingle}>\n                    <div className={styles.cardHeader}>\n                      <div className={styles.cardIconWrapper}>\n                        {getGroupIcon(group.key)}\n                      </div>\n                      <div className={styles.cardTitle}>\n                        <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{getGroupTitle(group.key)}</h3>\n                      </div>\n                    </div>\n                    {renderContactFields(group.fields)}\n                  </div>\n                ) : (\n                  <div className={styles.grid}>\n                    <div className={styles.cardHeader}>\n                      <div className={styles.cardIconWrapper}>\n                        {getGroupIcon(group.key)}\n                      </div>\n                      <div className={styles.cardTitle}>\n                        <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{getGroupTitle(group.key)}</h3>\n                      </div>\n                    </div>\n                    {group.fields.map(field => renderField(field, group.key))}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* Right Column */}\n          <div className={styles.rightColumn}>\n            {groupedFields.filter(group => group.key === 'address').map((group) => (\n              <div key={group.key} className={styles.sectionCard}>\n                <div className={styles.grid}>\n                  <div className={styles.cardHeader}>\n                    <div className={styles.cardIconWrapper}>\n                      {getGroupIcon(group.key)}\n                    </div>\n                    <div className={styles.cardTitle}>\n                      <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{getGroupTitle(group.key)}</h3>\n                    </div>\n                  </div>\n                  {group.fields.map(field => renderField(field, group.key))}\n                </div>\n              </div>\n            ))}\n\n            {/* Summary Section */}\n            <div className={styles.sectionCard}>\n              <div className={styles.gridSingle}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}>\n                    <FiFileText />\n                  </div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('personalDetails.summary', 'Summary')}</h3>\n                  </div>\n                </div>\n                <div className={styles.gridSingle}>\n                  <TextareaField\n                    label=\"\"\n                    name=\"bio\"\n                    value={getNestedValue(formData, 'bio') || DEFAULT_BIO}\n                    onChange={(e) => onInputChange('bio', e.target.value)}\n                    placeholder={t('personalDetails.summaryPlaceholder', 'Tell us about your professional background...')}\n                    error={getNestedValue(errors, 'bio')}\n                    maxLength={1000}\n                    rows={8}\n                    wrapperClassName={styles.fieldWrapper}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.sectionCard}>\n          <div className={styles.formActions} style={{ marginTop: 0 }}>\n            <Button\n              onClick={handleCancel}\n              variant=\"secondary\"\n              disabled={isSubmitting}\n            >\n              {t('common.cancel')}\n            </Button>\n            <Button\n              onClick={onSaveAndContinue}\n              variant=\"confirmation\"\n              disabled={isSubmitting}\n            >\n              {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nPersonalDetails.propTypes = {\n  formData: PropTypes.object.isRequired,\n  config: PropTypes.shape({\n    fields: PropTypes.shape({\n      personalDetails: PropTypes.array\n    })\n  }).isRequired,\n  errors: PropTypes.object.isRequired,\n  isSubmitting: PropTypes.bool.isRequired,\n  onInputChange: PropTypes.func.isRequired,\n  onSaveAndContinue: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  getNestedValue: PropTypes.func.isRequired,\n  onTriggerUpload: PropTypes.func,\n  onStepGuideVisibilityChange: PropTypes.func\n};\n\nexport default PersonalDetails;","// FILE: /src/pages/dashboard/profile/professionals/professionalBackgroundUtils.js\n\nimport { get, set } from 'lodash';\n\n/**\n * Validates a single item based on its schema definition.\n * @param {object} itemData - The data of the item being validated.\n * @param {array} itemSchema - The schema definition for this item type from the config.\n * @param {function} t - The translation function.\n * @returns {{isValid: boolean, errors: object}} - Validation result and errors object.\n */\nexport const validateProfileItem = (itemData, itemSchema, t) => {\n    const errors = {};\n    let isValid = true;\n\n    if (!itemSchema) return { isValid: true, errors: {} };\n\n    itemSchema.forEach(fieldRule => {\n        const { name, required, dependsOn, validationRules } = fieldRule;\n        let isActuallyRequired = required;\n\n        // Check dependency for required status\n        if (dependsOn) {\n            const dependentValue = get(itemData, dependsOn);\n            // Check if dependency condition is met to make the field required\n            // dependsOnValue defines values that MAKE it required (if dependsOnValue is present)\n            // dependsOnValueExclude defines values that make it NOT required (if dependsOnValueExclude is present)\n            // Note: This logic might need refinement based on exact config needs. Example assumes dependsOnValue makes it required.\n            let conditionMet = false;\n            if (fieldRule.dependsOnValue) {\n               conditionMet = fieldRule.dependsOnValue.includes(dependentValue);\n            } else if (fieldRule.dependsOnValueExclude) {\n                conditionMet = !fieldRule.dependsOnValueExclude.includes(dependentValue);\n            } else {\n                conditionMet = true; // If dependsOn is present but no value specified, assume dependency met\n            }\n\n            if (!conditionMet) {\n                isActuallyRequired = false;\n            }\n        }\n\n        // Check required field\n        if (isActuallyRequired) {\n            const value = get(itemData, name);\n            if (value === null || value === undefined || value === '') {\n                isValid = false;\n                set(errors, name, t('validation.required'));\n            }\n        }\n\n        // Add more specific validation rules based on config\n        const value = get(itemData, name);\n        if (value && validationRules) {\n            // Example: Check minLength\n            if (validationRules.minLength && String(value).length < validationRules.minLength) {\n                isValid = false;\n                set(errors, name, t('validation.minLength', { count: validationRules.minLength }));\n            }\n            // Example: Check pattern (regex)\n            if (validationRules.pattern) {\n                 try {\n                     const regex = new RegExp(validationRules.pattern);\n                     if (!regex.test(String(value))) {\n                         isValid = false;\n                         set(errors, name, t(validationRules.patternErrorKey || 'validation.invalidFormat'));\n                     }\n                 } catch (e) {\n                     console.error(\"Invalid regex pattern in config:\", validationRules.pattern, e);\n                 }\n            }\n            // Add more rules (maxLength, numeric range, date comparisons, etc.)\n        }\n    });\n\n    return { isValid, errors };\n};\n\n/**\n * Handles adding or updating an item in an array within the main form data.\n * @param {string} sectionKey - The key for the array in formData (e.g., 'education').\n * @param {object} itemData - The data of the item to add/update.\n * @param {number} editIndex - The index of the item being edited (-1 for adding).\n * @param {array} currentList - The current array from formData.\n * @param {function} onArrayChange - Callback to update the array in the parent state.\n * @param {function} resetFormStateCallback - Callback to reset the local form state in the component.\n * @param {object} validationResult - The result from validateProfileItem.\n * @param {function} setLocalErrorsCallback - Callback to set local item errors in the component.\n */\nexport const addOrUpdateProfileItem = ({\n    sectionKey,\n    itemData,\n    editIndex,\n    currentList,\n    onArrayChange,\n    resetFormStateCallback,\n    validationResult,\n    setLocalErrorsCallback\n}) => {\n\n    setLocalErrorsCallback(validationResult.errors); // Set errors locally regardless\n\n    if (!validationResult.isValid) {\n        console.warn(`Validation failed for ${sectionKey} item:`, validationResult.errors);\n        return false; // Indicate failure\n    }\n\n    let updatedList;\n    const list = Array.isArray(currentList) ? currentList : [];\n\n    if (editIndex > -1) {\n        updatedList = list.map((item, index) => index === editIndex ? itemData : item);\n    } else {\n        updatedList = [...list, itemData];\n    }\n\n    onArrayChange(sectionKey, updatedList);\n    resetFormStateCallback();\n    return true; // Indicate success\n};\n\n/**\n * Handles deleting an item from an array within the main form data.\n * @param {string} sectionKey - The key for the array in formData (e.g., 'education').\n * @param {number} indexToDelete - The index of the item to delete.\n * @param {array} currentList - The current array from formData.\n * @param {function} onArrayChange - Callback to update the array in the parent state.\n */\nexport const deleteProfileItem = ({\n    sectionKey,\n    indexToDelete,\n    currentList,\n    onArrayChange\n}) => {\n    const list = Array.isArray(currentList) ? currentList : [];\n    const updatedList = list.filter((_, i) => i !== indexToDelete);\n    onArrayChange(sectionKey, updatedList);\n};","import React, { useEffect } from 'react';\nimport './styles/CheckboxField.css';\nimport { useNotification } from '../../contexts/NotificationContext';\n\nconst Checkbox = ({\n  label,\n  checked = false,\n  onChange,\n  color,\n  error = null,\n  required = false,\n  name = ''\n}) => {\n  const { showError } = useNotification();\n\n  // Show notification error when error prop changes\n  useEffect(() => {\n    if (error) {\n      showError(error);\n    }\n  }, [error, showError]);\n\n  const handleChange = (e) => {\n    if (error && onChange) {\n      // Reset error when user interacts with checkbox\n      onChange(e, null); // Pass null as second parameter to indicate error reset\n    } else {\n      onChange(e);\n    }\n  };\n\n  return (\n    <div className=\"checkbox-wrapper\">\n      <label className={`checkbox-container ${error ? 'checkbox-container--error' : ''}`}>\n        <input\n          type=\"checkbox\"\n          name={name}\n          checked={checked}\n          onChange={handleChange}\n          required={required}\n        />\n        <span\n          className=\"checkmark\"\n          style={{\n            backgroundColor: checked ? color : '#fff',\n            borderColor: error ? 'var(--red-3)' : color,\n            opacity: checked ? 1 : 0.5\n          }}\n        ></span>\n        <span\n          className={`checkbox-label ${error ? 'checkbox-label--error' : ''}`}\n          style={{ opacity: checked ? 1 : 0.5 }}\n        >\n          {label}\n          {required && <span className=\"checkbox-required\">*</span>}\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default Checkbox;\n","import React from 'react';\nimport './styles/Switch.css';\n\nconst Switch = ({ \n  label, \n  checked = false, \n  onChange, \n  labelColor = '#333', \n  switchColor = '#4CAF50',\n  marginTop = '0', \n  marginRight = '0', \n  marginBottom = '20px', \n  marginLeft = '0' \n}) => {\n  return (\n    <div className=\"switch-wrapper\" style={{ marginTop, marginRight, marginBottom, marginLeft }}>\n    <span className=\"switch-label\" style={{ color: labelColor }}>{label}</span>\n    <label className=\"switch\">\n      <input \n        type=\"checkbox\" \n        checked={checked} \n        onChange={(e) => onChange(e.target.checked)} \n      />\n      <span className=\"slider round\" style={{ \n        backgroundColor: checked ? switchColor : '#ccc' \n      }}></span>\n    </label>\n    </div>\n  );\n};\n\nexport default Switch;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { get, set, cloneDeep } from 'lodash';\nimport classNames from 'classnames';\n\n// --- Import Utilities ---\nimport { validateProfileItem, addOrUpdateProfileItem, deleteProfileItem } from '../../utils/professionalBackgroundUtils';\n// Import the dropdown options hook\nimport { useDropdownOptions } from '../../utils/DropdownListsImports';\n\n// --- Import Base Components (Adjust Paths) ---\nimport InputField from '../../../../../components/BoxedInputFields/Personnalized-InputField';\nimport TextareaField from '../../../../../components/BoxedInputFields/TextareaField';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport Button from '../../../../../components/BoxedInputFields/Button';\nimport CheckboxField from '../../../../../components/BoxedInputFields/CheckboxField';\nimport Switch from '../../../../../components/BoxedInputFields/Switch';\nimport { FiEdit, FiTrash2, FiAward, FiBookOpen, FiBriefcase, FiPlus } from 'react-icons/fi';\n\n// =====================================================================\n\n\n// Tailwind styles\nconst styles = {\n   sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n   headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n   sectionTitle: \"text-2xl font-semibold mb-2\",\n   sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n   sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n   subtitleRow: \"flex items-end justify-between gap-4\",\n   mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n   mandatoryMark: \"text-destructive\",\n   sectionsWrapper: \"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto\",\n   leftColumn: \"flex flex-col gap-6 flex-1\",\n   rightColumn: \"flex flex-col gap-6 flex-1\",\n   sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n   cardHeader: \"flex items-center gap-4 mb-0\",\n   cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n   cardTitle: \"flex-1\",\n   cardTitleH3: \"m-0\",\n   cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n   itemTitleStyle: { color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)', fontSize: 'var(--font-size-small)', fontWeight: '500' },\n   grid: \"grid grid-cols-1 gap-6 !grid-cols-1\",\n   gridSingle: \"grid grid-cols-1 gap-6\",\n   fieldWrapper: \"space-y-2\",\n   fullWidth: \"\",\n   sectionContent: \"space-y-4\",\n   formSectionError: \"border-destructive/50\",\n   emptyStateText: \"text-center text-muted-foreground py-8\",\n   addItemForm: \"rounded-lg p-6 border border-border/60 mt-4\",\n   itemDisplayLine: \"flex flex-col\",\n   itemContent: \"flex flex-col gap-1\",\n   itemActions: \"flex gap-2\",\n   formActions: \"flex justify-end gap-4 mt-6\",\n   errorText: \"text-destructive text-sm mt-2\"\n};\n\nconst ProfessionalBackground = ({\n   formData,\n   config,\n   errors,\n   isSubmitting,\n   onArrayChange,\n   onSaveAndContinue,\n   onCancel,\n   getNestedValue,\n   onInputChange,\n}) => {\n   const { t, i18n } = useTranslation(['dashboardProfile', 'dropdowns', 'common', 'validation']);\n\n   // Get dropdown options using the hook\n   const dropdownOptionsFromHook = useDropdownOptions();\n\n   // Handle cancel with page reload\n   const handleCancel = useCallback(() => {\n      // First call the original onCancel handler if provided\n      if (onCancel) {\n         onCancel();\n      }\n\n      // Then reload the page\n      window.location.reload();\n   }, [onCancel]);\n\n   // --- Config Extraction ---\n   const sectionConfig = useMemo(() => config?.fields?.professionalBackground || {}, [config]);\n   const itemSchemas = useMemo(() => config?.itemSchemas || {}, [config]);\n\n   // --- Local State for Forms ---\n   const [formStates, setFormStates] = useState({});\n\n   // Initialize/Reset form states\n   useMemo(() => {\n      const initialStates = {};\n      Object.keys(sectionConfig).forEach(key => {\n         initialStates[key] = { showForm: false, editIndex: -1, itemData: {}, itemErrors: {} };\n      });\n      setFormStates(initialStates);\n   }, [sectionConfig]);\n\n   // --- Helper Functions (mostly related to local state) ---\n   const getDropdownOptions = useCallback((optionsKey) => {\n      // Handle special cases for optionsKey mapping\n      const mappedOptionsKey = optionsKey === 'educationLevels' ? 'education' : optionsKey;\n\n      // First try using the hook with mapped key\n      const suffixedKey = `${mappedOptionsKey}Options`;\n      const optionsFromHook = dropdownOptionsFromHook[suffixedKey];\n      if (optionsFromHook && optionsFromHook.length > 0) {\n         return optionsFromHook;\n      }\n\n      // Also try with specific educationLevel naming (legacy support)\n      if (optionsKey === 'educationLevels') {\n         const educationLevelOptions = dropdownOptionsFromHook['educationLevelOptions'];\n         if (educationLevelOptions && educationLevelOptions.length > 0) {\n            return educationLevelOptions;\n         }\n      }\n\n      // Try direct access to translations\n      const dropdownTranslations = i18n.getResourceBundle(i18n.language, 'dropdowns');\n      if (dropdownTranslations) {\n         // First try the original key\n         if (dropdownTranslations[optionsKey]) {\n            return Object.entries(dropdownTranslations[optionsKey]).map(([key, value]) => ({\n               value: key,\n               label: value\n            }));\n         }\n         // Then try the mapped key if different\n         if (mappedOptionsKey !== optionsKey && dropdownTranslations[mappedOptionsKey]) {\n            return Object.entries(dropdownTranslations[mappedOptionsKey]).map(([key, value]) => ({\n               value: key,\n               label: value\n            }));\n         }\n      }\n\n      console.warn(`No options found for key: ${optionsKey} (mapped to: ${mappedOptionsKey})`);\n      return [];\n   }, [dropdownOptionsFromHook, i18n]);\n\n   const setLocalItemErrors = useCallback((sectionKey, errors) => {\n      setFormStates(prev => ({\n         ...prev,\n         [sectionKey]: { ...prev[sectionKey], itemErrors: errors }\n      }));\n   }, []);\n\n   const resetFormState = useCallback((sectionKey) => {\n      setFormStates(prev => ({\n         ...prev,\n         [sectionKey]: { showForm: false, editIndex: -1, itemData: {}, itemErrors: {} }\n      }));\n   }, []);\n\n   // --- Handlers Using Utilities ---\n   const handleShowAddForm = (sectionKey) => {\n      // Reset state before showing\n      setFormStates(prev => ({\n         ...prev,\n         [sectionKey]: { showForm: true, editIndex: -1, itemData: {}, itemErrors: {} }\n      }));\n   };\n\n   const handleShowEditForm = (sectionKey, index) => {\n      // Updated to use professionalDetails prefix for nested data\n      const fullSectionPath = `professionalDetails.${sectionKey}`;\n      const currentList = getNestedValue(formData, fullSectionPath) || [];\n      setFormStates(prev => ({\n         ...prev,\n         [sectionKey]: { showForm: true, editIndex: index, itemData: cloneDeep(currentList[index]), itemErrors: {} }\n      }));\n   };\n\n   const handleCancelForm = (sectionKey) => {\n      resetFormState(sectionKey);\n   };\n\n   const handleItemChange = (sectionKey, fieldName, value) => {\n      setFormStates(prev => {\n         const newState = cloneDeep(prev);\n         set(newState[sectionKey].itemData, fieldName, value);\n         set(newState[sectionKey].itemErrors, fieldName, undefined);\n         return newState;\n      });\n   };\n\n   const handleAddOrUpdateItem = (sectionKey) => {\n      const currentFormState = formStates[sectionKey];\n      if (!currentFormState) return;\n\n      const { itemData, editIndex } = currentFormState;\n      const itemSchemaRef = sectionConfig[sectionKey]?.itemSchemaRef;\n      const itemSchema = itemSchemas[itemSchemaRef] || [];\n\n      // Updated to use professionalDetails prefix for nested data\n      const fullSectionPath = `professionalDetails.${sectionKey}`;\n      const currentList = getNestedValue(formData, fullSectionPath) || [];\n\n      // 1. Validate using the utility function\n      const validationResult = validateProfileItem(itemData, itemSchema, t);\n\n      // 2. Add/Update using the utility function with updated section path\n      addOrUpdateProfileItem({\n         sectionKey: fullSectionPath, // Use full path for nested structure\n         itemData,\n         editIndex,\n         currentList,\n         onArrayChange,\n         resetFormStateCallback: () => resetFormState(sectionKey), // Pass reset function\n         validationResult,\n         setLocalErrorsCallback: (errors) => setLocalItemErrors(sectionKey, errors) // Pass setter for local errors\n      });\n   };\n\n   const handleDeleteItem = (sectionKey, index) => {\n      // Updated to use professionalDetails prefix for nested data\n      const fullSectionPath = `professionalDetails.${sectionKey}`;\n      const currentList = getNestedValue(formData, fullSectionPath) || [];\n      // Call the utility function\n      deleteProfileItem({\n         sectionKey: fullSectionPath, // Use full path for nested structure\n         indexToDelete: index,\n         currentList,\n         onArrayChange\n      });\n   };\n\n   // --- Dynamic Field Rendering (Remains in component) ---\n   const renderItemFormField = (sectionKey, fieldRule) => {\n      const { name, type, required, labelKey, optionsKey, dependsOn, dependsOnValue, dependsOnValueExclude, maxYear } = fieldRule;\n      const currentFormState = formStates[sectionKey];\n      if (!currentFormState) return null;\n\n      const { itemData, itemErrors } = currentFormState;\n\n      // Check dependency for rendering\n      if (dependsOn) {\n         const dependentValue = get(itemData, dependsOn);\n         let conditionMet = true;\n\n         if (dependsOnValue) {\n            conditionMet = dependsOnValue.includes(dependentValue);\n         } else if (dependsOnValueExclude) {\n            conditionMet = !dependsOnValueExclude.includes(dependentValue);\n         }\n\n         if (!conditionMet) return null; // Don't render if dependency not met\n      }\n\n      const value = get(itemData, name);\n      const error = get(itemErrors, name);\n      const label = t(labelKey, name.charAt(0).toUpperCase() + name.slice(1).replace(/([A-Z])/g, ' $1'));\n\n      // Determine if field is *currently* required based on dependencies\n      let isActuallyRequired = required;\n      if (dependsOn && isActuallyRequired) {\n         const dependentValue = get(itemData, dependsOn);\n         let dependencyMet = true;\n\n         if (dependsOnValue) {\n            dependencyMet = dependsOnValue.includes(dependentValue);\n         } else if (dependsOnValueExclude) {\n            dependencyMet = !dependsOnValueExclude.includes(dependentValue);\n         }\n\n         if (!dependencyMet) {\n            isActuallyRequired = false;\n         }\n      }\n      const finalLabel = <>{label} {isActuallyRequired && <span className={styles.mandatoryMark}>*</span>}</>;\n\n      const commonProps = {\n         label: finalLabel,\n         error: error,\n         required: isActuallyRequired,\n         wrapperClassName: styles.fieldWrapper\n      };\n\n      const wrapInput = (component, isFullWidth = false) => (\n         <div key={name} className={classNames(styles.fieldWrapper, { [styles.fullWidth]: isFullWidth })}>\n            {component}\n         </div>\n      );\n\n      switch (type) {\n         case 'text':\n            return wrapInput(<InputField {...commonProps} value={value || ''} onChange={e => handleItemChange(sectionKey, name, e.target.value)} />);\n         case 'textarea':\n            return wrapInput(<TextareaField {...commonProps} value={value || ''} onChange={e => handleItemChange(sectionKey, name, e.target.value)} />, true);\n         case 'date':\n            const maxDateValue = maxYear\n               ? new Date(maxYear, 11, 31).toISOString().split('T')[0]\n               : undefined;\n            const dateValue = value ? (typeof value === 'string' ? value : new Date(value).toISOString().split('T')[0]) : '';\n            return wrapInput(\n               <div>\n                  {commonProps.label && (\n                     <label className={`boxed-date-label ${commonProps.error ? 'boxed-date-label--error' : ''}`}>\n                        {commonProps.label}\n                     </label>\n                  )}\n                  <input\n                     type=\"date\"\n                     value={dateValue}\n                     onChange={(e) => handleItemChange(sectionKey, name, e.target.value || null)}\n                     max={maxDateValue}\n                     className={`w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ${commonProps.error ? 'date-input-error' : ''}`}\n                     style={{\n                        fontFamily: 'var(--font-family-text, Roboto, sans-serif)',\n                        borderColor: commonProps.error ? 'var(--boxed-inputfield-error-color)' : 'hsl(var(--border) / 0.6)',\n                        color: commonProps.error ? 'var(--boxed-inputfield-error-color)' : 'inherit'\n                     }}\n                  />\n               </div>\n            );\n         case 'dropdown':\n            const options = getDropdownOptions(optionsKey);\n            return wrapInput(\n               <SimpleDropdown\n                  label={commonProps.label}\n                  options={options}\n                  value={value}\n                  onChange={(newValue) => handleItemChange(sectionKey, name, newValue)}\n                  placeholder={t('common.selectPlaceholder', 'Select...')}\n                  required={commonProps.required}\n                  error={commonProps.error}\n               />\n            );\n         case 'checkbox':\n            // Use Switch for \"currently\" checkboxes (currentlyStudying, current)\n            if (name === 'currentlyStudying' || name === 'current') {\n               return wrapInput(\n                  <Switch\n                     label={label}\n                     checked={!!value}\n                     onChange={(newValue) => handleItemChange(sectionKey, name, newValue)}\n                     marginBottom=\"0\"\n                  />,\n                  false\n               );\n            }\n            return wrapInput(<CheckboxField label={label} checked={!!value} onChange={(e) => handleItemChange(sectionKey, name, e.target.checked)} />, true);\n         default:\n            return null;\n      }\n   };\n\n   const getSectionIcon = (sectionKey) => {\n      switch (sectionKey) {\n         case 'education': return <FiBookOpen />;\n         case 'workExperience': return <FiBriefcase />;\n         case 'qualifications': return <FiAward />;\n         default: return <FiBriefcase />;\n      }\n   };\n\n   // --- Generic Renderer for a List Section (Remains in component) ---\n   const renderListSection = (sectionKey) => {\n      const mainSectionRule = sectionConfig[sectionKey];\n      if (!mainSectionRule) return null;\n\n      const itemSchemaRef = mainSectionRule.itemSchemaRef;\n      const itemSchema = itemSchemas[itemSchemaRef] || [];\n\n      const fullSectionPath = `professionalDetails.${sectionKey}`;\n      const currentList = getNestedValue(formData, fullSectionPath) || [];\n      const mainSectionError = getNestedValue(errors, fullSectionPath);\n      const currentFormState = formStates[sectionKey];\n\n      const subsectionTitle = t(mainSectionRule.labelKey, sectionKey.charAt(0).toUpperCase() + sectionKey.slice(1).replace(/([A-Z])/g, ' $1'));\n\n      return (\n         <div key={sectionKey} className={styles.sectionCard}>\n            <div className={classNames(styles.sectionContent, { [styles.formSectionError]: mainSectionError && !currentList.length })}>\n               <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '1rem' }}>\n                  <div className={styles.cardIconWrapper}>{getSectionIcon(sectionKey)}</div>\n                  <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{subsectionTitle}</h3>\n               </div>\n\n               {/* List of added items */}\n               {!currentFormState?.showForm && (\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: 0, marginBottom: 0 }}>\n                     {currentList.length > 0 && currentList.map((item, index) => (\n                        <React.Fragment key={`${sectionKey}-${index}`}>\n                           <div style={{\n                              padding: 0,\n                              margin: 0,\n                              display: 'flex',\n                              justifyContent: 'space-between',\n                              alignItems: 'center'\n                           }}>\n                              <div className={styles.itemContent}>\n                                 <div className=\"text-sm font-medium\" style={{ color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}><strong>{item.title || item.degree || item.jobTitle || 'Item'}</strong></div>\n                                 <div className=\"text-xs\" style={{ color: 'hsl(var(--muted-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{item.institution || item.employer}</div>\n                              </div>\n                              <div className={styles.itemActions} style={{ display: 'flex', gap: '0.75rem' }}>\n                                 <button\n                                    onClick={() => handleShowEditForm(sectionKey, index)}\n                                    className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors\"\n                                    title={t('common.edit')}\n                                    aria-label={t('common.edit')}\n                                 >\n                                    <FiEdit className=\"w-4 h-4\" />\n                                 </button>\n                                 <button\n                                    onClick={() => handleDeleteItem(sectionKey, index)}\n                                    className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors\"\n                                    title={t('common.delete')}\n                                    aria-label={t('common.delete')}\n                                 >\n                                    <FiTrash2 className=\"w-4 h-4\" />\n                                 </button>\n                              </div>\n                           </div>\n                           {index < currentList.length - 1 && (\n                              <div style={{ height: '1px', backgroundColor: 'hsl(var(--border) / 0.3)', margin: '0.5rem 0' }} />\n                           )}\n                        </React.Fragment>\n                     ))}\n\n                     {currentList.length === 0 && (\n                        <p className={styles.emptyStateText} style={{ textAlign: 'center', color: 'gray', padding: '2rem' }}>{t(`professionalBackground.no${sectionKey.charAt(0).toUpperCase() + sectionKey.slice(1)}`, 'No entries added yet.')}</p>\n                     )}\n\n                     {mainSectionError && !currentList.length && <p className={styles.errorText}>{mainSectionError}</p>}\n\n                     <div style={{ display: 'flex', justifyContent: 'center', marginTop: 0, padding: 0 }}>\n                        <button\n                           onClick={() => handleShowAddForm(sectionKey)}\n                           className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors\"\n                           title={t('common.add')}\n                           aria-label={t('common.add')}\n                        >\n                           <FiPlus className=\"w-4 h-4\" />\n                        </button>\n                     </div>\n                  </div>\n               )}\n\n               {/* Add/Edit Form */}\n               {currentFormState?.showForm && (\n                  <div className={styles.addItemForm}>\n                     <h4 style={{ marginTop: 0, marginBottom: '1.5rem', color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{currentFormState.editIndex > -1 ? t('common.edit') : t('common.add')} {subsectionTitle}</h4>\n\n                     <div className={styles.grid}>\n                        {itemSchema.map(fieldRule => renderItemFormField(sectionKey, fieldRule))}\n                     </div>\n\n                     <div className={styles.formActions} style={{ display: 'flex', justifyContent: 'flex-end', gap: '1rem', marginTop: '1.5rem' }}>\n                        <Button onClick={() => handleCancelForm(sectionKey)} variant=\"secondary\">{t('common.cancel')}</Button>\n                        <Button onClick={() => handleAddOrUpdateItem(sectionKey)} variant=\"primary\">\n                           {currentFormState.editIndex > -1 ? t('common.update') : t('common.add')}\n                        </Button>\n                     </div>\n                  </div>\n               )}\n            </div>\n         </div>\n      );\n   };\n\n   // --- Main Component Render ---\n   return (\n      <div className={styles.sectionContainer}>\n         <div className={styles.headerCard}>\n            <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('professionalBackground.title')}</h2>\n            <div className={styles.subtitleRow}>\n               <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('professionalBackground.subtitle')}</p>\n               <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n            </div>\n         </div>\n\n         {/* Dynamically render each section based on config items */}\n         <div className={styles.sectionsWrapper}>\n            {/* Left Column: Education and Qualifications */}\n            <div className={styles.leftColumn}>\n               {Object.keys(sectionConfig).filter(sectionKey => sectionKey === 'education' || sectionKey === 'qualifications').map(sectionKey => renderListSection(sectionKey))}\n            </div>\n\n            {/* Right Column: Work Experience */}\n            <div className={styles.rightColumn}>\n               {Object.keys(sectionConfig).filter(sectionKey => sectionKey === 'workExperience').map(sectionKey => renderListSection(sectionKey))}\n            </div>\n         </div>\n\n         {/* --- Main Action Buttons --- */}\n         <div className={styles.sectionCard}>\n            <div className={styles.formActions} style={{ marginTop: 0 }}>\n               <Button onClick={handleCancel} variant=\"secondary\" disabled={isSubmitting}>\n                  {t('common.cancel')}\n               </Button>\n               <Button onClick={onSaveAndContinue} variant=\"confirmation\" disabled={isSubmitting}>\n                  {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n               </Button>\n            </div>\n         </div>\n      </div>\n   );\n};\n\nProfessionalBackground.propTypes = {\n   formData: PropTypes.object.isRequired,\n   config: PropTypes.shape({\n      fields: PropTypes.shape({\n         professionalBackground: PropTypes.object\n      }),\n      itemSchemas: PropTypes.object\n   }).isRequired,\n   errors: PropTypes.object.isRequired,\n   isSubmitting: PropTypes.bool.isRequired,\n   onArrayChange: PropTypes.func.isRequired,\n   onSaveAndContinue: PropTypes.func.isRequired,\n   onCancel: PropTypes.func.isRequired,\n   getNestedValue: PropTypes.func.isRequired,\n   onInputChange: PropTypes.func.isRequired\n};\n\nexport default ProfessionalBackground;","import React, { useMemo, useCallback, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport { FiBriefcase, FiCreditCard, FiDollarSign, FiHome, FiShield } from 'react-icons/fi';\n\nimport Switch from '../../../../../components/BoxedInputFields/Switch';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport InputField from '../../../../../components/BoxedInputFields/Personnalized-InputField';\nimport Button from '../../../../../components/BoxedInputFields/Button';\nimport Dialog from '../../../../../components/Dialog/Dialog';\n// Use CSS module instead of regular CSS\n\n// Import the dropdown options hook\nimport { useDropdownOptions } from '../../utils/DropdownListsImports';\n\n// --- FAKE Dropdown Options (Replace with real data loading/i18n) ---\n\n// Tailwind styles\nconst styles = {\n  sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n  headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n  sectionTitle: \"text-2xl font-semibold mb-2\",\n  sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n  subtitleRow: \"flex items-end justify-between gap-4\",\n  mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n  hiringMandatoryMark: \"text-orange-500\",\n  sectionsWrapper: \"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto\",\n  leftColumn: \"flex flex-col gap-6 flex-1\",\n  rightColumn: \"flex flex-col gap-6 flex-1\",\n  sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n  cardHeader: \"flex items-center gap-4 mb-0\",\n  cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n  cardTitle: \"flex-1\",\n  cardTitleH3: \"m-0\",\n  cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  grid: \"grid grid-cols-1 gap-6\",\n  gridSingle: \"grid grid-cols-1 gap-6\",\n  fieldWrapper: \"space-y-2\",\n  fullWidth: \"md:col-span-2\",\n  formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\"\n};\n\nconst BillingInformation = ({\n  formData,\n  config,\n  errors,\n  isSubmitting,\n  onInputChange, // Use this for all updates\n  onSaveAndContinue,\n  onCancel,\n  getNestedValue,\n}) => {\n  const { t, i18n } = useTranslation(['dashboardProfile', 'dropdowns', 'common', 'validation']);\n  const [showHiringInfo, setShowHiringInfo] = useState(false);\n\n  // Use the dropdown options hook\n  const dropdownOptionsFromHook = useDropdownOptions();\n\n  const fieldsToRender = useMemo(() => config?.fields?.billingInformation || [], [config]);\n\n  // Handle cancel with page reload\n  const handleCancel = useCallback(() => {\n    // First call the original onCancel handler if provided\n    if (onCancel) {\n      onCancel();\n    }\n\n    // Then reload the page\n    window.location.reload();\n  }, [onCancel]);\n\n  const getDropdownOptions = useCallback((optionsKey) => {\n    // Handle special cases for optionsKey mapping\n    const mappedOptionsKey = optionsKey === 'educationLevels' ? 'education' : optionsKey;\n\n    // First try using the hook with mapped key\n    const suffixedKey = `${mappedOptionsKey}Options`;\n    const optionsFromHook = dropdownOptionsFromHook[suffixedKey];\n    if (optionsFromHook && optionsFromHook.length > 0) {\n      return optionsFromHook;\n    }\n\n    // Also try with specific educationLevel naming (legacy support)\n    if (optionsKey === 'educationLevels') {\n      const educationLevelOptions = dropdownOptionsFromHook['educationLevelOptions'];\n      if (educationLevelOptions && educationLevelOptions.length > 0) {\n        return educationLevelOptions;\n      }\n    }\n\n    // Try direct access to translations\n    const dropdownTranslations = i18n.getResourceBundle(i18n.language, 'dropdowns');\n    if (dropdownTranslations) {\n      // First try the original key\n      if (dropdownTranslations[optionsKey]) {\n        return Object.entries(dropdownTranslations[optionsKey]).map(([key, value]) => ({\n          value: key,\n          label: value\n        }));\n      }\n      // Then try the mapped key if different\n      if (mappedOptionsKey !== optionsKey && dropdownTranslations[mappedOptionsKey]) {\n        return Object.entries(dropdownTranslations[mappedOptionsKey]).map(([key, value]) => ({\n          value: key,\n          label: value\n        }));\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(`No options found for key: ${optionsKey} (mapped to: ${mappedOptionsKey})`);\n    }\n    return [];\n  }, [dropdownOptionsFromHook, i18n]);\n\n  // Helper function to check dependency conditions from config\n  const checkDependency = useCallback((fieldConfig) => {\n    if (!fieldConfig.dependsOn) return true; // No dependency\n\n    const dependentValue = getNestedValue(formData, fieldConfig.dependsOn);\n\n    if (fieldConfig.dependsOnValue) {\n      return fieldConfig.dependsOnValue.includes(dependentValue);\n    }\n    if (fieldConfig.dependsOnValueExclude) {\n      return !fieldConfig.dependsOnValueExclude.includes(dependentValue);\n    }\n    return true; // Default if dependsOn is present but no values specified (shouldn't happen)\n  }, [formData, getNestedValue]);\n\n  // Renders a single field based on its configuration\n  const renderField = (fieldConfig, isSingleColumn = false) => {\n    const { name, type, required, labelKey, optionsKey, dependsOn, dependsOnValue, dependsOnValueExclude, maxYear, placeholder, ...restConfig } = fieldConfig;\n\n    // Check dependency before rendering\n    if (!checkDependency(fieldConfig)) {\n      return null;\n    }\n\n    const value = getNestedValue(formData, name);\n    const error = getNestedValue(errors, name);\n    const label = t(labelKey, name);\n\n    // Determine if field is *currently* required based on dependencies\n    let isActuallyRequired = required;\n    if (dependsOn && isActuallyRequired) {\n      if (!checkDependency(fieldConfig)) {\n        isActuallyRequired = false;\n      }\n    }\n    const showHiringStar = fieldConfig.requiredForHiring && !isActuallyRequired && checkDependency(fieldConfig);\n    const finalLabel = <>{label} {isActuallyRequired && <span className=\"boxed-inputfield-required\">*</span>} {showHiringStar && <span className={styles.hiringMandatoryMark}>*</span>}</>;\n\n    // Common props without the key\n    const commonProps = {\n      label: finalLabel,\n      error: error,\n      required: isActuallyRequired,\n      wrapperClassName: styles.fieldWrapper\n    };\n\n    // Helper to wrap inputs in a div for grid layout\n    const wrapInput = (component) => (\n      <div key={name} className={classNames(styles.fieldWrapper, { [styles.fullWidth]: !isSingleColumn && type === 'checkbox' && name !== 'withholdingTaxSubject' })}>\n        {component}\n      </div>\n    );\n\n    switch (type) {\n      case 'date':\n        const maxDateValue = maxYear\n          ? new Date(maxYear, 11, 31).toISOString().split('T')[0]\n          : new Date(new Date().setFullYear(new Date().getFullYear() - 18)).toISOString().split('T')[0];\n        const dateValue = value ? (typeof value === 'string' ? value : new Date(value).toISOString().split('T')[0]) : '';\n        return wrapInput(\n          <div>\n            {finalLabel && (\n              <label className={`boxed-date-label ${error ? 'boxed-date-label--error' : ''}`}>\n                {finalLabel}\n              </label>\n            )}\n            <input\n              type=\"date\"\n              value={dateValue}\n              onChange={(e) => onInputChange(name, e.target.value || null)}\n              max={maxDateValue}\n              className={`w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ${error ? 'date-input-error' : ''}`}\n              style={{\n                fontFamily: 'var(--font-family-text, Roboto, sans-serif)',\n                borderColor: error ? 'var(--boxed-inputfield-error-color)' : 'hsl(var(--border) / 0.6)',\n                color: error ? 'var(--boxed-inputfield-error-color)' : 'inherit'\n              }}\n            />\n          </div>\n        );\n      case 'dropdown':\n        const options = getDropdownOptions(optionsKey);\n\n        // Debug option loading issues\n        if (options.length === 0 && process.env.NODE_ENV !== 'production') {\n          console.warn(`No options found for dropdown ${name} with optionsKey ${optionsKey}`);\n        }\n\n        return wrapInput(\n          <SimpleDropdown\n            key={name}\n            label={commonProps.label}\n            options={options}\n            value={value}\n            onChange={(newValue) => {\n              console.log('SimpleDropdown onChange:', { name, newValue });\n              onInputChange(name, newValue);\n            }}\n            placeholder={placeholder || t('common.selectPlaceholder', 'Select...')}\n            required={commonProps.required}\n            error={commonProps.error}\n          />\n        );\n      case 'checkbox':\n        return wrapInput(\n          <Switch\n            key={name}\n            label={label}\n            checked={!!value}\n            onChange={(checked) => onInputChange(name, checked)}\n            marginBottom={name === 'payrollData.withholdingTaxInfo.isSubject' ? '0' : '20px'}\n          />\n        );\n      case 'text':\n      case 'number':\n      default:\n        return wrapInput(\n          <InputField\n            key={name}\n            {...commonProps}\n            name={name}\n            type={type === 'number' ? 'number' : 'text'}\n            value={value || ''}\n            onChange={(e) => onInputChange(name, e.target.value)}\n            min={type === 'number' ? restConfig.min : undefined}\n            max={type === 'number' ? restConfig.max : undefined}\n          />\n        );\n    }\n  };\n\n  // --- Component Render ---\n  // Group fields by 'group' property from config for better structure\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    fieldsToRender.forEach(field => {\n      const groupName = field.group || 'general';\n      if (!groups[groupName]) {\n        groups[groupName] = [];\n      }\n      groups[groupName].push(field);\n    });\n\n    // Reorder payrollData fields: tax fields should come after religion\n    if (groups.payrollData) {\n      const payrollFields = groups.payrollData;\n      const taxFields = payrollFields.filter(f => f.name && f.name.includes('withholdingTaxInfo'));\n      const beforeTax = [];\n      const afterTax = [];\n      let foundReligion = false;\n\n      payrollFields.forEach(field => {\n        if (field.name && field.name.includes('withholdingTaxInfo')) {\n          return; // Skip tax fields, they'll be added separately\n        }\n        if (field.name === 'payrollData.religion') {\n          foundReligion = true;\n          beforeTax.push(field);\n        } else if (foundReligion) {\n          afterTax.push(field);\n        } else {\n          beforeTax.push(field);\n        }\n      });\n\n      groups.payrollData = [...beforeTax, ...taxFields, ...afterTax];\n    }\n\n    return groups;\n  }, [fieldsToRender]);\n\n\n  // Save and Continue handler that shows info dialog if hiring-required fields are missing\n  const handleSaveAndContinueClick = useCallback(() => {\n    try {\n      const missingHiring = fieldsToRender\n        .filter(f => f.requiredForHiring)\n        .filter(f => checkDependency(f))\n        .some(f => {\n          const v = getNestedValue(formData, f.name);\n          return v === undefined || v === null || v === '';\n        });\n      if (missingHiring) {\n        setShowHiringInfo(true);\n      }\n    } catch { }\n    onSaveAndContinue();\n  }, [fieldsToRender, formData, getNestedValue, onSaveAndContinue, checkDependency]);\n\n  return (\n    <div className={styles.sectionContainer}>\n      <div className={styles.headerCard}>\n        <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('billingInformation.title')}</h2>\n        <div className={styles.subtitleRow}>\n          <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('billingInformation.subtitle', 'Provide your employment and billing details.')}</p>\n          <div className={styles.mandatoryFieldLegend}><span className={styles.hiringMandatoryMark}>*</span> {t('billingInformation.hiringRequiredLegend')}</div>\n        </div>\n      </div>\n\n      <div className={styles.sectionsWrapper}>\n        {/* Left Column */}\n        <div className={styles.leftColumn}>\n          {/* Employment Eligibility Section */}\n          {groupedFields.employmentEligibility && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiBriefcase /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('billingInformation.employmentEligibilityTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.employmentEligibility.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {/* Banking Information Section */}\n          {groupedFields.banking && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiCreditCard /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('billingInformation.bankingInfo')}</h3>\n                  </div>\n                </div>\n                {groupedFields.banking.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {/* Legacy sections for backward compatibility */}\n          {groupedFields.residency && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiBriefcase /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('billingInformation.residencyPermitTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.residency.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {groupedFields.insurance && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiShield /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('billingInformation.insurance')}</h3>\n                  </div>\n                </div>\n                {groupedFields.insurance.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {groupedFields.billingAddress && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiHome /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('billingInformation.billingAddress')}</h3>\n                  </div>\n                </div>\n                {groupedFields.billingAddress.find(f => f.name === 'sameAsResidential') && renderField(groupedFields.billingAddress.find(f => f.name === 'sameAsResidential'))}\n                {groupedFields.billingAddress.filter(f => f.name !== 'sameAsResidential').map(renderField)}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Right Column */}\n        <div className={styles.rightColumn}>\n          {/* Payroll Data Section */}\n          {groupedFields.payrollData && (\n            <div className={styles.sectionCard}>\n              <div className={styles.gridSingle}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiDollarSign /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('billingInformation.payrollDataTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.payrollData.map(field => renderField(field, true))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* --- Action Buttons --- */}\n      <div className={styles.sectionCard}>\n        <div className={styles.formActions} style={{ marginTop: 0 }}>\n          <Button onClick={handleCancel} variant=\"secondary\" disabled={isSubmitting}>\n            {t('common.cancel')}\n          </Button>\n          <Button onClick={handleSaveAndContinueClick} variant=\"confirmation\" disabled={isSubmitting}>\n            {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n          </Button>\n        </div>\n      </div>\n\n      <Dialog\n        isOpen={showHiringInfo}\n        onClose={() => setShowHiringInfo(false)}\n        title={t('billingInformation.hiringInfoTitle')}\n        actions={<Button onClick={() => setShowHiringInfo(false)} variant=\"primary\">OK</Button>}\n      >\n        <p>{t('billingInformation.hiringInfoMessage')}</p>\n      </Dialog>\n    </div>\n  );\n};\n\nBillingInformation.propTypes = {\n  formData: PropTypes.object.isRequired,\n  config: PropTypes.shape({\n    fields: PropTypes.shape({\n      billingInformation: PropTypes.array\n    })\n  }).isRequired,\n  errors: PropTypes.object.isRequired,\n  isSubmitting: PropTypes.bool.isRequired,\n  onInputChange: PropTypes.func.isRequired,\n  onSaveAndContinue: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  getNestedValue: PropTypes.func.isRequired\n};\n\nexport default BillingInformation;","import React, { useState, useMemo, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\n\n// --- Import Base Components ---\nimport Button from '../../../../../components/BoxedInputFields/Button';\nimport UploadFile from '../../../../../components/BoxedInputFields/UploadFile';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport { FiEdit, FiTrash2, FiFileText, FiUploadCloud, FiCheckCircle } from 'react-icons/fi';\n\n// --- Import Storage Service ---\nimport { uploadFile } from '../../../../../services/storageService';\n\nconst styles = {\n    sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n    headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n    sectionTitle: \"text-2xl font-semibold mb-2\",\n    sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n    sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n    subtitleRow: \"flex items-end justify-between gap-4\",\n    mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n    mandatoryMark: \"text-destructive\",\n    sectionsWrapper: \"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto\",\n    leftColumn: \"flex flex-col gap-6 flex-1\",\n    rightColumn: \"flex flex-col gap-6 flex-1\",\n    sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n    cardHeader: \"flex items-center gap-4 mb-0\",\n    cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n    cardTitle: \"flex-1\",\n    cardTitleH3: \"m-0\",\n    cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n    formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\",\n    sectionContent: \"space-y-4\",\n    errorText: \"text-destructive text-sm mt-2\",\n    errorUpload: \"border-destructive\"\n};\n\nconst useFileUpload = () => {\n    const [uploadState, setUploadState] = useState({ isLoading: false, progress: 0, error: null, type: null });\n\n    const upload = async (file, path, docType) => {\n        setUploadState({ isLoading: true, progress: 0, error: null, type: docType });\n\n        try {\n            const downloadURL = await uploadFile(file, path, (progress) => {\n                setUploadState(prev => ({\n                    ...prev,\n                    progress: prev.type === docType ? progress : prev.progress\n                }));\n            });\n\n            setUploadState({ isLoading: false, progress: 0, error: null, type: null });\n            console.log(`Upload complete for ${docType}: ${downloadURL}`);\n            return downloadURL;\n        } catch (error) {\n            console.error(`Error uploading ${docType}:`, error);\n            setUploadState({\n                isLoading: false,\n                progress: 0,\n                error: error.message || 'Upload failed',\n                type: docType\n            });\n            throw error;\n        }\n    };\n\n    return { upload, uploadState };\n};\n\nconst DocumentUploads = ({\n    formData,\n    config,\n    errors,\n    isSubmitting,\n    onInputChange,\n    onArrayChange,\n    onSaveAndContinue,\n    onCancel,\n    getNestedValue,\n}) => {\n    const { t } = useTranslation(['dashboardProfile', 'common', 'validation']);\n    const { upload, uploadState } = useFileUpload();\n\n    const nationality = getNestedValue(formData, 'identity.nationality');\n    const isSwiss = nationality === 'switzerland';\n\n    const documentFieldsConfig = useMemo(() => {\n        const baseConfig = config?.fields?.documentUploads || [];\n        return baseConfig.map(field => {\n            if (field.docType === 'workPermit') {\n                if (isSwiss) {\n                    return {\n                        ...field,\n                        docType: 'idCard',\n                        name: 'workPermitUrl',\n                        labelKey: 'documents.idCard',\n                        descriptionKey: 'documents.idCardDescription',\n                        required: true\n                    };\n                } else {\n                    return {\n                        ...field,\n                        labelKey: 'documents.workPermit',\n                        descriptionKey: 'documents.workPermitDescription'\n                    };\n                }\n            }\n            return field;\n        });\n    }, [config, isSwiss]);\n\n    const handleCancel = useCallback(() => {\n        if (onCancel) {\n            onCancel();\n        }\n        window.location.reload();\n    }, [onCancel]);\n\n    const educationList = useMemo(() => {\n        return getNestedValue(formData, 'professionalDetails.education') || [];\n    }, [formData, getNestedValue]);\n\n    const workExperienceList = useMemo(() => {\n        return getNestedValue(formData, 'professionalDetails.workExperience') || [];\n    }, [formData, getNestedValue]);\n\n    const normalizeDocumentName = useCallback((fileName, docType, educationIndex = null, qualificationIndex = null, workExperienceIndex = null, referenceType = null) => {\n        const extension = fileName.split('.').pop();\n        const baseName = fileName.substring(0, fileName.lastIndexOf('.')) || fileName;\n        const normalizedBase = baseName.toLowerCase().replace(/[^a-z0-9]/g, '_');\n        const timestamp = Date.now();\n\n        if (docType === 'diploma' && educationIndex !== null && educationList[educationIndex]) {\n            const edu = educationList[educationIndex];\n            const degree = (edu.degree || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n            const institution = (edu.institution || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n            return `${docType}_${degree}_${institution}_${timestamp}.${extension}`;\n        }\n\n        if (docType === 'qualification' && qualificationIndex !== null) {\n            const qualifications = getNestedValue(formData, 'professionalDetails.qualifications') || [];\n            if (qualifications[qualificationIndex]) {\n                const qual = qualifications[qualificationIndex];\n                const title = (qual.title || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n                const institution = (qual.institution || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n                return `${docType}_${title}_${institution}_${timestamp}.${extension}`;\n            }\n        }\n\n        if (docType === 'referenceLetter' && referenceType === 'workExperience' && workExperienceIndex !== null && workExperienceList[workExperienceIndex]) {\n            const workExp = workExperienceList[workExperienceIndex];\n            const jobTitle = (workExp.jobTitle || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n            const employer = (workExp.employer || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n            return `${docType}_work_${jobTitle}_${employer}_${timestamp}.${extension}`;\n        }\n\n        if (docType === 'referenceLetter' && referenceType === 'education' && educationIndex !== null && educationList[educationIndex]) {\n            const edu = educationList[educationIndex];\n            const degree = (edu.degree || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n            const institution = (edu.institution || '').toLowerCase().replace(/[^a-z0-9]/g, '_');\n            return `${docType}_edu_${degree}_${institution}_${timestamp}.${extension}`;\n        }\n\n        return `${docType}_${normalizedBase}_${timestamp}.${extension}`;\n    }, [educationList, formData, getNestedValue, workExperienceList]);\n\n    const handleFileUpload = useCallback(async (files, fieldConfig, educationIndex = null, qualificationIndex = null, referenceValue = null) => {\n        if (!files || files.length === 0) return;\n        const file = files[0];\n        const { docType, name: fieldName, isMultiple } = fieldConfig;\n\n        let workExperienceIndex = null;\n        let referenceType = null;\n        let refEducationIndex = null;\n\n        if (docType === 'referenceLetter' && referenceValue) {\n            if (referenceValue.startsWith('work_')) {\n                referenceType = 'workExperience';\n                workExperienceIndex = parseInt(referenceValue.split('_')[1]);\n            } else if (referenceValue.startsWith('edu_')) {\n                referenceType = 'education';\n                refEducationIndex = parseInt(referenceValue.split('_')[1]);\n            }\n        }\n\n        try {\n            const userId = getNestedValue(formData, 'userId') || 'unknown_user';\n            const normalizedFileName = normalizeDocumentName(file.name, docType, educationIndex || refEducationIndex, qualificationIndex, workExperienceIndex, referenceType);\n            const path = `documents/${userId}/${docType}/${normalizedFileName}`;\n            const downloadURL = await upload(file, path, docType);\n\n            const uploadedAt = new Date().toISOString();\n            const fileMetadata = {\n                documentId: `doc_${Date.now()}`,\n                userId: userId,\n                type: docType,\n                category: docType,\n                fileName: normalizedFileName,\n                originalFileName: file.name,\n                storageUrl: downloadURL,\n                fileSize: file.size,\n                fileType: file.type || 'application/octet-stream',\n                uploadedAt: uploadedAt,\n                status: 'pending_verification',\n                educationIndex: docType === 'diploma' ? (educationIndex !== null ? parseInt(educationIndex) : null) : (docType === 'referenceLetter' && referenceType === 'education' ? refEducationIndex : null),\n                qualificationIndex: docType === 'qualification' ? (qualificationIndex !== null ? parseInt(qualificationIndex) : null) : null,\n                workExperienceIndex: docType === 'referenceLetter' && referenceType === 'workExperience' ? workExperienceIndex : null,\n                referenceType: docType === 'referenceLetter' ? referenceType : null\n            };\n\n            if (isMultiple) {\n                const currentDocs = getNestedValue(formData, 'verification.verificationDocuments') || [];\n                onArrayChange('verification.verificationDocuments', [...currentDocs, fileMetadata]);\n            } else {\n                const currentDocs = getNestedValue(formData, 'verification.verificationDocuments') || [];\n                const filteredDocs = currentDocs.filter(doc => doc.type !== docType);\n                onArrayChange('verification.verificationDocuments', [...filteredDocs, fileMetadata]);\n                onInputChange(fieldName, downloadURL);\n            }\n        } catch (error) {\n            console.error(`Error uploading ${docType}:`, error);\n        }\n    }, [upload, formData, getNestedValue, onInputChange, onArrayChange, normalizeDocumentName]);\n\n    const handleRemoveDocument = useCallback((fieldConfig, indexOrUrlToRemove) => {\n        const { name: fieldName, isMultiple, docType } = fieldConfig;\n\n        if (isMultiple) {\n            const currentDocs = getNestedValue(formData, 'verification.verificationDocuments') || [];\n            let updatedDocs;\n\n            if (typeof indexOrUrlToRemove === 'number') {\n                const docsOfType = currentDocs.filter(doc => doc.type === docType);\n                const docToRemove = docsOfType[indexOrUrlToRemove];\n                updatedDocs = currentDocs.filter(doc => doc !== docToRemove);\n            } else {\n                updatedDocs = currentDocs.filter(doc => doc.storageUrl !== indexOrUrlToRemove);\n            }\n\n            onArrayChange('verification.verificationDocuments', updatedDocs);\n        } else {\n            const currentDocs = getNestedValue(formData, 'verification.verificationDocuments') || [];\n            const updatedDocs = currentDocs.filter(doc => doc.type !== docType);\n            onArrayChange('verification.verificationDocuments', updatedDocs);\n\n            onInputChange(fieldName, '');\n        }\n    }, [getNestedValue, formData, onInputChange, onArrayChange]);\n\n    const getCurrentFiles = useCallback((fieldConfig) => {\n        const { isMultiple, docType } = fieldConfig;\n        const allDocs = getNestedValue(formData, 'verification.verificationDocuments') || [];\n        const docsOfType = allDocs.filter(doc => doc.type === docType);\n\n        if (isMultiple) {\n            return docsOfType.map(doc => ({ url: doc.storageUrl, doc }));\n        } else {\n            return docsOfType.length > 0 ? [{ url: docsOfType[0].storageUrl, doc: docsOfType[0] }] : [];\n        }\n    }, [formData, getNestedValue]);\n\n    const qualificationsList = useMemo(() => {\n        return getNestedValue(formData, 'professionalDetails.qualifications') || [];\n    }, [formData, getNestedValue]);\n\n    const getEducationOptions = useMemo(() => {\n        const options = educationList.map((edu, index) => {\n            const degree = edu.degree ? t(`dropdowns:educationLevels.${edu.degree}`, edu.degree) : '';\n            const institution = edu.institution || '';\n            const field = edu.field || '';\n            const label = `${degree}${institution ? `, ${institution}` : ''}${field ? `, ${field}` : ''}`;\n            return {\n                value: index.toString(),\n                label: label || `Education ${index + 1}`\n            };\n        });\n        options.push({ value: 'other', label: t('common.other', 'Other') });\n        return options;\n    }, [educationList, t]);\n\n    const getQualificationOptions = useMemo(() => {\n        const options = qualificationsList.map((qual, index) => {\n            const title = qual.title || '';\n            const institution = qual.institution || '';\n            const type = qual.type ? t(`dropdowns:qualificationTypes.${qual.type}`, qual.type) : '';\n            const label = `${title}${institution ? `, ${institution}` : ''}${type ? ` (${type})` : ''}`;\n            return {\n                value: index.toString(),\n                label: label || `Qualification ${index + 1}`\n            };\n        });\n        options.push({ value: 'other', label: t('common.other', 'Other') });\n        return options;\n    }, [qualificationsList, t]);\n\n    const getReferenceLetterOptions = useMemo(() => {\n        const options = [];\n\n        if (workExperienceList.length > 0) {\n            workExperienceList.forEach((workExp, index) => {\n                const jobTitle = workExp.jobTitle || '';\n                const employer = workExp.employer || '';\n                const location = workExp.location || '';\n                const label = `${jobTitle}${employer ? `, ${employer}` : ''}${location ? `, ${location}` : ''}`;\n                options.push({\n                    value: `work_${index}`,\n                    label: `[${t('documents.workExperience', 'Work Experience')}] ${label || `Work ${index + 1}`}`\n                });\n            });\n        }\n\n        if (educationList.length > 0) {\n            educationList.forEach((edu, index) => {\n                const degree = edu.degree ? t(`dropdowns:educationLevels.${edu.degree}`, edu.degree) : '';\n                const institution = edu.institution || '';\n                const field = edu.field || '';\n                const label = `${degree}${institution ? `, ${institution}` : ''}${field ? `, ${field}` : ''}`;\n                options.push({\n                    value: `edu_${index}`,\n                    label: `[${t('documents.education', 'Education')}] ${label || `Education ${index + 1}`}`\n                });\n            });\n        }\n\n        options.push({ value: 'other', label: t('common.other', 'Other') });\n        return options;\n    }, [workExperienceList, educationList, t]);\n\n    // --- Sub-component to render inside the loop ---\n    const RenderDocumentCard = ({ fieldConfig }) => {\n        const { docType, name: fieldName, required, isMultiple, labelKey, accept } = fieldConfig;\n        const currentFiles = getCurrentFiles(fieldConfig);\n        const error = getNestedValue(errors, fieldName);\n        const label = t(labelKey, docType);\n\n        const isCurrentlyUploading = uploadState.isLoading && uploadState.type === docType;\n        const inputRef = useRef(null);\n\n        const getInitialEducationIndex = useMemo(() => {\n            if (docType === 'diploma' && currentFiles.length > 0 && !isMultiple) {\n                const doc = currentFiles[0]?.doc;\n                if (doc?.educationIndex !== null && doc?.educationIndex !== undefined) {\n                    return doc.educationIndex.toString();\n                }\n            }\n            return null;\n        }, [currentFiles, docType, isMultiple]);\n\n        const getInitialQualificationIndex = useMemo(() => {\n            if (docType === 'qualification' && currentFiles.length > 0 && !isMultiple) {\n                const doc = currentFiles[0]?.doc;\n                if (doc?.qualificationIndex !== null && doc?.qualificationIndex !== undefined) {\n                    return doc.qualificationIndex.toString();\n                }\n            }\n            return null;\n        }, [currentFiles, docType, isMultiple]);\n\n        const getInitialReferenceValue = useMemo(() => {\n            if (docType === 'referenceLetter' && currentFiles.length > 0 && !isMultiple) {\n                const doc = currentFiles[0]?.doc;\n                if (doc?.referenceType === 'workExperience' && doc?.workExperienceIndex !== null && doc?.workExperienceIndex !== undefined) {\n                    return `work_${doc.workExperienceIndex}`;\n                } else if (doc?.referenceType === 'education' && doc?.educationIndex !== null && doc?.educationIndex !== undefined) {\n                    return `edu_${doc.educationIndex}`;\n                }\n            }\n            return null;\n        }, [currentFiles, docType, isMultiple]);\n\n        const [selectedEducationIndex, setSelectedEducationIndex] = useState(getInitialEducationIndex);\n        const [selectedQualificationIndex, setSelectedQualificationIndex] = useState(getInitialQualificationIndex);\n        const [selectedReferenceValue, setSelectedReferenceValue] = useState(getInitialReferenceValue);\n        const showEducationDropdown = docType === 'diploma' && educationList.length > 0;\n        const showQualificationDropdown = docType === 'qualification' && qualificationsList.length > 0;\n        const showReferenceDropdown = docType === 'referenceLetter' && getReferenceLetterOptions.length > 0;\n\n        const uploadButtonLabel = isMultiple\n            ? t(`documents.add${docType.charAt(0).toUpperCase() + docType.slice(1)}Button`, `Add ${docType}`)\n            : currentFiles.length > 0\n                ? t(`documents.replace${docType.charAt(0).toUpperCase() + docType.slice(1)}Button`, `Replace ${docType}`)\n                : t(`documents.upload${docType.charAt(0).toUpperCase() + docType.slice(1)}Button`, `Upload ${docType}`);\n\n        const renderDocumentItem = (fileData, index, totalItems) => {\n            const url = fileData.url || fileData;\n            const doc = fileData.doc || null;\n            const getFileNameFromUrl = (url) => {\n                if (!url) return '';\n                try {\n                    const path = new URL(url).pathname;\n                    const parts = path.split('/');\n                    return decodeURIComponent(parts[parts.length - 1]);\n                } catch (e) {\n                    const parts = url.split('/');\n                    return parts[parts.length - 1];\n                }\n            };\n            const fileName = doc?.originalFileName || getFileNameFromUrl(url);\n            let displayName = fileName;\n\n            if (doc?.educationIndex !== null && doc?.educationIndex !== undefined && educationList[doc.educationIndex]) {\n                const edu = educationList[doc.educationIndex];\n                const degree = edu.degree ? t(`dropdowns:educationLevels.${edu.degree}`, edu.degree) : '';\n                const institution = edu.institution || '';\n                const field = edu.field || '';\n                displayName = `${degree}${institution ? `, ${institution}` : ''}${field ? `, ${field}` : ''}`;\n            } else if (doc?.qualificationIndex !== null && doc?.qualificationIndex !== undefined && qualificationsList[doc.qualificationIndex]) {\n                const qual = qualificationsList[doc.qualificationIndex];\n                const title = qual.title || '';\n                const institution = qual.institution || '';\n                const type = qual.type ? t(`dropdowns:qualificationTypes.${qual.type}`, qual.type) : '';\n                displayName = `${title}${institution ? `, ${institution}` : ''}${type ? ` (${type})` : ''}`;\n            } else if (doc?.referenceType === 'workExperience' && doc?.workExperienceIndex !== null && doc?.workExperienceIndex !== undefined && workExperienceList[doc.workExperienceIndex]) {\n                const workExp = workExperienceList[doc.workExperienceIndex];\n                const jobTitle = workExp.jobTitle || '';\n                const employer = workExp.employer || '';\n                const location = workExp.location || '';\n                displayName = `${jobTitle}${employer ? `, ${employer}` : ''}${location ? `, ${location}` : ''}`;\n            } else if (doc?.referenceType === 'education' && doc?.educationIndex !== null && doc?.educationIndex !== undefined && educationList[doc.educationIndex]) {\n                const edu = educationList[doc.educationIndex];\n                const degree = edu.degree ? t(`dropdowns:educationLevels.${edu.degree}`, edu.degree) : '';\n                const institution = edu.institution || '';\n                const field = edu.field || '';\n                displayName = `${degree}${institution ? `, ${institution}` : ''}${field ? `, ${field}` : ''}`;\n            }\n\n            const itemUrl = typeof url === 'string' ? url : (url?.url || url);\n            return (\n                <div key={itemUrl || index} style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    padding: 0,\n                    margin: 0\n                }}>\n                    <div style={{\n                        width: '32px',\n                        height: '32px',\n                        color: 'hsl(var(--foreground))',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        marginRight: '0.75rem'\n                    }}>\n                        <FiFileText />\n                    </div>\n                    <div style={{ flex: 1, minWidth: 0 }}>\n                        <p style={{ margin: 0, fontWeight: 500, fontSize: 'var(--font-size-small)', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }} title={fileName}>{displayName}</p>\n                        <p style={{ margin: 0, fontSize: '0.75rem', color: 'hsl(var(--muted-foreground))', display: 'flex', alignItems: 'center', gap: '4px' }}>\n                            <FiCheckCircle size={12} /> {t('common.uploaded')}\n                        </p>\n                    </div>\n                    <div style={{ display: 'flex', gap: '0.75rem' }}>\n                        <button\n                            onClick={() => {\n                                if (docType === 'diploma') {\n                                    setSelectedEducationIndex(doc?.educationIndex?.toString() || null);\n                                } else if (docType === 'qualification') {\n                                    setSelectedQualificationIndex(doc?.qualificationIndex?.toString() || null);\n                                } else if (docType === 'referenceLetter') {\n                                    if (doc?.referenceType === 'workExperience' && doc?.workExperienceIndex !== null && doc?.workExperienceIndex !== undefined) {\n                                        setSelectedReferenceValue(`work_${doc.workExperienceIndex}`);\n                                    } else if (doc?.referenceType === 'education' && doc?.educationIndex !== null && doc?.educationIndex !== undefined) {\n                                        setSelectedReferenceValue(`edu_${doc.educationIndex}`);\n                                    }\n                                }\n                                inputRef.current && inputRef.current.click();\n                            }}\n                            className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors\"\n                            title={t('documents.replace')}\n                            aria-label={t('documents.replace')}\n                        >\n                            <FiEdit className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                            onClick={() => {\n                                const urlToRemove = itemUrl;\n                                handleRemoveDocument(fieldConfig, isMultiple ? index : urlToRemove);\n                            }}\n                            className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors\"\n                            title={t('documents.remove')}\n                            aria-label={t('documents.remove')}\n                        >\n                            <FiTrash2 className=\"w-4 h-4\" />\n                        </button>\n                    </div>\n                </div>\n            );\n        };\n\n        return (\n            <div className={styles.sectionCard}>\n                <div className={styles.sectionContent}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '1rem' }}>\n                        <div className={styles.cardIconWrapper}><FiUploadCloud /></div>\n                        <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>\n                            {label} {required && <span className={styles.mandatoryMark}>*</span>}\n                        </h3>\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: 0, paddingBottom: (!isMultiple && currentFiles.length === 1) ? 0 : undefined }}>\n                        {isMultiple\n                            ? currentFiles.map((fileData, index) => {\n                                const url = fileData.url || fileData;\n                                return (\n                                    <React.Fragment key={url || index}>\n                                        {renderDocumentItem(fileData, index, currentFiles.length)}\n                                        {index < currentFiles.length - 1 && (\n                                            <div style={{ height: '1px', backgroundColor: 'hsl(var(--border) / 0.3)', margin: '0.5rem 0' }} />\n                                        )}\n                                    </React.Fragment>\n                                );\n                            })\n                            : currentFiles.length > 0 ? renderDocumentItem(currentFiles[0], 0, 1) : null\n                        }\n                    </div>\n\n                    <div style={{ marginTop: (currentFiles.length === 0) ? 0 : ((!isMultiple && currentFiles.length === 1) ? 0 : '1.5rem') }}>\n                        {showEducationDropdown && (isMultiple || currentFiles.length === 0) && (\n                            <div style={{ marginBottom: '1rem' }}>\n                                <SimpleDropdown\n                                    label=\"\"\n                                    options={getEducationOptions}\n                                    value={selectedEducationIndex}\n                                    onChange={(value) => setSelectedEducationIndex(value)}\n                                    placeholder={t('documents.selectEducationPlaceholder', 'Select education entry...')}\n                                    required={true}\n                                />\n                            </div>\n                        )}\n                        {showQualificationDropdown && (isMultiple || currentFiles.length === 0) && (\n                            <div style={{ marginBottom: '1rem' }}>\n                                <SimpleDropdown\n                                    label=\"\"\n                                    options={getQualificationOptions}\n                                    value={selectedQualificationIndex}\n                                    onChange={(value) => setSelectedQualificationIndex(value)}\n                                    placeholder={t('documents.selectQualificationPlaceholder', 'Select qualification...')}\n                                    required={true}\n                                />\n                            </div>\n                        )}\n                        {showReferenceDropdown && (isMultiple || currentFiles.length === 0) && (\n                            <div style={{ marginBottom: '1rem' }}>\n                                <SimpleDropdown\n                                    label=\"\"\n                                    options={getReferenceLetterOptions}\n                                    value={selectedReferenceValue}\n                                    onChange={(value) => setSelectedReferenceValue(value)}\n                                    placeholder={t('documents.selectReferencePlaceholder', 'Select work experience or education...')}\n                                    required={true}\n                                />\n                            </div>\n                        )}\n                        {isMultiple || currentFiles.length === 0 ? (\n                            <UploadFile\n                                ref={inputRef}\n                                onChange={(files) => {\n                                    if (showEducationDropdown && (selectedEducationIndex === null || selectedEducationIndex === '')) {\n                                        return;\n                                    }\n                                    if (showQualificationDropdown && (selectedQualificationIndex === null || selectedQualificationIndex === '')) {\n                                        return;\n                                    }\n                                    if (showReferenceDropdown && (selectedReferenceValue === null || selectedReferenceValue === '')) {\n                                        return;\n                                    }\n                                    const eduIndex = showEducationDropdown && selectedEducationIndex !== null && selectedEducationIndex !== 'other'\n                                        ? selectedEducationIndex\n                                        : null;\n                                    const qualIndex = showQualificationDropdown && selectedQualificationIndex !== null && selectedQualificationIndex !== 'other'\n                                        ? selectedQualificationIndex\n                                        : null;\n                                    const refValue = showReferenceDropdown && selectedReferenceValue !== null && selectedReferenceValue !== 'other'\n                                        ? selectedReferenceValue\n                                        : null;\n                                    handleFileUpload(files, fieldConfig, eduIndex, qualIndex, refValue);\n                                    if (showEducationDropdown) {\n                                        setSelectedEducationIndex(null);\n                                    }\n                                    if (showQualificationDropdown) {\n                                        setSelectedQualificationIndex(null);\n                                    }\n                                    if (showReferenceDropdown) {\n                                        setSelectedReferenceValue(null);\n                                    }\n                                }}\n                                isLoading={isCurrentlyUploading}\n                                progress={isCurrentlyUploading ? uploadState.progress : 0}\n                                accept={accept || \".pdf,.jpg,.png,.doc,.docx\"}\n                                label={uploadButtonLabel}\n                                documentName={label.toLowerCase()}\n                                className={error && currentFiles.length === 0 ? styles.errorUpload : ''}\n                                disabled={(showEducationDropdown && (selectedEducationIndex === null || selectedEducationIndex === '')) ||\n                                    (showQualificationDropdown && (selectedQualificationIndex === null || selectedQualificationIndex === '')) ||\n                                    (showReferenceDropdown && (selectedReferenceValue === null || selectedReferenceValue === ''))}\n                            />\n                        ) : (\n                            <>\n                                {showEducationDropdown && (\n                                    <div style={{ marginBottom: '1rem' }}>\n                                        <SimpleDropdown\n                                            label=\"\"\n                                            options={getEducationOptions}\n                                            value={selectedEducationIndex}\n                                            onChange={(value) => setSelectedEducationIndex(value)}\n                                            placeholder={t('documents.selectEducationPlaceholder', 'Select education entry...')}\n                                            required={true}\n                                        />\n                                    </div>\n                                )}\n                                {showQualificationDropdown && (\n                                    <div style={{ marginBottom: '1rem' }}>\n                                        <SimpleDropdown\n                                            label=\"\"\n                                            options={getQualificationOptions}\n                                            value={selectedQualificationIndex}\n                                            onChange={(value) => setSelectedQualificationIndex(value)}\n                                            placeholder={t('documents.selectQualificationPlaceholder', 'Select qualification...')}\n                                            required={true}\n                                        />\n                                    </div>\n                                )}\n                                {showReferenceDropdown && (\n                                    <div style={{ marginBottom: '1rem' }}>\n                                        <SimpleDropdown\n                                            label=\"\"\n                                            options={getReferenceLetterOptions}\n                                            value={selectedReferenceValue}\n                                            onChange={(value) => setSelectedReferenceValue(value)}\n                                            placeholder={t('documents.selectReferencePlaceholder', 'Select work experience or education...')}\n                                            required={true}\n                                        />\n                                    </div>\n                                )}\n                                <input\n                                    ref={inputRef}\n                                    type=\"file\"\n                                    accept={accept || \".pdf,.jpg,.png,.doc,.docx\"}\n                                    onChange={(e) => {\n                                        if (e.target.files && e.target.files[0]) {\n                                            if (showEducationDropdown && (selectedEducationIndex === null || selectedEducationIndex === '')) {\n                                                e.target.value = '';\n                                                return;\n                                            }\n                                            if (showQualificationDropdown && (selectedQualificationIndex === null || selectedQualificationIndex === '')) {\n                                                e.target.value = '';\n                                                return;\n                                            }\n                                            if (showReferenceDropdown && (selectedReferenceValue === null || selectedReferenceValue === '')) {\n                                                e.target.value = '';\n                                                return;\n                                            }\n                                            const eduIndex = showEducationDropdown && selectedEducationIndex !== null && selectedEducationIndex !== 'other'\n                                                ? selectedEducationIndex\n                                                : null;\n                                            const qualIndex = showQualificationDropdown && selectedQualificationIndex !== null && selectedQualificationIndex !== 'other'\n                                                ? selectedQualificationIndex\n                                                : null;\n                                            const refValue = showReferenceDropdown && selectedReferenceValue !== null && selectedReferenceValue !== 'other'\n                                                ? selectedReferenceValue\n                                                : null;\n                                            handleFileUpload([e.target.files[0]], fieldConfig, eduIndex, qualIndex, refValue);\n                                            if (showEducationDropdown) {\n                                                setSelectedEducationIndex(null);\n                                            }\n                                            if (showQualificationDropdown) {\n                                                setSelectedQualificationIndex(null);\n                                            }\n                                            if (showReferenceDropdown) {\n                                                setSelectedReferenceValue(null);\n                                            }\n                                            e.target.value = '';\n                                        }\n                                    }}\n                                    style={{ display: 'none' }}\n                                />\n                            </>\n                        )}\n                    </div>\n\n                    {error && currentFiles.length === 0 && <p className={styles.errorText} style={{ marginTop: '0.5rem' }}>{error}</p>}\n                    {uploadState.type === docType && uploadState.error && <p className={styles.errorText} style={{ marginTop: '0.5rem' }}>{uploadState.error}</p>}\n                </div>\n            </div>\n        );\n    };\n\n    RenderDocumentCard.propTypes = {\n        fieldConfig: PropTypes.shape({\n            docType: PropTypes.string.isRequired,\n            name: PropTypes.string.isRequired,\n            required: PropTypes.bool,\n            isMultiple: PropTypes.bool,\n            labelKey: PropTypes.string.isRequired,\n            accept: PropTypes.string\n        }).isRequired\n    };\n\n    return (\n        <div className={styles.sectionContainer}>\n            <div className={styles.headerCard}>\n                <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('documents.title')}</h2>\n                <div className={styles.subtitleRow}>\n                    <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('documents.subtitle')}</p>\n                    <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n                </div>\n            </div>\n\n            <div className={styles.sectionsWrapper}>\n                <div className={styles.leftColumn}>\n                    {documentFieldsConfig.filter((_, index) => index % 2 === 0).map(fieldConfig => (\n                        <RenderDocumentCard key={fieldConfig.docType} fieldConfig={fieldConfig} />\n                    ))}\n                </div>\n\n                <div className={styles.rightColumn}>\n                    {documentFieldsConfig.filter((_, index) => index % 2 === 1).map(fieldConfig => (\n                        <RenderDocumentCard key={fieldConfig.docType} fieldConfig={fieldConfig} />\n                    ))}\n                </div>\n            </div>\n\n            <div className={styles.sectionCard}>\n                <div className={styles.formActions} style={{ marginTop: 0 }}>\n                    <Button onClick={handleCancel} variant=\"secondary\" disabled={isSubmitting || uploadState.isLoading}>\n                        {t('common.cancel')}\n                    </Button>\n                    <Button onClick={onSaveAndContinue} variant=\"confirmation\" disabled={isSubmitting || uploadState.isLoading}>\n                        {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nDocumentUploads.propTypes = {\n    formData: PropTypes.object.isRequired,\n    config: PropTypes.shape({\n        fields: PropTypes.shape({\n            documentUploads: PropTypes.arrayOf(\n                PropTypes.shape({\n                    docType: PropTypes.string.isRequired,\n                    name: PropTypes.string,\n                    required: PropTypes.bool,\n                    isMultiple: PropTypes.bool,\n                    labelKey: PropTypes.string,\n                    accept: PropTypes.string\n                })\n            )\n        })\n    }).isRequired,\n    errors: PropTypes.object.isRequired,\n    isSubmitting: PropTypes.bool.isRequired,\n    onInputChange: PropTypes.func.isRequired,\n    onArrayChange: PropTypes.func.isRequired,\n    onSaveAndContinue: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    getNestedValue: PropTypes.func.isRequired\n};\n\nexport default DocumentUploads;","/**\r\n * Account Management Service\r\n * \r\n * Frontend service for account deletion and data export\r\n * Compliant with Swiss nFADP/revDSG and GDPR\r\n */\r\n\r\nimport { auth } from './firebase';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE_URL || 'https://europe-west6-medishift-fd594.cloudfunctions.net';\r\n\r\n/**\r\n * Get authentication token for API calls\r\n */\r\nconst getAuthToken = async () => {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n        throw new Error('User not authenticated');\r\n    }\r\n    return await user.getIdToken();\r\n};\r\n\r\n/**\r\n * Make authenticated API request\r\n */\r\nconst apiRequest = async (endpoint, options = {}) => {\r\n    const token = await getAuthToken();\r\n\r\n    const response = await fetch(`${API_BASE}/${endpoint}`, {\r\n        ...options,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n            ...options.headers\r\n        }\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n        throw new Error(data.message || `API error: ${response.status}`);\r\n    }\r\n\r\n    return data;\r\n};\r\n\r\n/**\r\n * Get a preview of what will happen when the account is deleted\r\n * Shows:\r\n * - What data will be deleted immediately\r\n * - What data will be retained for legal compliance\r\n * - Retention period information\r\n * \r\n * @returns {Promise<Object>} Deletion eligibility info\r\n */\r\nexport const getDeletionPreview = async () => {\r\n    try {\r\n        const result = await apiRequest('accountDeletionPreview', {\r\n            method: 'GET'\r\n        });\r\n        return result.data;\r\n    } catch (error) {\r\n        console.error('[AccountManagement] Error getting deletion preview:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Request account deletion\r\n * Implements the \"Anonymize & Archive\" strategy compliant with Swiss law\r\n * \r\n * @param {Object} options - Deletion options\r\n * @param {string} options.reason - Optional reason for deletion\r\n * @returns {Promise<Object>} Deletion result\r\n */\r\nexport const deleteAccount = async ({ reason } = {}) => {\r\n    try {\r\n        const result = await apiRequest('accountDelete', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                confirmPhrase: 'DELETE MY ACCOUNT',\r\n                reason: reason || 'User requested account deletion'\r\n            })\r\n        });\r\n        return result;\r\n    } catch (error) {\r\n        console.error('[AccountManagement] Error deleting account:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Export all user data (GDPR Right of Access)\r\n * Returns all data the platform holds about the user\r\n * \r\n * @returns {Promise<Object>} User data export\r\n */\r\nexport const exportUserData = async () => {\r\n    try {\r\n        const result = await apiRequest('accountDataExport', {\r\n            method: 'GET'\r\n        });\r\n        return result.data;\r\n    } catch (error) {\r\n        console.error('[AccountManagement] Error exporting data:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Check if an AVS/GLN number is eligible for bonuses\r\n * Used to prevent bonus abuse from re-registrations\r\n * \r\n * @param {string} identifier - AVS or GLN number\r\n * @param {string} type - 'avs' or 'gln'\r\n * @returns {Promise<Object>} Eligibility result\r\n */\r\nexport const checkBonusEligibility = async (identifier, type = 'avs') => {\r\n    try {\r\n        const result = await apiRequest('accountBonusEligibility', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ identifier, type })\r\n        });\r\n        return result.data;\r\n    } catch (error) {\r\n        console.error('[AccountManagement] Error checking bonus eligibility:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Download user data as JSON file\r\n * Convenience function to trigger file download\r\n */\r\nexport const downloadUserData = async () => {\r\n    const data = await exportUserData();\r\n\r\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `my-data-export-${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n    URL.revokeObjectURL(url);\r\n\r\n    return data;\r\n};\r\n\r\nexport default {\r\n    getDeletionPreview,\r\n    deleteAccount,\r\n    exportUserData,\r\n    checkBonusEligibility,\r\n    downloadUserData\r\n};\r\n","/**\n * Account Deletion Component\n * \n * Swiss nFADP/revDSG and GDPR compliant account deletion UI\n * Shows what will be deleted vs retained, and handles the deletion process\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { FiTrash2, FiAlertTriangle, FiCheck, FiX, FiLock, FiArchive } from 'react-icons/fi';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { useNotification } from '../../../../contexts/NotificationContext';\nimport Button from '../../../../components/BoxedInputFields/Button';\nimport Dialog from '../../../../components/Dialog/Dialog';\nimport InputFieldHideUnhide from '../../../../components/BoxedInputFields/InputFieldHideUnhide';\nimport PersonnalizedInputField from '../../../../components/BoxedInputFields/Personnalized-InputField';\nimport { getDeletionPreview, deleteAccount } from '../../../../services/accountManagementService';\nimport {\n    EmailAuthProvider,\n    reauthenticateWithCredential,\n    GoogleAuthProvider,\n    signInWithPopup\n} from 'firebase/auth';\nimport { auth } from '../../../../services/firebase';\n\nconst AccountDeletion = () => {\n    const { t } = useTranslation(['dashboardProfile', 'common']);\n    const { currentUser, logout } = useAuth();\n    const { showNotification } = useNotification();\n\n    // State\n    const [deletionPreview, setDeletionPreview] = useState(null);\n    const [isLoadingPreview, setIsLoadingPreview] = useState(true);\n    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n    const [isReauthDialogOpen, setIsReauthDialogOpen] = useState(false);\n    const [isProcessingDelete, setIsProcessingDelete] = useState(false);\n    const [confirmPhrase, setConfirmPhrase] = useState('');\n    const [confirmError, setConfirmError] = useState('');\n    const [reauthPassword, setReauthPassword] = useState('');\n    const [reauthError, setReauthError] = useState('');\n    const [authProvider, setAuthProvider] = useState(null);\n\n    // Determine auth provider\n    useEffect(() => {\n        if (currentUser) {\n            const isGoogleUser = currentUser.providerData?.some(\n                provider => provider.providerId === 'google.com'\n            );\n            setAuthProvider(isGoogleUser ? 'google.com' : 'password');\n        }\n    }, [currentUser]);\n\n    // Load deletion preview on mount\n    useEffect(() => {\n        const loadPreview = async () => {\n            try {\n                const preview = await getDeletionPreview();\n                setDeletionPreview(preview);\n            } catch (error) {\n                console.error('Error loading deletion preview:', error);\n                // If API fails, show default view\n                setDeletionPreview(null);\n            } finally {\n                setIsLoadingPreview(false);\n            }\n        };\n\n        loadPreview();\n    }, []);\n\n    // Handle delete button click\n    const handleDeleteClick = useCallback(() => {\n        setConfirmPhrase('');\n        setConfirmError('');\n        setIsDeleteDialogOpen(true);\n    }, []);\n\n    // Validate confirmation phrase and proceed to reauth\n    const handleConfirmDelete = useCallback(() => {\n        if (confirmPhrase !== 'DELETE MY ACCOUNT') {\n            setConfirmError(t('settings.accountDeletion.confirmMismatch'));\n            return;\n        }\n        setIsDeleteDialogOpen(false);\n        setReauthPassword('');\n        setReauthError('');\n        setIsReauthDialogOpen(true);\n    }, [confirmPhrase, t]);\n\n    // Process the actual deletion\n    const processAccountDeletion = useCallback(async () => {\n        setIsProcessingDelete(true);\n        try {\n            // Call the deletion API\n            const result = await deleteAccount({\n                reason: 'User requested account deletion from profile settings'\n            });\n\n            if (result.success) {\n                showNotification(t('settings.accountDeletion.success'), 'success');\n                // Log out and redirect\n                await logout();\n                window.location.href = '/';\n            } else {\n                throw new Error(result.message || 'Deletion failed');\n            }\n        } catch (error) {\n            console.error('Error deleting account:', error);\n            showNotification(t('settings.accountDeletion.error') + ': ' + error.message, 'error');\n        } finally {\n            setIsProcessingDelete(false);\n            setIsReauthDialogOpen(false);\n        }\n    }, [showNotification, logout, t]);\n\n    // Handle reauthentication and deletion\n    const handleReauthAndDelete = useCallback(async () => {\n        if (!auth.currentUser) {\n            showNotification(t('errors.notLoggedIn'), 'error');\n            return;\n        }\n\n        setIsProcessingDelete(true);\n        setReauthError('');\n\n        try {\n            if (authProvider === 'google.com') {\n                // Re-authenticate with Google\n                const provider = new GoogleAuthProvider();\n                await signInWithPopup(auth, provider);\n            } else {\n                // Re-authenticate with password\n                if (!reauthPassword) {\n                    setReauthError(t('validation.required'));\n                    setIsProcessingDelete(false);\n                    return;\n                }\n                const credential = EmailAuthProvider.credential(\n                    auth.currentUser.email,\n                    reauthPassword\n                );\n                await reauthenticateWithCredential(auth.currentUser, credential);\n            }\n\n            // Now process the deletion\n            await processAccountDeletion();\n\n        } catch (error) {\n            console.error('Error during reauthentication:', error);\n            if (error.code === 'auth/wrong-password') {\n                setReauthError(t('accountBasics.errors.wrongPassword'));\n            } else if (error.code === 'auth/too-many-requests') {\n                showNotification(t('errors.tooManyRequests'), 'error');\n            } else if (error.code === 'auth/popup-closed-by-user' || error.code === 'auth/cancelled-popup-request') {\n                showNotification(t('errors.popupClosed'), 'info');\n            } else {\n                setReauthError(t('accountBasics.errors.deleteFailed'));\n            }\n            setIsProcessingDelete(false);\n        }\n    }, [authProvider, reauthPassword, processAccountDeletion, showNotification, t]);\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Deletion Preview Section */}\n            {isLoadingPreview ? (\n                <div className=\"bg-card rounded-xl border border-border/60 p-6 shadow-sm\">\n                    <div className=\"flex items-center gap-3 text-muted-foreground\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent\" />\n                        <span className=\"text-sm\">{t('settings.accountDeletion.loadingPreview')}</span>\n                    </div>\n                </div>\n            ) : deletionPreview && (\n                <div className=\"bg-card rounded-xl border border-border/60 p-6 shadow-sm\">\n                    <h3 className=\"text-sm font-medium m-0 mb-4\" style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>\n                        {t('settings.accountDeletion.previewTitle')}\n                    </h3>\n\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                        {/* What will be deleted */}\n                        <div className=\"space-y-3\">\n                            <div className=\"flex items-center gap-2 text-destructive font-medium text-sm\">\n                                <FiX className=\"w-4 h-4\" />\n                                {t('settings.accountDeletion.immediatelyDeleted')}\n                            </div>\n                            <ul className=\"space-y-2 text-sm text-muted-foreground pl-6\">\n                                {deletionPreview.whatWillBeDeleted?.map((item, index) => (\n                                    <li key={index} className=\"list-disc\">{item}</li>\n                                ))}\n                            </ul>\n                        </div>\n\n                        {/* What will be retained */}\n                        {deletionPreview.hasLegalRecords && (\n                            <div className=\"space-y-3\">\n                                <div className=\"flex items-center gap-2 text-amber-600 dark:text-amber-400 font-medium text-sm\">\n                                    <FiArchive className=\"w-4 h-4\" />\n                                    {t('settings.accountDeletion.retainedForLegalReasons')}\n                                </div>\n                                <ul className=\"space-y-2 text-sm text-muted-foreground pl-6\">\n                                    {deletionPreview.whatWillBeRetained?.map((item, index) => (\n                                        <li key={index} className=\"list-disc\">{item}</li>\n                                    ))}\n                                </ul>\n                                {deletionPreview.retentionPeriod && (\n                                    <p className=\"text-xs text-muted-foreground italic mt-2 pl-6\">\n                                        {t('settings.accountDeletion.retentionPeriod')}: {deletionPreview.retentionPeriod}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Legal notice */}\n                    {deletionPreview.hasLegalRecords ? (\n                        <div className=\"mt-4 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-800\">\n                            <p className=\"text-xs text-amber-800 dark:text-amber-200\">\n                                <FiLock className=\"inline w-3 h-3 mr-1\" />\n                                {t('settings.accountDeletion.swissLawNotice')}\n                            </p>\n                        </div>\n                    ) : (\n                        <div className=\"mt-4 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800\">\n                            <p className=\"text-xs text-green-800 dark:text-green-200\">\n                                <FiCheck className=\"inline w-3 h-3 mr-1\" />\n                                {t('settings.accountDeletion.noLegalRecords')}\n                            </p>\n                        </div>\n                    )}\n                </div>\n            )}\n\n            {/* Danger Zone - Delete Account */}\n            <div className=\"bg-red-50/50 dark:bg-red-950/10 rounded-xl border border-red-100 dark:border-red-900/30 p-6 shadow-sm\">\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6\">\n                    <div className=\"flex items-start gap-4 flex-1\">\n                        <div className=\"p-2 rounded-lg bg-white text-red-600 dark:text-red-400 shrink-0\">\n                            <FiAlertTriangle className=\"w-5 h-5\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"text-sm font-medium m-0 text-red-600 dark:text-red-400\" style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>\n                                {t('settings.dangerZone')}\n                            </h3>\n                            <h4 className=\"font-medium text-foreground mt-2 mb-1\">\n                                {t('settings.accountDeletion.title')}\n                            </h4>\n                            <p className=\"text-sm text-muted-foreground\">\n                                {t('settings.accountDeletion.description')}\n                            </p>\n                        </div>\n                    </div>\n                    <div className=\"shrink-0 md:ml-4\">\n                        <Button\n                            onClick={handleDeleteClick}\n                            disabled={isProcessingDelete}\n                            variant=\"danger\"\n                            size=\"sm\"\n                            icon={<FiTrash2 />}\n                        >\n                            {t('settings.accountDeletion.deleteButton')}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n\n            {/* Confirmation Dialog */}\n            <Dialog\n                isOpen={isDeleteDialogOpen}\n                onClose={() => setIsDeleteDialogOpen(false)}\n                title={t('settings.accountDeletion.confirmTitle')}\n                size=\"small\"\n                messageType=\"warning\"\n                actions={\n                    <>\n                        <Button\n                            onClick={() => setIsDeleteDialogOpen(false)}\n                            variant=\"secondary\"\n                            disabled={isProcessingDelete}\n                        >\n                            {t('common.cancel')}\n                        </Button>\n                        <Button\n                            onClick={handleConfirmDelete}\n                            variant=\"danger\"\n                            disabled={isProcessingDelete || confirmPhrase !== 'DELETE MY ACCOUNT'}\n                        >\n                            {t('accountBasics.confirmDelete')}\n                        </Button>\n                    </>\n                }\n            >\n                <div className=\"space-y-4\">\n                    <p className=\"font-bold text-red-600\">{t('accountBasics.deleteWarningPermanent')}</p>\n                    <p>{t('settings.accountDeletion.confirmMessage')}</p>\n                    <PersonnalizedInputField\n                        name=\"confirmPhrase\"\n                        value={confirmPhrase}\n                        onChange={(e) => {\n                            setConfirmPhrase(e.target.value);\n                            if (confirmError) setConfirmError('');\n                        }}\n                        placeholder={t('settings.accountDeletion.confirmPlaceholder')}\n                        error={confirmError}\n                    />\n                </div>\n            </Dialog>\n\n            {/* Reauthentication Dialog */}\n            <Dialog\n                isOpen={isReauthDialogOpen}\n                onClose={() => {\n                    setIsReauthDialogOpen(false);\n                    setReauthPassword('');\n                    setReauthError('');\n                }}\n                title={t('settings.accountDeletion.reauthTitle')}\n                size=\"small\"\n                messageType=\"warning\"\n                actions={\n                    <>\n                        <Button\n                            onClick={() => {\n                                setIsReauthDialogOpen(false);\n                                setReauthPassword('');\n                                setReauthError('');\n                            }}\n                            variant=\"secondary\"\n                            disabled={isProcessingDelete}\n                        >\n                            {t('common.cancel')}\n                        </Button>\n                        <Button\n                            onClick={handleReauthAndDelete}\n                            variant=\"danger\"\n                            disabled={isProcessingDelete || (authProvider !== 'google.com' && !reauthPassword)}\n                        >\n                            {isProcessingDelete\n                                ? t('settings.accountDeletion.processing')\n                                : t('accountBasics.confirmDeleteAccount')}\n                        </Button>\n                    </>\n                }\n            >\n                <div className=\"space-y-4\">\n                    <p>\n                        {authProvider === 'google.com'\n                            ? t('settings.accountDeletion.reauthMessageGoogle')\n                            : t('settings.accountDeletion.reauthMessage')}\n                    </p>\n                    {authProvider !== 'google.com' && (\n                        <InputFieldHideUnhide\n                            label={t('accountBasics.password')}\n                            name=\"reauthPassword\"\n                            value={reauthPassword}\n                            onChange={(e) => {\n                                setReauthPassword(e.target.value);\n                                if (reauthError) setReauthError('');\n                            }}\n                            error={reauthError}\n                            type=\"password\"\n                            showErrors={true}\n                        />\n                    )}\n                </div>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default AccountDeletion;\n","// FILE: /src/pages/dashboard/profile/professionals/components/Settings.js\n// VERSION: Config-Driven - Updated for Firebase Database Organization\n\nimport React, { useMemo, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport { FiSettings, FiBell, FiShield, FiGlobe, FiClock, FiUserX } from 'react-icons/fi';\n\n// Account Deletion Component (Swiss nFADP/GDPR compliant)\nimport AccountDeletion from '../../components/AccountDeletion';\n\n// --- Import Base Components (Adjust Paths) ---\nimport CheckboxField from '../../../../../components/BoxedInputFields/CheckboxField';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport InputField from '../../../../../components/BoxedInputFields/Personnalized-InputField';\nimport TextareaField from '../../../../../components/BoxedInputFields/TextareaField';\nimport Button from '../../../../../components/BoxedInputFields/Button';\nimport Switch from '../../../../../components/BoxedInputFields/Switch';\n\n// Import the dropdown options hook\nimport { useDropdownOptions } from '../../utils/DropdownListsImports';\n\n\n// Tailwind styles\nconst styles = {\n  sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n  headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n  sectionTitle: \"text-2xl font-semibold mb-2\",\n  sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n  subtitleRow: \"flex items-end justify-between gap-4\",\n  mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n  mandatoryMark: \"text-destructive\",\n  sectionsWrapper: \"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto\",\n  leftColumn: \"flex flex-col gap-6 flex-1\",\n  rightColumn: \"flex flex-col gap-6 flex-1\",\n  sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n  cardHeader: \"flex items-center gap-4 mb-0\",\n  cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n  cardTitle: \"flex-1\",\n  cardTitleH3: \"m-0\",\n  cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  grid: \"grid grid-cols-1 gap-6\",\n  fieldWrapper: \"space-y-2\",\n  fullWidth: \"md:col-span-2\",\n  formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\"\n};\n\nconst Settings = ({\n  formData,\n  config,\n  errors,\n  isSubmitting,\n  onInputChange,\n  onSaveAndContinue,\n  onCancel,\n  getNestedValue,\n}) => {\n  const { t, i18n } = useTranslation(['dashboardProfile', 'dropdowns', 'common', 'validation']);\n\n  // Use the dropdown options hook\n  const dropdownOptionsFromHook = useDropdownOptions();\n\n  const fieldsToRender = useMemo(() => config?.fields?.settings || [], [config]);\n\n  // Handle cancel with page reload\n  const handleCancel = useCallback(() => {\n    // First call the original onCancel handler if provided\n    if (onCancel) {\n      onCancel();\n    }\n\n    // Then reload the page\n    window.location.reload();\n  }, [onCancel]);\n\n  const getDropdownOptions = useCallback((optionsKey) => {\n    // Handle special cases for optionsKey mapping\n    const mappedOptionsKey = optionsKey === 'educationLevels' ? 'education' : optionsKey;\n\n    // First try using the hook with mapped key\n    const suffixedKey = `${mappedOptionsKey}Options`;\n    const optionsFromHook = dropdownOptionsFromHook[suffixedKey];\n    if (optionsFromHook && optionsFromHook.length > 0) {\n      return optionsFromHook;\n    }\n\n    // Try direct access to translations\n    const dropdownTranslations = i18n.getResourceBundle(i18n.language, 'dropdowns');\n    if (dropdownTranslations) {\n      // First try the original key\n      if (dropdownTranslations[optionsKey]) {\n        return Object.entries(dropdownTranslations[optionsKey]).map(([key, value]) => ({\n          value: key,\n          label: value\n        }));\n      }\n      // Then try the mapped key if different\n      if (mappedOptionsKey !== optionsKey && dropdownTranslations[mappedOptionsKey]) {\n        return Object.entries(dropdownTranslations[mappedOptionsKey]).map(([key, value]) => ({\n          value: key,\n          label: value\n        }));\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(`No options found for key: ${optionsKey} (mapped to: ${mappedOptionsKey})`);\n    }\n    return [];\n  }, [dropdownOptionsFromHook, i18n]);\n\n  // Helper function to check dependency conditions from config\n  const checkDependency = useCallback((fieldConfig) => {\n    if (!fieldConfig.dependsOn) return true; // No dependency\n\n    const dependentValue = getNestedValue(formData, fieldConfig.dependsOn);\n\n    if (fieldConfig.dependsOnValue) {\n      return fieldConfig.dependsOnValue.includes(dependentValue);\n    }\n    if (fieldConfig.dependsOnValueExclude) {\n      return !fieldConfig.dependsOnValueExclude.includes(dependentValue);\n    }\n    return true; // Default if dependsOn is present but no values specified (shouldn't happen)\n  }, [formData, getNestedValue]);\n\n  // Renders a single field based on its configuration\n  const renderField = (fieldConfig) => {\n    const { name, type, required, labelKey, optionsKey, dependsOn, dependsOnValue, dependsOnValueExclude, maxYear, placeholder, ...restConfig } = fieldConfig;\n\n    // Check dependency before rendering\n    if (!checkDependency(fieldConfig)) {\n      return null;\n    }\n\n    const value = getNestedValue(formData, name);\n    const error = getNestedValue(errors, name);\n    const label = t(labelKey, name);\n\n    // Determine if field is *currently* required based on dependencies\n    let isActuallyRequired = required;\n    if (dependsOn && isActuallyRequired) {\n      if (!checkDependency(fieldConfig)) {\n        isActuallyRequired = false;\n      }\n    }\n    const finalLabel = <>{label} {isActuallyRequired && <span className=\"boxed-inputfield-required\">*</span>}</>;\n\n    // Common props without the key\n    const commonProps = {\n      label: finalLabel,\n      error: error,\n      required: isActuallyRequired,\n      wrapperClassName: styles.fieldWrapper\n    };\n\n    const wrapInput = (component) => (\n      <div key={name} className={classNames(styles.fieldWrapper, { [styles.fullWidth]: type === 'textarea' })}>\n        {component}\n      </div>\n    );\n\n    switch (type) {\n      case 'date':\n        const maxDateValue = maxYear\n          ? new Date(maxYear, 11, 31).toISOString().split('T')[0]\n          : undefined;\n        const dateValue = value ? (typeof value === 'string' ? value : new Date(value).toISOString().split('T')[0]) : '';\n        return wrapInput(\n          <div>\n            {finalLabel && (\n              <label className={`boxed-date-label ${error ? 'boxed-date-label--error' : ''}`}>\n                {finalLabel}\n              </label>\n            )}\n            <input\n              type=\"date\"\n              value={dateValue}\n              onChange={(e) => onInputChange(name, e.target.value || null)}\n              max={maxDateValue}\n              className={`w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ${error ? 'date-input-error' : ''}`}\n              style={{\n                fontFamily: 'var(--font-family-text, Roboto, sans-serif)',\n                borderColor: error ? 'var(--red-3)' : 'hsl(var(--border) / 0.6)',\n                color: error ? 'var(--red-3)' : 'inherit'\n              }}\n            />\n          </div>\n        );\n      case 'dropdown':\n        const options = getDropdownOptions(optionsKey);\n\n        // Debug option loading issues\n        if (options.length === 0 && process.env.NODE_ENV !== 'production') {\n          console.warn(`No options found for dropdown ${name} with optionsKey ${optionsKey}`);\n        }\n\n        return wrapInput(\n          <SimpleDropdown\n            key={name}\n            label={commonProps.label}\n            options={options}\n            value={value}\n            onChange={(newValue) => {\n              console.log('SimpleDropdown onChange:', { name, newValue });\n              onInputChange(name, newValue);\n            }}\n            placeholder={placeholder || t('common.selectPlaceholder', 'Select...')}\n            required={commonProps.required}\n            error={commonProps.error}\n          />\n        );\n      case 'checkbox':\n        // Use Switch for notification group AND marketplace group (requested by user)\n        if (fieldConfig.group === 'notifications' || fieldConfig.group === 'marketplace') {\n          return wrapInput(\n            <Switch\n              key={name}\n              label={label}\n              checked={!!value}\n              onChange={(newValue) => onInputChange(name, newValue)}\n              marginBottom=\"0\"\n            />\n          );\n        }\n        // Pass label without mandatory mark styling for checkbox itself\n        return wrapInput(\n          <CheckboxField\n            key={name}\n            {...commonProps}\n            label={label}\n            checked={!!value}\n            onChange={(e) => onInputChange(name, e.target.checked)}\n          />\n        );\n      case 'textarea':\n        return wrapInput(\n          <TextareaField\n            key={name}\n            {...commonProps}\n            value={value || ''}\n            onChange={(e) => onInputChange(name, e.target.value)}\n            placeholder={placeholder}\n            maxLength={restConfig.maxLength}\n          />\n        );\n      case 'text':\n      case 'number':\n      default:\n        return wrapInput(\n          <InputField\n            key={name}\n            {...commonProps}\n            name={name}\n            type={type === 'number' ? 'number' : 'text'}\n            value={value || ''}\n            onChange={(e) => onInputChange(name, e.target.value)}\n            min={type === 'number' ? restConfig.min : undefined}\n            max={type === 'number' ? restConfig.max : undefined}\n            placeholder={placeholder}\n          />\n        );\n    }\n  };\n\n  // --- Component Render ---\n  // Group fields by 'group' property from config for better structure\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    fieldsToRender.forEach(field => {\n      const groupName = field.group || 'general';\n      if (!groups[groupName]) {\n        groups[groupName] = [];\n      }\n      groups[groupName].push(field);\n    });\n    return groups;\n  }, [fieldsToRender]);\n\n  // Separate notes field from platform settings\n  const platformSettingsWithoutNotes = useMemo(() => {\n    return groupedFields.platformSettings?.filter(field =>\n      field.name !== 'platformSettings.detailedAvailability.notes'\n    ) || [];\n  }, [groupedFields.platformSettings]);\n\n  const notesField = useMemo(() => {\n    return groupedFields.platformSettings?.find(field =>\n      field.name === 'platformSettings.detailedAvailability.notes'\n    );\n  }, [groupedFields.platformSettings]);\n\n  return (\n    <div className={styles.sectionContainer}>\n      <div className={styles.headerCard}>\n        <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('settings.title')}</h2>\n        <div className={styles.subtitleRow}>\n          <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('settings.subtitle')}</p>\n          <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n        </div>\n      </div>\n\n      {/* Two Column Flexbox Layout */}\n      <div className={styles.sectionsWrapper}>\n        {/* Left Column */}\n        <div className={styles.leftColumn}>\n          {/* Platform Settings */}\n          {platformSettingsWithoutNotes.length > 0 && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiSettings /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.platformSettingsTitle')}</h3>\n                  </div>\n                </div>\n                {platformSettingsWithoutNotes.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {/* Privacy Settings */}\n          {groupedFields.privacy && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiShield /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.privacySettingsTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.privacy.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {/* Marketplace Settings */}\n          {groupedFields.marketplace && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiGlobe /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.marketplaceSettingsTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.marketplace.map(renderField)}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Right Column */}\n        <div className={styles.rightColumn}>\n          {/* Availability Settings */}\n          {groupedFields.availability && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiClock /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.availabilitySettingsTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.availability.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {/* Notification Preferences */}\n          {groupedFields.notifications && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiBell /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.notificationPreferencesTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.notifications.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {/* Notes Section */}\n          {notesField && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiClock /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.availabilityNotes')}</h3>\n                  </div>\n                </div>\n                {renderField(notesField)}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Account Management Section */}\n      <div className=\"w-full max-w-[1000px] mx-auto\">\n        <div className={styles.sectionCard}>\n          <div className={styles.cardHeader}>\n            <div className={styles.cardIconWrapper}><FiUserX /></div>\n            <div className={styles.cardTitle}>\n              <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.accountDeletion.title', 'Account Management')}</h3>\n            </div>\n          </div>\n          <div className=\"mt-4\">\n            <AccountDeletion />\n          </div>\n        </div>\n      </div>\n\n      {/* --- Action Buttons --- */}\n      <div className={styles.sectionCard}>\n        <div className={styles.formActions} style={{ marginTop: 0 }}>\n          <Button onClick={handleCancel} variant=\"secondary\" disabled={isSubmitting}>\n            {t('common.cancel')}\n          </Button>\n          <Button onClick={onSaveAndContinue} variant=\"confirmation\" disabled={isSubmitting}>\n            {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSettings.propTypes = {\n  formData: PropTypes.object.isRequired,\n  config: PropTypes.shape({\n    fields: PropTypes.shape({\n      settings: PropTypes.array\n    })\n  }).isRequired,\n  errors: PropTypes.object.isRequired,\n  isSubmitting: PropTypes.bool.isRequired,\n  onInputChange: PropTypes.func.isRequired,\n  onSaveAndContinue: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  getNestedValue: PropTypes.func.isRequired\n};\n\nexport default Settings;\n","// FILE: /src/pages/dashboard/profile/facilities/components/FacilityDetails.js\n// Renders sections like Facility Core Details, Legal/Billing, Facility Documents\n\nimport React, { useMemo, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { FiUser, FiMapPin, FiInfo, FiFileText, FiBriefcase, FiCreditCard, FiHome } from 'react-icons/fi';\n\n// --- Import Base Components ---\nimport InputField from '../../../../../components/BoxedInputFields/Personnalized-InputField';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport Button from '../../../../../components/BoxedInputFields/Button';\n\n// Import the dropdown options hook\nimport { useDropdownOptions } from '../../utils/DropdownListsImports';\n\n// Tailwind styles (copied from PersonalDetails.js to ensure consistency)\nconst styles = {\n  sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n  headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n  sectionTitle: \"text-2xl font-semibold mb-0\",\n  sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n  subtitleRow: \"flex items-end justify-between gap-4\",\n  mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n  mandatoryMark: \"text-destructive\",\n  sectionsWrapper: \"facility-details-sections-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto\",\n  leftColumn: \"flex flex-col gap-6 flex-1\",\n  rightColumn: \"flex flex-col gap-6 flex-1\",\n  sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n  cardHeader: \"flex items-center gap-4 mb-0\",\n  cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n  cardTitle: \"flex-1\",\n  cardTitleH3: \"m-0\",\n  cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  grid: \"grid grid-cols-1 gap-6\",\n  fieldWrapper: \"space-y-2\",\n  fullWidth: \"md:col-span-2\",\n  formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\"\n};\n\nconst FacilityDetails = ({\n  activeTab,\n  formData,\n  config,\n  errors,\n  isSubmitting,\n  onInputChange,\n  onSaveAndContinue,\n  onCancel,\n  getNestedValue,\n}) => {\n  const { t, i18n } = useTranslation(['dashboardProfile', 'dropdowns', 'validation', 'common']);\n\n  // Get dropdown options using the hook\n  const dropdownOptionsFromHook = useDropdownOptions();\n\n  // Memoize the fields to render for the currently active facility sub-tab\n  const fieldsToRender = useMemo(() => {\n    if (!config || !activeTab || !config.fields || !config.fields[activeTab]) {\n      return [];\n    }\n    return config.fields[activeTab];\n  }, [config, activeTab]);\n\n  // Get options from translations if available\n  const getDropdownOptions = useCallback((optionsKey) => {\n    // First try using the hook with the standard naming convention\n    const optionsFromHook = dropdownOptionsFromHook[`${optionsKey}Options`];\n    if (optionsFromHook && optionsFromHook.length > 0) {\n      return optionsFromHook;\n    }\n\n    // Try the hook with legacy naming (no 's' at the end)\n    const legacyOptionName = `${optionsKey.replace(/s$/, '')}Options`;\n    const legacyOptionsFromHook = dropdownOptionsFromHook[legacyOptionName];\n    if (legacyOptionsFromHook && legacyOptionsFromHook.length > 0) {\n      return legacyOptionsFromHook;\n    }\n\n    // Then try direct access to translations\n    const dropdownTranslations = i18n.getResourceBundle(i18n.language, 'dropdowns');\n    if (dropdownTranslations && dropdownTranslations[optionsKey]) {\n      const directOptions = Object.entries(dropdownTranslations[optionsKey]).map(([key, value]) => ({\n        value: key,\n        label: value\n      }));\n      if (directOptions.length > 0) {\n        return directOptions;\n      }\n    }\n\n    // Finally, check in config\n    return getNestedValue(config?.dropdownOptionsResolved, optionsKey) || [];\n  }, [config, getNestedValue, dropdownOptionsFromHook, i18n]);\n\n  const checkDependency = useCallback((fieldConfig) => {\n    if (!fieldConfig.dependsOn) return true;\n    const dependentValue = getNestedValue(formData, fieldConfig.dependsOn);\n    if (fieldConfig.dependsOnValue) return fieldConfig.dependsOnValue.includes(dependentValue);\n    if (fieldConfig.dependsOnValueExclude) return !fieldConfig.dependsOnValueExclude.includes(dependentValue);\n    return true;\n  }, [formData, getNestedValue]);\n\n  // Renders a single field\n  const renderField = (fieldConfig) => {\n    const { name, type, required, labelKey, optionsKey, placeholderKey, infoKey, dependsOn } = fieldConfig;\n\n    if (!checkDependency(fieldConfig)) return null;\n\n    const value = getNestedValue(formData, name);\n    const error = getNestedValue(errors, name);\n    const label = t(labelKey, name);\n    const placeholder = placeholderKey ? t(placeholderKey) : t('common.selectPlaceholder', 'Select...');\n    const fieldKey = name;\n\n    let isActuallyRequired = required;\n    if (dependsOn && isActuallyRequired && !checkDependency(fieldConfig)) {\n      isActuallyRequired = false;\n    }\n\n    const commonProps = {\n      label: label,\n      error: error,\n      required: isActuallyRequired,\n      wrapperClassName: styles.fieldWrapper\n    };\n\n    if (type === 'date') {\n      const maxDate = name.includes('dateOfBirth')\n        ? new Date(new Date().setFullYear(new Date().getFullYear() - 18)).toISOString().split('T')[0]\n        : undefined;\n      const dateValue = value ? (typeof value === 'string' ? value : new Date(value).toISOString().split('T')[0]) : '';\n\n      return (\n        <div key={fieldKey} className={styles.fieldWrapper}>\n          {commonProps.label && (\n            <label className={`boxed-date-label ${error ? 'boxed-date-label--error' : ''}`}>\n              {commonProps.label}\n            </label>\n          )}\n          <input\n            type=\"date\"\n            value={dateValue}\n            onChange={(e) => onInputChange(name, e.target.value || null)}\n            max={maxDate}\n            className={`w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ${error ? 'date-input-error' : ''}`}\n            style={{\n              fontFamily: 'var(--font-family-text, Roboto, sans-serif)',\n              borderColor: error ? 'var(--boxed-inputfield-error-color)' : 'hsl(var(--border) / 0.6)',\n              color: error ? 'var(--boxed-inputfield-error-color)' : 'inherit'\n            }}\n          />\n        </div>\n      );\n    }\n\n    if (type === 'dropdown') {\n      const options = getDropdownOptions(optionsKey);\n\n      if (options.length === 0 && process.env.NODE_ENV !== 'production') {\n        console.warn(`No options found for dropdown ${name} with optionsKey ${optionsKey}`);\n      }\n\n      // Improve selection logic (copied from original)\n      let selectedOption = null;\n      if (value !== null && value !== undefined && value !== '') {\n        selectedOption = options.find(opt => opt.value === value);\n        if (!selectedOption) {\n          selectedOption = options.find(opt => String(opt.value) === String(value));\n        }\n      }\n\n      return (\n        <div key={fieldKey} className={styles.fieldWrapper}>\n          <SimpleDropdown\n            label={commonProps.label}\n            options={options}\n            value={value}\n            onChange={(newValue) => {\n              onInputChange(name, newValue);\n            }}\n            placeholder={placeholder || t('common.selectPlaceholder', 'Select...')}\n            required={commonProps.required}\n            error={commonProps.error}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div key={fieldKey} className={styles.fieldWrapper}>\n        <InputField\n          key={name}\n          {...commonProps}\n          name={name}\n          type={type === 'url' ? 'url' : (type === 'email' ? 'email' : (type === 'tel' ? 'tel' : 'text'))}\n          value={value || ''}\n          onChange={e => onInputChange(name, e.target.value)}\n          infoText={infoKey ? t(infoKey) : undefined}\n          placeholder={placeholder}\n        />\n      </div>\n    );\n  };\n\n  // Group fields by 'group' property from config for better structure\n  const groupedFields = useMemo(() => {\n    // Default grouping for core details if not specified\n    const fields = fieldsToRender;\n    const groups = {};\n    const order = ['general', 'address', 'legal', 'legalRep', 'billing', 'bankingFacility'];\n\n    fields.forEach(field => {\n      let groupName = field.group;\n      if (!groupName) {\n        // Infer group if not present\n        if (field.name.startsWith('address')) groupName = 'address';\n        else if (field.name.startsWith('legalRepresentative')) groupName = 'legalRep';\n        else if (field.name.startsWith('billingContact')) groupName = 'billing';\n        else if (field.name.startsWith('facilityIBAN') || field.name.startsWith('facilityBank')) groupName = 'bankingFacility';\n        else groupName = 'general';\n      }\n\n      if (!groups[groupName]) groups[groupName] = [];\n      groups[groupName].push(field);\n    });\n\n    // Sort keys based on defined order\n    const sortedKeys = Object.keys(groups).sort((a, b) => {\n      const indexA = order.indexOf(a);\n      const indexB = order.indexOf(b);\n      if (indexA !== -1 && indexB !== -1) return indexA - indexB;\n      if (indexA !== -1) return -1;\n      if (indexB !== -1) return 1;\n      return a.localeCompare(b);\n    });\n\n    return sortedKeys.map(key => ({\n      key: key,\n      fields: groups[key]\n    }));\n  }, [fieldsToRender]);\n\n  const currentTabConfig = config?.tabs?.find(tab => tab.id === activeTab);\n\n  const getGroupIcon = (groupKey) => {\n    switch (groupKey) {\n      case 'general': return <FiHome />;\n      case 'address': return <FiMapPin />;\n      case 'legal': return <FiBriefcase />;\n      case 'legalRep': return <FiUser />;\n      case 'billing': return <FiFileText />;\n      case 'bankingFacility': return <FiCreditCard />;\n      default: return <FiInfo />;\n    }\n  };\n\n  const getGroupTitle = (groupKey) => {\n    if (groupKey === 'legalRep') return t('facilityDetails.groupTitle_legalRep', 'Responsible Person');\n\n    // If translations exist for group titles, use them, otherwise fallback\n    const key = `facilityDetails.groupTitle_${groupKey}`;\n    const fallback = groupKey.replace(/([A-Z])/g, ' $1').trim().replace(/^\\w/, c => c.toUpperCase());\n    return t(key, fallback);\n  };\n\n  return (\n    <>\n      <style>{`\n        .facility-details-container {\n          container-type: inline-size;\n        }\n        @container (min-width: 700px) {\n          .facility-details-sections-wrapper {\n            flex-direction: row;\n          }\n        }\n      `}</style>\n      <div className={`${styles.sectionContainer} facility-details-container`}>\n        {/* Title Card */}\n        <div className={styles.headerCard}>\n          <div className=\"flex-1\">\n            <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{currentTabConfig ? t(currentTabConfig.labelKey) : activeTab}</h2>\n            <div className={styles.subtitleRow}>\n              <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('facilityDetails.subtitle', 'Please ensure facility details are accurate and up to date.')}</p>\n              <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.sectionsWrapper}>\n          {/* Logic to split groups into columns - simplistic approach: odd/even or specific groups */}\n          <div className={styles.leftColumn}>\n            {groupedFields.filter((_, i) => i % 2 === 0).map((group) => (\n              <div key={group.key} className={styles.sectionCard}>\n                <div className={styles.grid}>\n                  <div className={styles.cardHeader}>\n                    <div className={styles.cardIconWrapper}>\n                      {getGroupIcon(group.key)}\n                    </div>\n                    <div className={styles.cardTitle}>\n                      <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{getGroupTitle(group.key)}</h3>\n                    </div>\n                  </div>\n                  {group.fields.map(field => renderField(field))}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className={styles.rightColumn}>\n            {groupedFields.filter((_, i) => i % 2 !== 0).map((group) => (\n              <div key={group.key} className={styles.sectionCard}>\n                <div className={styles.grid}>\n                  <div className={styles.cardHeader}>\n                    <div className={styles.cardIconWrapper}>\n                      {getGroupIcon(group.key)}\n                    </div>\n                    <div className={styles.cardTitle}>\n                      <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{getGroupTitle(group.key)}</h3>\n                    </div>\n                  </div>\n                  {group.fields.map(field => renderField(field))}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className={styles.formActions}>\n          <Button onClick={onCancel} variant=\"secondary\" disabled={isSubmitting}>\n            {t('common.cancel')}\n          </Button>\n          <Button onClick={onSaveAndContinue} variant=\"confirmation\" disabled={isSubmitting}>\n            {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default FacilityDetails;","// FILE: /src/pages/dashboard/profile/facilities/components/DocumentUploads.js\n// Renders the facility document upload section\n\nimport React, { useState, useMemo, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { get } from 'lodash';\nimport { FiEdit, FiTrash2, FiFileText, FiUploadCloud, FiCheckCircle } from 'react-icons/fi';\n\n// --- Import Base Components ---\nimport Button from '../../../../../components/BoxedInputFields/Button';\nimport UploadFile from '../../../../../components/BoxedInputFields/UploadFile';\n\n// --- Import Storage Service ---\nimport { uploadFile } from '../../../../../services/storageService';\n\n// Tailwind styles (copied from Professional DocumentUploads.js)\nconst styles = {\n    sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n    headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n    sectionTitle: \"text-2xl font-semibold mb-2\",\n    sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n    sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n    subtitleRow: \"flex items-end justify-between gap-4\",\n    mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n    mandatoryMark: \"text-destructive\",\n    sectionsWrapper: \"facility-uploads-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto\",\n    leftColumn: \"flex flex-col gap-6 flex-1\",\n    rightColumn: \"flex flex-col gap-6 flex-1\",\n    sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n    cardHeader: \"flex items-center gap-4 mb-0\",\n    cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n    cardTitle: \"flex-1\",\n    cardTitleH3: \"m-0\",\n    cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n    formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\",\n    sectionContent: \"space-y-4\",\n    errorText: \"text-destructive text-sm mt-2\",\n    errorUpload: \"border-destructive\"\n};\n\nconst useFileUpload = () => {\n    const [uploadState, setUploadState] = useState({ isLoading: false, progress: 0, error: null, type: null });\n\n    const upload = async (file, path, docType) => {\n        setUploadState({ isLoading: true, progress: 0, error: null, type: docType });\n\n        try {\n            const downloadURL = await uploadFile(file, path, (progress) => {\n                setUploadState(prev => ({\n                    ...prev,\n                    progress: prev.type === docType ? progress : prev.progress\n                }));\n            });\n\n            setUploadState({ isLoading: false, progress: 0, error: null, type: null });\n            console.log(`Upload complete for ${docType}: ${downloadURL}`);\n            return downloadURL;\n        } catch (error) {\n            console.error(`Error uploading ${docType}:`, error);\n            setUploadState({\n                isLoading: false,\n                progress: 0,\n                error: error.message || 'Upload failed',\n                type: docType\n            });\n            throw error;\n        }\n    };\n\n    return { upload, uploadState };\n};\n\nconst DocumentUploads = ({\n    formData,\n    config,\n    errors,\n    isSubmitting,\n    onInputChange,\n    onArrayChange,\n    onSaveAndContinue,\n    onCancel,\n    getNestedValue,\n}) => {\n    const { t } = useTranslation(['dashboardProfile', 'common', 'validation']);\n    const { upload, uploadState } = useFileUpload();\n\n    const documentFieldsConfig = useMemo(() => config?.fields?.documentUploads || [], [config]);\n\n    const handleCancel = useCallback(() => {\n        if (onCancel) onCancel();\n    }, [onCancel]);\n\n    const handleFileUpload = useCallback(async (files, fieldConfig) => {\n        if (!files || files.length === 0) return;\n        const file = files[0];\n        const { docType, name: fieldName, isMultiple } = fieldConfig;\n\n        try {\n            const userId = getNestedValue(formData, 'userId') || 'unknown_user';\n            const facilityId = getNestedValue(formData, 'facilityId') || userId;\n            const timestamp = Date.now();\n            const fileExtension = file.name.split('.').pop();\n            const baseName = file.name.substring(0, file.name.lastIndexOf('.')) || file.name;\n            const normalizedFileName = `${baseName.toLowerCase().replace(/[^a-z0-9]/g, '_')}_${timestamp}.${fileExtension}`;\n            const path = `documents/facilities/${facilityId}/${docType}/${normalizedFileName}`;\n            const downloadURL = await upload(file, path, docType);\n\n            const uploadedAt = new Date().toISOString();\n            const fileMetadata = {\n                documentId: `facility_doc_${Date.now()}`,\n                userId: userId,\n                facilityId: facilityId,\n                type: docType,\n                category: docType,\n                fileName: normalizedFileName,\n                originalFileName: file.name,\n                storageUrl: downloadURL,\n                fileSize: file.size,\n                fileType: file.type || 'application/octet-stream',\n                uploadedAt: uploadedAt,\n                status: 'pending_verification'\n            };\n\n            // Update verificationDocumentsProvided array\n            const currentDocs = getNestedValue(formData, 'verification.verificationDocumentsProvided') || [];\n\n            if (isMultiple) {\n                onArrayChange('verification.verificationDocumentsProvided', [...currentDocs, fileMetadata]);\n                const currentUrls = getNestedValue(formData, fieldName) || [];\n                onArrayChange(fieldName, [...currentUrls, downloadURL]);\n            } else {\n                const filteredDocs = currentDocs.filter(doc => doc.type !== docType);\n                onArrayChange('verification.verificationDocumentsProvided', [...filteredDocs, fileMetadata]);\n                onInputChange(fieldName, downloadURL);\n            }\n        } catch (error) {\n            console.error(`Error uploading ${docType}:`, error);\n        }\n    }, [upload, formData, getNestedValue, onInputChange, onArrayChange]);\n\n    const handleRemoveDocument = useCallback((fieldConfig, indexOrUrlToRemove) => {\n        const { name: fieldName, isMultiple, docType } = fieldConfig;\n        const currentDocs = getNestedValue(formData, 'verification.verificationDocumentsProvided') || [];\n\n        if (isMultiple) {\n            const currentUrls = getNestedValue(formData, fieldName) || [];\n            let updatedUrls;\n            let updatedDocs;\n\n            if (typeof indexOrUrlToRemove === 'number') {\n                const docsOfType = currentDocs.filter(doc => doc.type === docType);\n                const docToRemove = docsOfType[indexOrUrlToRemove];\n                updatedDocs = currentDocs.filter(doc => doc !== docToRemove);\n                updatedUrls = currentUrls.filter((_, i) => i !== indexOrUrlToRemove);\n            } else {\n                updatedDocs = currentDocs.filter(doc => doc.storageUrl !== indexOrUrlToRemove);\n                updatedUrls = currentUrls.filter(url => url !== indexOrUrlToRemove);\n            }\n\n            onArrayChange('verification.verificationDocumentsProvided', updatedDocs);\n            onArrayChange(fieldName, updatedUrls);\n        } else {\n            const filteredDocs = currentDocs.filter(doc => doc.type !== docType);\n            onArrayChange('verification.verificationDocumentsProvided', filteredDocs);\n            onInputChange(fieldName, '');\n        }\n    }, [getNestedValue, formData, onInputChange, onArrayChange]);\n\n    const getCurrentFiles = useCallback((fieldConfig) => {\n        const { isMultiple, docType, name } = fieldConfig;\n        // For facilities, we use verificationDocumentsProvided or the field itself\n        // But the previous implementation used 'verification.verificationDocumentsProvided' as the source for the UI to be safe\n        // And also stored just URLs in the specific fieldName for isMultiple.\n        // Let's stick to using verificationDocumentsProvided as source of truth for metadata.\n\n        const allDocs = getNestedValue(formData, 'verification.verificationDocumentsProvided') || [];\n        const docsOfType = allDocs.filter(doc => doc.type === docType);\n\n        if (isMultiple) {\n            return docsOfType.map(doc => ({ url: doc.storageUrl, doc }));\n        } else {\n            // If manual field check is needed (e.g. single url string in fieldName)\n            // But let's trust the array.\n            return docsOfType.length > 0 ? [{ url: docsOfType[0].storageUrl, doc: docsOfType[0] }] : [];\n        }\n    }, [formData, getNestedValue]);\n\n    // Sub-component for rendering\n    const RenderDocumentCard = ({ fieldConfig }) => {\n        const { docType, name: fieldName, required, isMultiple, labelKey, accept } = fieldConfig;\n        const currentFiles = getCurrentFiles(fieldConfig);\n        const error = getNestedValue(errors, fieldName);\n        const label = t(labelKey, docType);\n\n        const isCurrentlyUploading = uploadState.isLoading && uploadState.type === docType;\n        const inputRef = useRef(null);\n\n        const uploadButtonLabel = isMultiple\n            ? t(`documents.add${docType.charAt(0).toUpperCase() + docType.slice(1)}Button`, `Add ${docType}`)\n            : currentFiles.length > 0\n                ? t(`documents.replace${docType.charAt(0).toUpperCase() + docType.slice(1)}Button`, `Replace ${docType}`)\n                : t(`documents.upload${docType.charAt(0).toUpperCase() + docType.slice(1)}Button`, `Upload ${docType}`);\n\n        const renderDocumentItem = (fileData, index) => {\n            const url = fileData.url || fileData;\n            const doc = fileData.doc || null;\n            const getFileNameFromUrl = (url) => {\n                if (!url) return '';\n                try {\n                    const path = new URL(url).pathname;\n                    const parts = path.split('/');\n                    return decodeURIComponent(parts[parts.length - 1]);\n                } catch (e) {\n                    const parts = url.split('/');\n                    return parts[parts.length - 1];\n                }\n            };\n            const fileName = doc?.originalFileName || getFileNameFromUrl(url);\n\n            return (\n                <div key={url || index} style={{ display: 'flex', alignItems: 'center', padding: 0, margin: 0 }}>\n                    <div style={{\n                        width: '32px',\n                        height: '32px',\n                        color: 'hsl(var(--foreground))',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        marginRight: '0.75rem'\n                    }}>\n                        <FiFileText />\n                    </div>\n                    <div style={{ flex: 1, minWidth: 0 }}>\n                        <p style={{ margin: 0, fontWeight: 500, fontSize: 'var(--font-size-small)', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }} title={fileName}>{fileName}</p>\n                        <p style={{ margin: 0, fontSize: '0.75rem', color: 'hsl(var(--muted-foreground))', display: 'flex', alignItems: 'center', gap: '4px' }}>\n                            <FiCheckCircle size={12} /> {t('common.uploaded')}\n                        </p>\n                    </div>\n                    <div style={{ display: 'flex', gap: '0.75rem' }}>\n                        <button\n                            onClick={() => inputRef.current && inputRef.current.click()}\n                            className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors\"\n                            title={t('documents.replace')}\n                            aria-label={t('documents.replace')}\n                        >\n                            <FiEdit className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                            onClick={() => {\n                                const urlToRemove = url;\n                                handleRemoveDocument(fieldConfig, isMultiple ? index : urlToRemove);\n                            }}\n                            className=\"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors\"\n                            title={t('documents.remove')}\n                            aria-label={t('documents.remove')}\n                        >\n                            <FiTrash2 className=\"w-4 h-4\" />\n                        </button>\n                    </div>\n                </div>\n            );\n        };\n\n        return (\n            <div className={styles.sectionCard}>\n                <div className={styles.sectionContent}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '1rem' }}>\n                        <div className={styles.cardIconWrapper}><FiUploadCloud /></div>\n                        <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>\n                            {label} {required && <span className={styles.mandatoryMark}>*</span>}\n                        </h3>\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: 0, paddingBottom: (!isMultiple && currentFiles.length === 1) ? 0 : undefined }}>\n                        {isMultiple\n                            ? currentFiles.map((fileData, index) => {\n                                const url = fileData.url || fileData;\n                                return (\n                                    <React.Fragment key={url || index}>\n                                        {renderDocumentItem(fileData, index)}\n                                        {index < currentFiles.length - 1 && (\n                                            <div style={{ height: '1px', backgroundColor: 'hsl(var(--border) / 0.3)', margin: '0.5rem 0' }} />\n                                        )}\n                                    </React.Fragment>\n                                );\n                            })\n                            : currentFiles.length > 0 ? renderDocumentItem(currentFiles[0], 0) : null\n                        }\n                    </div>\n\n                    <div style={{ marginTop: (currentFiles.length === 0) ? 0 : ((!isMultiple && currentFiles.length === 1) ? 0 : '1.5rem') }}>\n                        {/* Always show auto-hidden file input for replace actions */}\n                        {/* If single file already uploaded and not multiple, we only show button if we want to expose 'replace' via big button too, but we have icon button.\n                              However, Professional component SHOWS the button (UploadFile) as well or logic to handle it.\n                              In Professional component:\n                              isMultiple || currentFiles.length === 0 ? <UploadFile...> : <><input hidden ... /></>\n                              If single file exists, it shows the replace icon button which triggers input.\n                           */}\n\n                        {isMultiple || currentFiles.length === 0 ? (\n                            <UploadFile\n                                ref={inputRef}\n                                onChange={(files) => handleFileUpload(files, fieldConfig)}\n                                isLoading={isCurrentlyUploading}\n                                progress={isCurrentlyUploading ? uploadState.progress : 0}\n                                accept={accept || \".pdf,.jpg,.png,.doc,.docx\"}\n                                label={uploadButtonLabel}\n                                documentName={label.toLowerCase()}\n                                className={error && currentFiles.length === 0 ? styles.errorUpload : ''}\n                            />\n                        ) : (\n                            <input\n                                ref={inputRef}\n                                type=\"file\"\n                                accept={accept || \".pdf,.jpg,.png,.doc,.docx\"}\n                                onChange={(e) => {\n                                    if (e.target.files && e.target.files[0]) {\n                                        handleFileUpload([e.target.files[0]], fieldConfig);\n                                        e.target.value = '';\n                                    }\n                                }}\n                                style={{ display: 'none' }}\n                            />\n                        )}\n                    </div>\n\n                    {error && currentFiles.length === 0 && <p className={styles.errorText} style={{ marginTop: '0.5rem' }}>{error}</p>}\n                    {uploadState.type === docType && uploadState.error && <p className={styles.errorText} style={{ marginTop: '0.5rem' }}>{uploadState.error}</p>}\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <>\n            <style>{`\n            .facility-uploads-wrapper {\n                 container-type: inline-size;\n            }\n             @container (min-width: 700px) {\n              .facility-uploads-wrapper {\n                flex-direction: row;\n              }\n            }\n            /* Fallback for browsers not supporting container queries or just media query */\n            @media (min-width: 1024px) {\n                 .facility-uploads-wrapper {\n                    flex-direction: row;\n                 }\n            }\n        `}</style>\n            <div className={styles.sectionContainer}>\n                <div className={styles.headerCard}>\n                    <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('documents.title')}</h2>\n                    <div className={styles.subtitleRow}>\n                        <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('documents.subtitle')}</p>\n                        <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n                    </div>\n                </div>\n\n                <div className={styles.sectionsWrapper}>\n                    <div className={styles.leftColumn}>\n                        {documentFieldsConfig.filter((_, index) => index % 2 === 0).map(fieldConfig => (\n                            <RenderDocumentCard key={fieldConfig.docType} fieldConfig={fieldConfig} />\n                        ))}\n                    </div>\n                    <div className={styles.rightColumn}>\n                        {documentFieldsConfig.filter((_, index) => index % 2 === 1).map(fieldConfig => (\n                            <RenderDocumentCard key={fieldConfig.docType} fieldConfig={fieldConfig} />\n                        ))}\n                    </div>\n                </div>\n\n                <div className={styles.sectionCard}>\n                    <div className={styles.formActions} style={{ marginTop: 0 }}>\n                        <Button onClick={handleCancel} variant=\"secondary\" disabled={isSubmitting || uploadState.isLoading}>\n                            {t('common.cancel')}\n                        </Button>\n                        <Button onClick={onSaveAndContinue} variant=\"confirmation\" disabled={isSubmitting || uploadState.isLoading}>\n                            {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default DocumentUploads;","import React, { useMemo, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { get } from 'lodash';\nimport classNames from 'classnames';\nimport { FiSettings, FiClock, FiFileText, FiUserX } from 'react-icons/fi';\n\n// Account Deletion Component (Swiss nFADP/GDPR compliant)\nimport AccountDeletion from '../../components/AccountDeletion';\n\nimport CheckboxField from '../../../../../components/BoxedInputFields/CheckboxField';\nimport DropdownField from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport SimpleDropdown from '../../../../../components/BoxedInputFields/Dropdown-Field';\nimport InputField from '../../../../../components/BoxedInputFields/Personnalized-InputField';\nimport TextareaField from '../../../../../components/BoxedInputFields/TextareaField';\nimport Button from '../../../../../components/BoxedInputFields/Button';\nimport Switch from '../../../../../components/BoxedInputFields/Switch';\n\nimport { useDropdownOptions } from '../../utils/DropdownListsImports';\n\n// Tailwind styles\nconst styles = {\n  sectionContainer: \"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto\",\n  headerCard: \"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto\",\n  sectionTitle: \"text-2xl font-semibold mb-2\",\n  sectionTitleStyle: { fontSize: '18px', color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  sectionSubtitle: \"text-sm font-medium text-muted-foreground\",\n  subtitleRow: \"flex items-end justify-between gap-4\",\n  mandatoryFieldLegend: \"text-xs text-muted-foreground\",\n  mandatoryMark: \"text-destructive\",\n  sectionsWrapper: \"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto\",\n  leftColumn: \"flex flex-col gap-6 flex-1\",\n  rightColumn: \"flex flex-col gap-6 flex-1\",\n  sectionCard: \"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full\",\n  cardHeader: \"flex items-center gap-4 mb-0\",\n  cardIconWrapper: \"p-2 rounded-lg bg-primary/10 text-primary\",\n  cardTitle: \"flex-1\",\n  cardTitleH3: \"m-0\",\n  cardTitleH3Style: { color: 'hsl(var(--card-foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' },\n  grid: \"grid grid-cols-1 gap-6\",\n  fieldWrapper: \"space-y-2\",\n  fullWidth: \"md:col-span-2\",\n  formActions: \"flex justify-end gap-4 w-full max-w-[1000px] mx-auto\"\n};\n\nconst Settings = ({\n  formData,\n  config,\n  errors,\n  isSubmitting,\n  onInputChange,\n  onSaveAndContinue,\n  onCancel,\n  getNestedValue,\n}) => {\n  const { t, i18n } = useTranslation(['dashboardProfile', 'dropdowns', 'common', 'validation']);\n\n  const dropdownOptionsFromHook = useDropdownOptions();\n\n  const fieldsToRender = useMemo(() => config?.fields?.settings || [], [config]);\n\n  const handleCancel = useCallback(() => {\n    if (onCancel) {\n      onCancel();\n    }\n    window.location.reload();\n  }, [onCancel]);\n\n  const getDropdownOptions = useCallback((optionsKey) => {\n    const mappedOptionsKey = optionsKey === 'educationLevels' ? 'education' : optionsKey;\n    const suffixedKey = `${mappedOptionsKey}Options`;\n    const optionsFromHook = dropdownOptionsFromHook[suffixedKey];\n    if (optionsFromHook && optionsFromHook.length > 0) {\n      return optionsFromHook;\n    }\n\n    const dropdownTranslations = i18n.getResourceBundle(i18n.language, 'dropdowns');\n    if (dropdownTranslations) {\n      if (dropdownTranslations[optionsKey]) {\n        return Object.entries(dropdownTranslations[optionsKey]).map(([key, value]) => ({\n          value: key,\n          label: value\n        }));\n      }\n      if (mappedOptionsKey !== optionsKey && dropdownTranslations[mappedOptionsKey]) {\n        return Object.entries(dropdownTranslations[mappedOptionsKey]).map(([key, value]) => ({\n          value: key,\n          label: value\n        }));\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(`No options found for key: ${optionsKey}`);\n    }\n    return [];\n  }, [dropdownOptionsFromHook, i18n]);\n\n  const checkDependency = useCallback((fieldConfig) => {\n    if (!fieldConfig.dependsOn) return true;\n\n    const dependentValue = getNestedValue(formData, fieldConfig.dependsOn);\n\n    if (fieldConfig.dependsOnValue) {\n      return fieldConfig.dependsOnValue.includes(dependentValue);\n    }\n    if (fieldConfig.dependsOnValueExclude) {\n      return !fieldConfig.dependsOnValueExclude.includes(dependentValue);\n    }\n    return true;\n  }, [formData, getNestedValue]);\n\n  const renderField = (fieldConfig) => {\n    const { name, type, required, labelKey, optionsKey, dependsOn, placeholder, ...restConfig } = fieldConfig;\n\n    if (!checkDependency(fieldConfig)) {\n      return null;\n    }\n\n    const value = getNestedValue(formData, name);\n    const error = getNestedValue(errors, name);\n    const label = t(labelKey, name);\n\n    let isActuallyRequired = required;\n    if (dependsOn && isActuallyRequired) {\n      if (!checkDependency(fieldConfig)) {\n        isActuallyRequired = false;\n      }\n    }\n    const finalLabel = <>{label} {isActuallyRequired && <span className=\"boxed-inputfield-required\">*</span>}</>;\n\n    const commonProps = {\n      label: finalLabel,\n      error: error,\n      required: isActuallyRequired,\n      wrapperClassName: styles.fieldWrapper\n    };\n\n    const wrapInput = (component) => (\n      <div key={name} className={classNames(styles.fieldWrapper, { [styles.fullWidth]: type === 'textarea' })}>\n        {component}\n      </div>\n    );\n\n    switch (type) {\n      case 'dropdown':\n        const options = getDropdownOptions(optionsKey);\n        return wrapInput(\n          <SimpleDropdown\n            key={name}\n            label={commonProps.label}\n            options={options}\n            value={value}\n            onChange={(newValue) => {\n              onInputChange(name, newValue);\n            }}\n            placeholder={placeholder || t('common.selectPlaceholder', 'Select...')}\n            required={commonProps.required}\n            error={commonProps.error}\n          />\n        );\n      case 'checkbox':\n        if (fieldConfig.group === 'contractSettings') {\n          return wrapInput(\n            <Switch\n              key={name}\n              label={label}\n              checked={!!value}\n              onChange={(newValue) => onInputChange(name, newValue)}\n              marginBottom=\"0\"\n            />\n          );\n        }\n        return wrapInput(\n          <CheckboxField\n            key={name}\n            {...commonProps}\n            label={label}\n            checked={!!value}\n            onChange={(e) => onInputChange(name, e.target.checked)}\n          />\n        );\n      case 'textarea':\n        return wrapInput(\n          <TextareaField\n            key={name}\n            {...commonProps}\n            value={value || ''}\n            onChange={(e) => onInputChange(name, e.target.value)}\n            placeholder={placeholder}\n            maxLength={restConfig.maxLength}\n          />\n        );\n      case 'text':\n      case 'number':\n      default:\n        return wrapInput(\n          <InputField\n            key={name}\n            {...commonProps}\n            name={name}\n            type={type === 'number' ? 'number' : 'text'}\n            value={value || ''}\n            onChange={(e) => onInputChange(name, e.target.value)}\n            min={type === 'number' ? restConfig.min : undefined}\n            max={type === 'number' ? restConfig.max : undefined}\n            placeholder={placeholder}\n          />\n        );\n    }\n  };\n\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    fieldsToRender.forEach(field => {\n      const groupName = field.group || 'general';\n      if (!groups[groupName]) {\n        groups[groupName] = [];\n      }\n      groups[groupName].push(field);\n    });\n    return groups;\n  }, [fieldsToRender]);\n\n  return (\n    <div className={styles.sectionContainer}>\n      <div className={styles.headerCard}>\n        <h2 className={styles.sectionTitle} style={styles.sectionTitleStyle}>{t('settings.title')}</h2>\n        <div className={styles.subtitleRow}>\n          <p className={styles.sectionSubtitle} style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>{t('settings.subtitle')}</p>\n          <div className={styles.mandatoryFieldLegend}><span className={styles.mandatoryMark}>*</span> {t('common.mandatoryFields')}</div>\n        </div>\n      </div>\n\n      <div className={styles.sectionsWrapper}>\n        <div className={styles.leftColumn}>\n          {groupedFields.operationalSettings && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiClock /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.operationalSettingsTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.operationalSettings.map(renderField)}\n              </div>\n            </div>\n          )}\n\n          {groupedFields.contractSettings && (\n            <div className={styles.sectionCard}>\n              <div className={styles.grid}>\n                <div className={styles.cardHeader}>\n                  <div className={styles.cardIconWrapper}><FiFileText /></div>\n                  <div className={styles.cardTitle}>\n                    <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.contractSettingsTitle')}</h3>\n                  </div>\n                </div>\n                {groupedFields.contractSettings.map(renderField)}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Account Management Section */}\n      <div className=\"w-full max-w-[1000px] mx-auto\">\n        <div className={styles.sectionCard}>\n          <div className={styles.cardHeader}>\n            <div className={styles.cardIconWrapper}><FiUserX /></div>\n            <div className={styles.cardTitle}>\n              <h3 className={styles.cardTitleH3} style={styles.cardTitleH3Style}>{t('settings.accountDeletion.title', 'Account Management')}</h3>\n            </div>\n          </div>\n          <div className=\"mt-4\">\n            <AccountDeletion />\n          </div>\n        </div>\n      </div>\n\n      <div className={styles.sectionCard}>\n        <div className={styles.formActions} style={{ marginTop: 0 }}>\n          <Button onClick={handleCancel} variant=\"secondary\" disabled={isSubmitting}>\n            {t('common.cancel')}\n          </Button>\n          <Button onClick={onSaveAndContinue} variant=\"confirmation\" disabled={isSubmitting}>\n            {isSubmitting ? t('common.saving') : t('common.saveAndContinue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n\n\n\n","import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { get, set, cloneDeep, isEqual } from 'lodash';\nimport { FiUpload, FiFileText, FiZap } from 'react-icons/fi';\n\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { useNotification } from '../../../contexts/NotificationContext';\nimport useProfileData from '../../hooks/useProfileData';\nimport { useDashboard } from '../../contexts/DashboardContext';\nimport { useTutorial } from '../../contexts/TutorialContext';\nimport { useMobileView } from '../../hooks/useMobileView';\nimport { usePageMobile } from '../../contexts/PageMobileContext';\n\nimport LoadingSpinner from '../../../components/LoadingSpinner/LoadingSpinner';\nimport Button from '../../../components/BoxedInputFields/Button';\nimport Dialog from '../../../components/Dialog/Dialog';\nimport UploadFile from '../../../components/BoxedInputFields/UploadFile';\nimport SimpleDropdown from '../../../components/BoxedInputFields/Dropdown-Field';\nimport ProfileHeader from './components/ProfileHeader'; // Is now our Sidebar\nimport { uploadFile } from '../../../services/storageService';\nimport { processDocumentWithAI, mergeExtractedData, getCachedExtractedData } from '../../../services/documentProcessingService';\nimport { mergeOnboardingDocuments } from '../../utils/mergeOnboardingDocuments';\nimport { getAllMockData, getMockDataForTab } from './utils/mockProfileData';\n\n// --- Professional Profile Section Components ---\nimport PersonalDetails from './professionals/components/PersonalDetails';\nimport ProfessionalBackground from './professionals/components/ProfessionalBackground';\nimport BillingInformation from './professionals/components/BillingInformation';\nimport ProfessionalDocumentUploads from './professionals/components/DocumentUploads';\nimport ProfessionalSettings from './professionals/components/Settings';\n\n// --- Facility Profile Section Components ---\nimport FacilityDetails from './facilities/components/FacilityDetails';\nimport FacilityDocumentUploads from './facilities/components/DocumentUploads';\nimport FacilitySettings from './facilities/components/Settings';\n\nimport { cn } from '../../../utils/cn';\n\n// --- Helper Functions ---\nexport const calculateProfileCompleteness = (data, config) => {\n    if (!data || !config?.tabs) return 0;\n    const TABS_FOR_COMPLETENESS = config.tabs.map(t => t.id);\n    const completedTabs = TABS_FOR_COMPLETENESS.filter(tabId => isTabCompleted(data, tabId, config));\n    return TABS_FOR_COMPLETENESS.length > 0 ? Math.round((completedTabs.length / TABS_FOR_COMPLETENESS.length) * 100) : 0;\n};\n\nexport const isTabCompleted = (profileData, tabId, config) => {\n    if (!profileData || !config?.fields || !config.fields[tabId]) return false;\n    const fieldsOrRules = config.fields[tabId];\n\n    if (Array.isArray(fieldsOrRules)) {\n        return fieldsOrRules.every(field => {\n            if (!field.required) return true;\n            if (field.dependsOn) {\n                const dependentValue = get(profileData, field.dependsOn);\n                if (field.dependsOnValue && !field.dependsOnValue.includes(dependentValue)) return true;\n                if (field.dependsOnValueExclude && field.dependsOnValueExclude.includes(dependentValue)) return true;\n            }\n            const value = get(profileData, field.name);\n            // Strict check for empty strings and null/undefined for required fields\n            return value !== null && value !== undefined && String(value).trim() !== '';\n        });\n    }\n    else if (typeof fieldsOrRules === 'object') {\n        let isComplete = true;\n        Object.entries(fieldsOrRules).forEach(([key, rules]) => {\n            if (rules.required && rules.minItems > 0) {\n                const list = get(profileData, key);\n                if (!Array.isArray(list) || list.length < rules.minItems) {\n                    isComplete = false;\n                }\n            }\n        });\n        return isComplete;\n    }\n    return true;\n};\n\nexport const isTabAccessible = (profileData, tabId, config) => {\n    if (!config?.tabs) return tabId === config?.tabs?.[0]?.id;\n    const tabIndex = config.tabs.findIndex(t => t.id === tabId);\n    if (tabIndex <= 0) return true;\n\n    for (let i = 0; i < tabIndex; i++) {\n        if (!isTabCompleted(profileData, config.tabs[i].id, config)) {\n            return false;\n        }\n    }\n    return true;\n};\n\nconst Profile = () => {\n    const { t } = useTranslation(['dashboardProfile', 'common', 'validation']);\n    const { currentUser } = useAuth();\n    const { showNotification } = useNotification();\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { setProfileCompletionStatus } = useDashboard();\n    const isMobile = useMobileView();\n    const pageMobileContext = usePageMobile();\n\n    const {\n        profileData: initialProfileData,\n        isLoading: isLoadingData,\n        error: profileError,\n        updateProfileData,\n        initializeProfileDocument,\n        refreshProfileData\n    } = useProfileData();\n\n    const [activeTab, setActiveTab] = useState('');\n    const [formData, setFormData] = useState(null);\n    const [profileConfig, setProfileConfig] = useState(null);\n    const [isLoadingConfig, setIsLoadingConfig] = useState(false);\n    const originalData = useRef(null);\n\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [errors, setErrors] = useState({});\n    const [subscriptionStatus, setSubscriptionStatus] = useState('free');\n    const [isProfileMenuCollapsed, setIsProfileMenuCollapsed] = useState(false);\n    const [showSidebar, setShowSidebar] = useState(true);\n\n    // Dialog states\n    const [showConfirmTabDialog, setShowConfirmTabDialog] = useState(false);\n    const [nextTabToNavigate, setNextTabToNavigate] = useState('');\n    const [showCancelDialog, setShowCancelDialog] = useState(false);\n    const [showAutoFillDialog, setShowAutoFillDialog] = useState(false);\n    const [showDocumentsView, setShowDocumentsView] = useState(false);\n    const [selectedDocumentType, setSelectedDocumentType] = useState(null);\n\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\n    const [extractedData, setExtractedData] = useState(null);\n    const [showAnalysisConfirmation, setShowAnalysisConfirmation] = useState(false);\n    const [cachedData, setCachedData] = useState(null);\n\n    // Load cached extracted data on mount\n    useEffect(() => {\n        const loadCachedData = async () => {\n            if (currentUser?.uid) {\n                // console.log('[Profile] Attempting to load cached data for user:', currentUser.uid);\n                const cached = await getCachedExtractedData(currentUser.uid);\n                // console.log('[Profile] Cached data result:', cached);\n                if (cached) {\n                    // console.log('[Profile] Setting cached extracted data');\n                    setCachedData(cached);\n                } else {\n                    // console.log('[Profile] No cached data found or cache expired');\n                }\n            }\n        };\n        loadCachedData();\n    }, [currentUser]);\n\n    const autoFillButtonRef = useRef(null);\n\n    const isFormModified = useMemo(() => {\n        if (!originalData.current || !formData) return false;\n        return !isEqual(originalData.current, formData);\n    }, [formData]);\n\n    // --- Initialization ---\n    useEffect(() => {\n        if (currentUser && !initialProfileData && !isLoadingData && !profileError) {\n            initializeProfileDocument().then(success => {\n                if (success) refreshProfileData();\n            });\n        }\n    }, [currentUser, initialProfileData, isLoadingData, profileError, initializeProfileDocument, refreshProfileData]);\n\n    // Handle profile tutorial start - only when user navigates here during main tutorial\n    const { tutorialPassed, startTutorial, activeTutorial, completedTutorials, isTutorialActive, stepData, currentStep, isWaitingForSave, onTabCompleted } = useTutorial();\n    const profileTutorialStartedRef = useRef(false);\n\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadProgress, setUploadProgress] = useState(0);\n    const uploadInputRef = useRef(null);\n    const isProfessional = formData?.role === 'professional';\n\n\n    useEffect(() => {\n        // Start profile tutorial only if:\n        // 1. User is logged in\n        // 2. Profile data is loaded (formData exists)\n        // 3. Global tutorial is not passed (user is in onboarding flow)\n        // 4. ProfileTabs tutorial hasn't been completed yet\n        // 5. Not already in the profileTabs tutorial\n        // 6. Haven't already started the profile tutorial\n        // 7. Either in dashboard tutorial or just navigated from it\n        const shouldStartProfileTutorial =\n            currentUser &&\n            formData &&\n            !tutorialPassed &&\n            !completedTutorials?.profileTabs &&\n            activeTutorial !== 'profileTabs' &&\n            !profileTutorialStartedRef.current &&\n            (activeTutorial === 'dashboard' || location.pathname.includes('/profile'));\n\n        if (shouldStartProfileTutorial) {\n            // Small delay to ensure navigation is complete\n            const timer = setTimeout(() => {\n                profileTutorialStartedRef.current = true;\n                startTutorial('profileTabs');\n            }, 500);\n            return () => clearTimeout(timer);\n        }\n    }, [tutorialPassed, activeTutorial, startTutorial, currentUser, formData, completedTutorials, isTutorialActive, location.pathname]);\n\n    // Tutorial step syncing is handled by TutorialContext based on URL\n    // Users can navigate freely to accessible tabs, tutorial follows their location\n\n\n    useEffect(() => {\n        if (initialProfileData?.profileType && initialProfileData?.role) {\n            const role = initialProfileData.role;\n            const type = initialProfileData.profileType;\n            const loadConfig = async () => {\n                setIsLoadingConfig(true);\n                setProfileConfig(null);\n                try {\n                    let configModule;\n                    if (role === 'professional') {\n                        configModule = await import(`./professionals/configs/professionals-${type}.json`);\n                    } else if (role === 'facility' || role === 'company') {\n                        configModule = await import(`./facilities/configs/facility.json`);\n                    } else {\n                        throw new Error(`Unknown role: ${role}`);\n                    }\n                    setProfileConfig(configModule.default || configModule);\n                    const deepCopiedData = cloneDeep(initialProfileData);\n                    setFormData(deepCopiedData);\n                    originalData.current = deepCopiedData;\n                    setActiveTab(configModule?.default?.tabs?.[0]?.id || configModule?.tabs?.[0]?.id || '');\n                } catch (e) {\n                    console.error('[Profile] Error loading config:', e);\n                    showNotification(t('errors.loadingConfig'), 'error');\n                    setErrors({ _config: t('errors.loadingConfig') });\n                } finally {\n                    setIsLoadingConfig(false);\n                }\n            };\n            loadConfig();\n        }\n    }, [initialProfileData, t, showNotification]);\n\n    useEffect(() => {\n        const fetchSubscriptionStatus = () => {\n            if (formData) {\n                const subscription = formData.platformSubscriptionPlan ||\n                    formData.subscriptionTier ||\n                    formData.subscription?.tier ||\n                    'free';\n                const isPremium = subscription &&\n                    subscription !== 'free' &&\n                    subscription !== 'starter' &&\n                    subscription.toLowerCase() !== 'free';\n                setSubscriptionStatus(isPremium ? 'premium' : 'free');\n            } else if (initialProfileData) {\n                const subscription = initialProfileData.platformSubscriptionPlan ||\n                    initialProfileData.subscriptionTier ||\n                    initialProfileData.subscription?.tier ||\n                    'free';\n                const isPremium = subscription &&\n                    subscription !== 'free' &&\n                    subscription !== 'starter' &&\n                    subscription.toLowerCase() !== 'free';\n                setSubscriptionStatus(isPremium ? 'premium' : 'free');\n            }\n        };\n        fetchSubscriptionStatus();\n    }, [formData, initialProfileData]);\n\n    // --- Merge Onboarding Documents ---\n    useEffect(() => {\n        if (formData && currentUser && !formData._onboardingDocumentsMerged) {\n            mergeOnboardingDocuments(formData, setFormData, currentUser);\n        }\n    }, [formData, currentUser]);\n\n\n    // --- Navigation ---\n    useEffect(() => {\n        if (!profileConfig || !formData || isLoadingConfig || isLoadingData) return;\n        const pathParts = location.pathname.split('/');\n        const tabFromUrl = pathParts[pathParts.length - 1];\n        const validTabIds = profileConfig.tabs.map(t => t.id);\n\n        let targetTab = activeTab || validTabIds[0];\n\n        if (tabFromUrl && validTabIds.includes(tabFromUrl)) {\n            if (isTabAccessible(formData, tabFromUrl, profileConfig)) {\n                targetTab = tabFromUrl;\n            } else {\n                targetTab = validTabIds.find(id => isTabAccessible(formData, id, profileConfig)) || validTabIds[0];\n            }\n        } else if (location.pathname.endsWith('/profile') || location.pathname.endsWith('/profile/')) {\n            targetTab = validTabIds.find(id => isTabAccessible(formData, id, profileConfig)) || validTabIds[0];\n        }\n\n        if (targetTab !== activeTab) {\n            setActiveTab(targetTab);\n        }\n        const currentUrlEnd = location.pathname.substring(location.pathname.lastIndexOf('/') + 1);\n        if (targetTab && targetTab !== currentUrlEnd) {\n            navigate(`/dashboard/profile/${targetTab}`, { replace: true });\n        }\n    }, [location.pathname, profileConfig, formData, isLoadingConfig, isLoadingData, activeTab, navigate]);\n\n    // --- Form Handlers ---\n    const handleInputChange = useCallback((name, value) => {\n        setFormData(currentFormData => {\n            const newFormData = cloneDeep(currentFormData);\n            set(newFormData, name, value);\n            return newFormData;\n        });\n        setErrors(prevErrors => {\n            const newErrors = cloneDeep(prevErrors);\n            set(newErrors, name, undefined);\n            return newErrors;\n        });\n    }, []);\n\n    const handleArrayChange = useCallback((arrayName, newArray) => {\n        setFormData(prev => ({ ...prev, [arrayName]: newArray }));\n        setErrors(prevErrors => {\n            const newErrors = { ...prevErrors };\n            delete newErrors[arrayName];\n            return newErrors;\n        });\n    }, []);\n\n    const getNestedValue = useCallback((obj, path) => get(obj, path), []);\n\n    const processAndFillProfile = useCallback(async (document) => {\n        if (!document || !document.storageUrl) return;\n\n        try {\n            setIsAnalyzing(true);\n            showNotification(t('dashboardProfile:documents.analyzing', 'Analyzing document...'), 'info');\n\n            const docType = document.type || (isProfessional ? 'cv' : 'businessDocument');\n            const mimeType = document.mimeType || document.fileType || 'application/pdf'; // Default to PDF if unknown\n\n            const result = await processDocumentWithAI(document.storageUrl, docType, document.storagePath, mimeType);\n\n            if (result.success && result.data) {\n                setExtractedData(result.data);\n                setCachedData(result.data);\n                setShowAnalysisConfirmation(true);\n            } else {\n                throw new Error('Analysis failed or returned no data');\n            }\n        } catch (error) {\n            console.error('[Profile] Error analyzing document:', error);\n            showNotification(t('dashboardProfile:documents.analysisError', 'Failed to analyze document'), 'error');\n        } finally {\n            setIsAnalyzing(false);\n        }\n    }, [isProfessional, showNotification, t]);\n\n    const handleCloseAutoFillDialog = useCallback(() => {\n        setShowAutoFillDialog(false);\n        setSelectedDocumentType(null);\n    }, []);\n\n    const handleFileUpload = useCallback(async (files) => {\n        if (!files || files.length === 0 || !currentUser) return;\n\n        if (!selectedDocumentType) {\n            showNotification(t('dashboardProfile:documents.selectDocumentTypeFirst', 'Please select a document type first'), 'warning');\n            return;\n        }\n\n        const file = files[0];\n        setIsUploading(true);\n        setUploadProgress(0);\n\n        try {\n            const userId = currentUser.uid;\n            const docType = selectedDocumentType;\n            const timestamp = Date.now();\n            const fileExtension = file.name.split('.').pop();\n            const baseName = file.name.substring(0, file.name.lastIndexOf('.')) || file.name;\n            const normalizedFileName = `${baseName.toLowerCase().replace(/[^a-z0-9]/g, '_')}_${timestamp}.${fileExtension}`;\n            const path = isProfessional\n                ? `documents/${userId}/${docType}/${normalizedFileName}`\n                : `documents/facilities/${userId}/${docType}/${normalizedFileName}`;\n\n            const downloadURL = await uploadFile(file, path, (progress) => {\n                setUploadProgress(progress);\n            });\n\n            const fileMetadata = {\n                documentId: `${docType}_${Date.now()}`,\n                userId: userId,\n                type: docType,\n                category: docType,\n                fileName: normalizedFileName,\n                originalFileName: file.name,\n                storageUrl: downloadURL,\n                storagePath: path,\n                fileSize: file.size,\n                fileType: file.type || 'application/octet-stream',\n                mimeType: file.type || 'application/octet-stream',\n                uploadedAt: new Date().toISOString(),\n                status: 'pending_verification'\n            };\n\n            if (!formData) return;\n\n            const updatedFormData = cloneDeep(formData);\n\n            const documentFieldConfig = profileConfig?.fields?.documentUploads?.find(f => f.docType === docType);\n            const fieldName = documentFieldConfig?.name || (docType === 'cv' ? 'cvUrl' : 'verificationDocumentsProvided');\n\n            if (docType === 'cv' || fieldName === 'cvUrl') {\n                if (!updatedFormData.documents) {\n                    updatedFormData.documents = {};\n                }\n                if (!updatedFormData.documents.cv) {\n                    updatedFormData.documents.cv = [];\n                }\n                updatedFormData.documents.cv.push(fileMetadata);\n            } else if (isProfessional) {\n                const fieldPath = fieldName.includes('.') ? fieldName : `documents.${fieldName}`;\n                const currentList = getNestedValue(updatedFormData, fieldPath) || [];\n                set(updatedFormData, fieldPath, [...currentList, fileMetadata]);\n            } else {\n                if (!updatedFormData.verification) {\n                    updatedFormData.verification = {};\n                }\n                if (!updatedFormData.verification.verificationDocumentsProvided) {\n                    updatedFormData.verification.verificationDocumentsProvided = [];\n                }\n                updatedFormData.verification.verificationDocumentsProvided.push(fileMetadata);\n            }\n\n            setFormData(updatedFormData);\n\n            // Persist to database\n            try {\n                await updateProfileData(updatedFormData);\n                console.log('[Profile] Document metadata saved to database');\n                showNotification(t('dashboardProfile:documents.uploadSuccess', 'Document uploaded successfully'), 'success');\n\n                // Trigger Auto Fill Analysis\n                setTimeout(() => {\n                    handleCloseAutoFillDialog();\n                    processAndFillProfile(fileMetadata);\n                }, 500);\n            } catch (dbError) {\n                console.error('[Profile] Error saving document metadata to database:', dbError);\n                showNotification(t('dashboardProfile:documents.uploadSuccessButSaveError', 'Document uploaded but failed to save metadata. Please try again.'), 'warning');\n            }\n\n            setIsUploading(false);\n            setUploadProgress(0);\n        } catch (error) {\n            console.error('[Profile] Error uploading file:', error);\n            setIsUploading(false);\n            setUploadProgress(0);\n            showNotification(t('dashboardProfile:documents.uploadError', 'Error uploading document'), 'error');\n        }\n    }, [currentUser, isProfessional, formData, profileConfig, selectedDocumentType, showNotification, t, updateProfileData, processAndFillProfile, handleCloseAutoFillDialog, getNestedValue]); // eslint-disable-line no-use-before-define\n\n    const handleUploadButtonClick = useCallback(() => {\n        if (uploadInputRef.current) {\n            uploadInputRef.current.click();\n        }\n    }, []);\n\n    const isTutorialStep1 = isTutorialActive && activeTutorial === 'profileTabs' && currentStep === 0;\n    const isAutoFillDisabled = isTutorialStep1 && !isWaitingForSave;\n\n    const handleAutoFillClick = useCallback(() => {\n        if (isAutoFillDisabled) return;\n        setSelectedDocumentType(null);\n        setShowAutoFillDialog(true);\n    }, [isAutoFillDisabled]);\n\n    const handleCloseDocumentsView = useCallback(() => {\n        setShowDocumentsView(false);\n    }, []);\n\n    const handleSelectDocument = useCallback((document) => {\n        console.log('Selected document:', document);\n        setShowDocumentsView(false);\n        processAndFillProfile(document);\n    }, [processAndFillProfile]);\n\n    const applyExtractedData = useCallback(async () => {\n        if (!extractedData || !formData) return;\n\n        try {\n            setIsSubmitting(true);\n\n            const updatedFormData = mergeExtractedData(formData, extractedData);\n\n            setFormData(updatedFormData);\n\n            await updateProfileData(updatedFormData);\n\n            showNotification(t('dashboardProfile:documents.autoFillSuccess', 'Profile auto-filled successfully!'), 'success');\n            setShowAnalysisConfirmation(false);\n            setExtractedData(null);\n        } catch (error) {\n            console.error('[Profile] Error applying extracted data:', error);\n            showNotification(t('dashboardProfile:documents.autoFillError', 'Error updating profile'), 'error');\n        } finally {\n            setIsSubmitting(false);\n        }\n    }, [extractedData, formData, updateProfileData, showNotification, t]);\n\n    const handleFillEmptyFields = useCallback(() => {\n        applyExtractedData();\n    }, [applyExtractedData]);\n\n    const cancelAnalysis = useCallback(() => {\n        setShowAnalysisConfirmation(false);\n        setExtractedData(null);\n    }, []);\n\n    const handleAutofill = useCallback((scope = 'all') => {\n        if (!formData) return;\n\n        let mockData;\n        let successMsg;\n\n        if (scope === 'current') {\n            mockData = getMockDataForTab(activeTab);\n            successMsg = t('dashboardProfile:common.autofillTabSuccess', 'Current tab populated with test data (Beta)');\n        } else {\n            mockData = getAllMockData();\n            successMsg = t('dashboardProfile:common.autofillSuccess', 'Full profile populated with test data (Beta)');\n        }\n\n        setFormData(current => ({\n            ...current,\n            ...mockData\n        }));\n        showNotification(successMsg, 'success');\n    }, [formData, activeTab, t, showNotification]);\n\n    const availableDocuments = useMemo(() => {\n        if (!formData) return [];\n        const verificationDocs = getNestedValue(formData, 'verification.verificationDocuments') || [];\n        const cvDocs = getNestedValue(formData, 'documents.cv') || [];\n        const providedDocs = getNestedValue(formData, 'verification.verificationDocumentsProvided') || [];\n\n        // Combine all document sources\n        const allDocs = [...verificationDocs, ...cvDocs, ...providedDocs];\n\n        return allDocs.filter(doc => doc && doc.storageUrl);\n    }, [formData, getNestedValue]);\n\n    const documentTypeOptions = useMemo(() => {\n        if (!profileConfig) return [];\n\n        const documentFields = profileConfig.fields?.documentUploads || [];\n        return documentFields.map(field => {\n            const label = field.labelKey\n                ? t(`dashboardProfile:${field.labelKey}`, field.docType)\n                : t(`dashboardProfile:documents.${field.docType}`, field.docType);\n            return {\n                value: field.docType,\n                label: label,\n                accept: field.accept || '.pdf,.doc,.docx,.jpg,.png'\n            };\n        });\n    }, [profileConfig, t]);\n\n    const selectedDocumentTypeConfig = useMemo(() => {\n        if (!selectedDocumentType || !profileConfig) return null;\n        return profileConfig.fields?.documentUploads?.find(f => f.docType === selectedDocumentType);\n    }, [selectedDocumentType, profileConfig]);\n\n\n    const handleUseCachedData = useCallback(() => {\n        if (cachedData) {\n            handleCloseAutoFillDialog();\n            setExtractedData(cachedData);\n            setShowAnalysisConfirmation(true);\n        }\n    }, [cachedData, handleCloseAutoFillDialog]);\n\n    // --- Validation & Saving ---\n    const validateCurrentTabData = useCallback(() => {\n        if (!profileConfig || !formData) return false;\n        const currentTabId = activeTab;\n        const fieldsOrRules = profileConfig.fields[currentTabId];\n        let isValid = true;\n        const newErrors = {};\n\n        const checkField = (fieldRule) => {\n            const { name, required, dependsOn, dependsOnValue, dependsOnValueExclude, validationRules } = fieldRule;\n            let isActuallyRequired = required;\n            let shouldValidate = true;\n\n            if (dependsOn) {\n                const dependentValue = get(formData, dependsOn);\n                let conditionMet = true;\n                if (dependsOnValue && !dependsOnValue.includes(dependentValue)) conditionMet = false;\n                if (dependsOnValueExclude && dependsOnValueExclude.includes(dependentValue)) conditionMet = false;\n                if (!conditionMet) { isActuallyRequired = false; shouldValidate = false; }\n            }\n\n            const value = get(formData, name);\n            // Strict check for required fields including whitespace-only strings\n            if (isActuallyRequired && (value === null || value === undefined || String(value).trim() === '')) {\n                isValid = false;\n                set(newErrors, name, t('validation:required'));\n                shouldValidate = false;\n            }\n\n            if (shouldValidate && value && validationRules) {\n                if (validationRules.minLength && String(value).length < validationRules.minLength) {\n                    isValid = false;\n                    set(newErrors, name, t('validation:minLength', { count: validationRules.minLength }));\n                } else if (validationRules.pattern) {\n                    try {\n                        const regex = new RegExp(validationRules.pattern);\n                        if (!regex.test(String(value))) {\n                            isValid = false;\n                            set(newErrors, name, t(validationRules.patternErrorKey || 'validation:invalidFormat'));\n                        }\n                    } catch (e) { }\n                }\n            }\n        };\n\n        if (Array.isArray(fieldsOrRules)) {\n            fieldsOrRules.forEach(checkField);\n        } else if (typeof fieldsOrRules === 'object') {\n            Object.entries(fieldsOrRules).forEach(([key, rules]) => {\n                if (rules.required && rules.minItems > 0) {\n                    const list = get(formData, key);\n                    if (!Array.isArray(list) || list.length < rules.minItems) {\n                        isValid = false;\n                        set(newErrors, key, t('validation:minItemsRequired', { count: rules.minItems }));\n                    }\n                }\n            });\n        }\n        setErrors(newErrors);\n        return isValid;\n    }, [activeTab, formData, profileConfig, t]);\n\n    const handleSave = useCallback(async (options = {}) => {\n        const { navigateToNextTab = false } = options;\n        if (!currentUser || !formData) { showNotification(t('errors.notLoggedIn'), 'error'); return false; }\n        const isDataValid = validateCurrentTabData();\n        if (navigateToNextTab && !isDataValid) { showNotification(t('validation:errorFixFieldsBeforeContinuing'), 'warning'); return false; }\n\n        setIsSubmitting(true);\n        try {\n            let shouldUpdateProfileCompletionStatus = false;\n            if (isDataValid) {\n                const updatedFormData = cloneDeep(formData);\n                const allTabsComplete = profileConfig.tabs.every(tab =>\n                    tab.id === activeTab ? true : isTabCompleted(updatedFormData, tab.id, profileConfig)\n                );\n                shouldUpdateProfileCompletionStatus = allTabsComplete;\n            }\n\n            const updatedData = await updateProfileData(formData);\n            if (updatedData) {\n                originalData.current = cloneDeep(updatedData);\n                setFormData(cloneDeep(updatedData));\n                showNotification(t('validation:profileSaved'), 'success');\n                if (shouldUpdateProfileCompletionStatus) await setProfileCompletionStatus(true);\n\n                if (isTutorialActive && activeTutorial === 'profileTabs') {\n                    const isCurrentTabComplete = isTabCompleted(updatedData, activeTab, profileConfig);\n                    if (isCurrentTabComplete) {\n                        console.log('[Profile] Tab completed:', activeTab, '- notifying tutorial context');\n                        onTabCompleted(activeTab, true);\n                    } else {\n                        console.log('[Profile] Tab saved but not complete yet:', activeTab);\n                    }\n                }\n\n                if (navigateToNextTab && isDataValid) {\n                    const currentIndex = profileConfig.tabs.findIndex(t => t.id === activeTab);\n                    const nextTab = profileConfig.tabs[currentIndex + 1];\n                    if (nextTab) navigate(`/dashboard/profile/${nextTab.id}`);\n                }\n                return true;\n            } else { throw new Error(\"Profile update failed silently.\"); }\n        } catch (err) {\n            showNotification(err.message || t('validation:errorSavingProfile'), 'error');\n            return false;\n        } finally { setIsSubmitting(false); }\n    }, [currentUser, formData, updateProfileData, validateCurrentTabData, showNotification, t, activeTab, profileConfig, navigate, setProfileCompletionStatus, isTutorialActive, activeTutorial, onTabCompleted]);\n\n    const handleSaveAndContinue = useCallback(async () => {\n        // handleSave already handles tutorial continuation logic\n        // Just call it with navigateToNextTab\n        await handleSave({ navigateToNextTab: true });\n    }, [handleSave]);\n\n    useEffect(() => {\n        const setPageMobileState = pageMobileContext?.setPageMobileState;\n        if (!setPageMobileState || typeof setPageMobileState !== 'function') {\n            return;\n        }\n        if (isMobile && activeTab && !showSidebar) {\n            const handleBack = () => {\n                setActiveTab(profileConfig?.tabs?.[0]?.id || '');\n                setShowSidebar(true);\n            };\n            setPageMobileState(true, handleBack);\n        } else {\n            setPageMobileState(false, null);\n        }\n    }, [isMobile, activeTab, showSidebar, profileConfig, pageMobileContext]);\n\n    const handleTabChange = useCallback((tabId) => {\n        if (tabId === activeTab) return;\n        if (!isTabAccessible(formData, tabId, profileConfig)) { showNotification(t('validation:completePreviousSteps'), 'warning'); return; }\n        if (isFormModified) { setNextTabToNavigate(tabId); setShowConfirmTabDialog(true); }\n        else {\n            navigate(`/dashboard/profile/${tabId}`);\n            setErrors({});\n            if (isMobile) {\n                setShowSidebar(false);\n            }\n        }\n    }, [isFormModified, activeTab, navigate, formData, profileConfig, showNotification, t, isMobile]);\n\n    const confirmAndSwitchTab = useCallback(async () => {\n        setShowConfirmTabDialog(false);\n        const savedSuccessfully = await handleSave({ navigateToNextTab: false });\n        navigate(`/dashboard/profile/${nextTabToNavigate}`);\n        if (!savedSuccessfully) refreshProfileData();\n    }, [handleSave, nextTabToNavigate, navigate, refreshProfileData]);\n\n    const cancelTabSwitch = useCallback(() => { setShowConfirmTabDialog(false); setNextTabToNavigate(''); }, []);\n    const handleCancelChanges = useCallback(() => { isFormModified ? setShowCancelDialog(true) : showNotification(t('common:noChangesToCancel'), 'info'); }, [isFormModified, showNotification, t]);\n    const confirmCancelChanges = useCallback(() => { if (originalData.current) setFormData(cloneDeep(originalData.current)); setErrors({}); setShowCancelDialog(false); showNotification(t('common:changesDiscarded'), 'info'); }, [showNotification, t]);\n    const declineCancelChanges = useCallback(() => { setShowCancelDialog(false); }, []);\n\n    // --- Render Helpers ---\n    const isLoading = isLoadingData || isLoadingConfig;\n    const renderLoadingOrError = () => {\n        if (isLoading && !formData) return <LoadingSpinner />;\n        if (profileError) return <div className=\"p-8 text-center text-red-500\">{t('errors.loadingProfile')}: {profileError.message}</div>;\n        if (!profileConfig && !isLoading && initialProfileData) return <div className=\"p-8 text-center text-red-500\">{t('errors.loadingConfig')}</div>;\n        const validRoles = ['professional', 'facility', 'company'];\n        if (initialProfileData && initialProfileData.role && !validRoles.includes(initialProfileData.role)) {\n            return <div className=\"p-8 text-center text-red-500\">{t('errors.accessDenied')}</div>;\n        }\n        return null;\n    };\n\n    const currentTabComponent = () => {\n        if (!profileConfig || !formData || !activeTab) return null;\n        const commonProps = { formData, config: profileConfig, errors, isSubmitting, onInputChange: handleInputChange, onArrayChange: handleArrayChange, onSaveAndContinue: handleSaveAndContinue, onCancel: handleCancelChanges, getNestedValue };\n\n        // Determine if we should use facility components\n        const isFacility = formData.role === 'facility' || formData.role === 'company';\n\n        switch (activeTab) {\n            // Professional Tabs\n            case 'personalDetails': return <PersonalDetails {...commonProps} onTriggerUpload={handleUploadButtonClick} />;\n            case 'professionalBackground': return <ProfessionalBackground {...commonProps} />;\n            case 'billingInformation': return <BillingInformation {...commonProps} />;\n            case 'documentUploads': return <ProfessionalDocumentUploads {...commonProps} />;\n\n            // Facility Tabs\n            case 'facilityCoreDetails': return <FacilityDetails activeTab={activeTab} {...commonProps} />;\n            case 'facilityLegalBilling': return <FacilityDetails activeTab={activeTab} {...commonProps} />;\n            case 'facilityDocuments': return <FacilityDocumentUploads {...commonProps} />;\n\n            // Shared/Common Tabs using ID 'settings'\n            case 'settings':\n                return isFacility ? <FacilitySettings {...commonProps} /> : <ProfessionalSettings {...commonProps} />;\n\n            default: return <div>{t('common.selectTab')}</div>;\n        }\n    };\n\n    const completionPercentage = useMemo(() => calculateProfileCompleteness(formData, profileConfig), [formData, profileConfig]);\n\n    const nextIncompleteTab = useMemo(() => {\n        if (!profileConfig || !formData) return null;\n        const tabs = profileConfig.tabs || [];\n        for (const tab of tabs) {\n            if (!isTabCompleted(formData, tab.id, profileConfig) && isTabAccessible(formData, tab.id, profileConfig)) {\n                return tab.id;\n            }\n        }\n        return null;\n    }, [formData, profileConfig]);\n\n\n    return (\n        <div className={cn(\n            \"h-full flex flex-col overflow-hidden animate-in fade-in duration-500 [&_button]:!text-sm\",\n            isMobile && \"overflow-y-hidden\"\n        )}>\n            {/* 1. Top Bar - Enhanced Design - Normalized */}\n            {/* 1. Top Bar - Enhanced Design - Normalized */}\n            <div className={cn(\n                \"shrink-0 w-full z-20 bg-card/95 backdrop-blur-sm border-b border-border shadow-sm h-16 flex items-center\",\n                isMobile ? \"px-4\" : \"px-6\"\n            )}>\n                <div className=\"flex items-center justify-between gap-4 w-full\">\n                    {/* Subscription Status - Top Left */}\n                    <div className={cn(\n                        \"flex items-center gap-2 px-3 h-9 rounded-lg border transition-colors\",\n                        subscriptionStatus === 'premium'\n                            ? \"bg-primary/10 border-primary/30 text-primary\"\n                            : \"bg-muted/30 border-border/50 text-muted-foreground\"\n                    )}>\n                        <span className=\"text-xs font-medium\">\n                            {t('dashboardProfile:subscription.status')}:\n                        </span>\n                        <span className=\"text-sm font-semibold\">\n                            {subscriptionStatus === 'premium'\n                                ? t('dashboardProfile:subscription.premium')\n                                : t('dashboardProfile:subscription.free')}\n                        </span>\n                    </div>\n\n                    {/* Upload Button - Centered */}\n                    <div className=\"flex-1 flex justify-center\">\n                        <div className=\"relative\" ref={autoFillButtonRef}>\n                            <button\n                                onClick={handleAutoFillClick}\n                                disabled={isUploading || isAnalyzing || isAutoFillDisabled}\n                                className={cn(\n                                    \"h-9 px-4 flex items-center justify-center gap-2 rounded-lg border transition-all shrink-0\",\n                                    \"bg-background border-border text-muted-foreground hover:text-foreground hover:bg-muted/50\",\n                                    (isUploading || isAnalyzing || isAutoFillDisabled) && \"opacity-50 cursor-not-allowed\"\n                                )}\n                                data-tutorial=\"profile-upload-button\"\n                            >\n                                {isAnalyzing ? <LoadingSpinner size=\"sm\" /> : <FiUpload className=\"w-4 h-4\" />}\n                                <span className=\"text-sm font-medium\">\n                                    {isAnalyzing\n                                        ? t('dashboardProfile:documents.analyzing', 'Analyzing...')\n                                        : t('dashboardProfile:documents.autofill', 'Auto Fill')\n                                    }\n                                </span>\n                            </button>\n                        </div>\n                        <UploadFile\n                            ref={uploadInputRef}\n                            onChange={handleFileUpload}\n                            isLoading={isUploading}\n                            progress={uploadProgress}\n                            accept=\".pdf,.doc,.docx,.jpg,.png\"\n                            label=\"\"\n                            className=\"hidden\"\n                        />\n                    </div>\n\n                    {/* Completion Status - Enhanced */}\n                    {formData && (\n                        <div className=\"flex items-center gap-3 px-3 h-9 bg-muted/30 rounded-lg border border-border/50\">\n                            <span className=\"text-xs font-medium text-muted-foreground\">Profile Completion</span>\n                            <div className=\"w-32 h-2.5 bg-muted rounded-full overflow-hidden shadow-inner\">\n                                <div\n                                    className=\"h-full bg-gradient-to-r from-primary to-primary/80 transition-all duration-500 rounded-full\"\n                                    style={{ width: `${completionPercentage}%` }}\n                                ></div>\n                            </div>\n                            <span className=\"text-sm font-semibold text-foreground\">{completionPercentage}%</span>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <Dialog\n                isOpen={showAutoFillDialog}\n                onClose={handleCloseAutoFillDialog}\n                title={t('dashboardProfile:documents.autofill', 'Auto Fill')}\n                size=\"medium\"\n                actions={\n                    <>\n                        <Button\n                            variant=\"secondary\"\n                            onClick={handleCloseAutoFillDialog}\n                        >\n                            {t('common.cancel')}\n                        </Button>\n                        {cachedData && (\n                            <Button\n                                variant=\"primary\"\n                                onClick={handleUseCachedData}\n                            >\n                                {t('personalDetails.useExistingData', 'Use Existing Data')}\n                            </Button>\n                        )}\n                    </>\n                }\n            >\n                <div className=\"space-y-4\">\n                    {cachedData && (\n                        <div className=\"p-4 rounded-lg bg-primary/10 border-2 border-primary\">\n                            <div className=\"flex items-center gap-3 mb-2\">\n                                <FiZap className=\"text-primary\" size={18} />\n                                <div className=\"flex-1\">\n                                    <div className=\"font-semibold text-sm text-primary flex items-center gap-2\">\n                                        {t('personalDetails.useExistingData', 'Use Existing Data')}\n                                        <span className=\"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full\">\n                                            {t('common.cached', 'Cached')}\n                                        </span>\n                                    </div>\n                                    <div className=\"text-xs text-primary/80 mt-1\">\n                                        {t('personalDetails.recentlyExtractedData', 'Recently extracted data available')}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    <div className=\"space-y-4\">\n                        <div>\n                            <SimpleDropdown\n                                label={t('dashboardProfile:documents.selectDocumentType', 'Document Type')}\n                                options={documentTypeOptions}\n                                value={selectedDocumentType}\n                                onChange={setSelectedDocumentType}\n                                placeholder={t('dashboardProfile:documents.selectDocumentTypePlaceholder', 'Select document type...')}\n                            />\n                        </div>\n\n                        <div className=\"mt-10\">\n                            <label className=\"block text-sm font-medium mb-2\" style={{ color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>\n                                {t('personalDetails.upload', 'Upload')}\n                            </label>\n                            <div className=\"relative\">\n                                <UploadFile\n                                    onChange={handleFileUpload}\n                                    isLoading={isUploading}\n                                    progress={uploadProgress}\n                                    accept={selectedDocumentTypeConfig?.accept || '.pdf,.doc,.docx,.jpg,.png'}\n                                    label=\"\"\n                                    documentName={t('dashboardProfile:documents.clickToUpload', 'click to upload')}\n                                    disabled={!selectedDocumentType}\n                                />\n                                {!isUploading && (\n                                    <div className=\"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none\">\n                                        <FiUpload className=\"text-primary/50\" size={24} />\n                                    </div>\n                                )}\n                            </div>\n                            {!selectedDocumentType && (\n                                <p className=\"text-xs text-muted-foreground mt-1\">\n                                    {t('dashboardProfile:documents.selectDocumentTypeFirst', 'Please select a document type first')}\n                                </p>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </Dialog>\n\n            <Dialog\n                isOpen={showAnalysisConfirmation}\n                onClose={cancelAnalysis}\n                title={t('dashboardProfile:documents.autoFillTitle', 'Auto Fill Profile?')}\n                actions={\n                    <>\n                        <Button\n                            variant=\"secondary\"\n                            onClick={cancelAnalysis}\n                            disabled={isSubmitting}\n                        >\n                            {t('common.cancel')}\n                        </Button>\n                        <Button\n                            variant=\"primary\"\n                            onClick={handleFillEmptyFields}\n                            isLoading={isSubmitting}\n                        >\n                            {t('dashboardProfile:documents.fillEmptyFields', 'Fill Empty Fields')}\n                        </Button>\n                    </>\n                }\n            >\n                <p className=\"mb-4\">{t('dashboardProfile:documents.autoFillDescription', 'We have extracted information from your document. This will fill empty fields in your profile (Personal Details, Professional Background, etc.). Existing data will NOT be overwritten. Do you want to proceed?')}</p>\n                <div\n                    className=\"p-4 rounded-lg border text-sm bg-primary/5 border-primary/20 text-secondary\"\n                >\n                    <p className=\"mb-2 font-medium\">\n                        {t('dashboardProfile:documents.extractedSummary', 'Extracted Data Summary:')}\n                    </p>\n                    <ul className=\"list-disc pl-5 space-y-1\">\n                        {extractedData?.personalDetails?.identity?.legalFirstName &&\n                            <li>{t('personalDetails.firstName')}: {extractedData.personalDetails.identity.legalFirstName}</li>}\n                        {extractedData?.personalDetails?.identity?.legalLastName &&\n                            <li>{t('personalDetails.lastName')}: {extractedData.personalDetails.identity.legalLastName}</li>}\n                        {extractedData?.personalDetails?.contact?.primaryEmail &&\n                            <li>{t('personalDetails.email')}: {extractedData.personalDetails.contact.primaryEmail}</li>}\n                        {extractedData?.professionalBackground?.professionalSummary &&\n                            <li className=\"mt-2\">\n                                <span className=\"font-medium\">{t('professionalBackground.summary', 'Professional Summary')}:</span>\n                                <p className=\"mt-1 italic\">\n                                    \"{extractedData.professionalBackground.professionalSummary}\"\n                                </p>\n                            </li>}\n                        {extractedData?.professionalBackground?.workExperience?.length > 0 &&\n                            <li>{t('professionalBackground.experience')}: {extractedData.professionalBackground.workExperience.length} items</li>}\n                    </ul>\n                </div>\n            </Dialog>\n\n            {/* 2. Main Split Content */}\n            <div className={cn(\n                \"flex-1 flex overflow-hidden min-h-0 relative\",\n                isMobile ? \"p-0\" : \"p-4 gap-4\"\n            )}>\n                {/* Left: Sidebar Navigation */}\n                <div className={cn(\n                    \"flex flex-col transition-all duration-300 shrink-0\",\n                    isMobile\n                        ? cn(\n                            \"absolute inset-0 z-10 bg-background overflow-y-auto\",\n                            showSidebar ? \"translate-x-0\" : \"-translate-x-full\"\n                        )\n                        : cn(\n                            isProfileMenuCollapsed ? \"w-[70px]\" : \"w-full md:w-[320px] lg:w-[360px]\",\n                            \"overflow-hidden\"\n                        )\n                )}>\n                    {/* Re-using ProfileHeader as vertical sidebar */}\n                    {profileConfig && formData && (\n                        <ProfileHeader\n                            profile={formData}\n                            config={profileConfig}\n                            activeTab={activeTab}\n                            onTabChange={handleTabChange}\n                            isTabCompleted={(tabId) => isTabCompleted(formData, tabId, profileConfig)}\n                            isTabAccessible={(data, tabId, config) => isTabAccessible(data, tabId, config)}\n                            nextIncompleteSection={nextIncompleteTab}\n                            highlightTabId={stepData?.highlightTab || nextIncompleteTab}\n                            collapsed={isProfileMenuCollapsed}\n                            onToggle={() => setIsProfileMenuCollapsed(!isProfileMenuCollapsed)}\n                            onAutofill={handleAutofill}\n                        />\n                    )}\n                </div>\n\n                {/* Right: Content Area (Form) */}\n                <div className={cn(\n                    \"flex-1 flex flex-col bg-transparent relative min-w-0 min-h-0 transition-all duration-300 custom-scrollbar\",\n                    isMobile && !showSidebar ? \"translate-x-0 overflow-y-auto\" : isMobile ? \"translate-x-full absolute inset-0 z-20 overflow-y-auto\" : \"overflow-y-auto\"\n                )} style={{ scrollbarGutter: 'stable' }}>\n                    {renderLoadingOrError() || (\n                        <div className=\"flex-1\">\n                            <div className=\"w-full\">\n                                <div className=\"animate-in slide-in-from-bottom-2 duration-500\">\n                                    {currentTabComponent()}\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Dialogs */}\n            {showDocumentsView && (\n                <Dialog\n                    isOpen={showDocumentsView}\n                    onClose={handleCloseDocumentsView}\n                    title={t('personalDetails.selectDocument', 'Select Document')}\n                    size=\"small\"\n                >\n                    <div className=\"space-y-4\">\n                        {availableDocuments.length === 0 ? (\n                            <div className=\"text-center py-12 animate-in fade-in duration-500\">\n                                <div\n                                    className=\"mx-auto w-20 h-20 rounded-full bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center mb-6 shadow-lg shadow-primary/15\"\n                                >\n                                    <FiFileText className=\"text-primary/60\" size={36} />\n                                </div>\n                                <p className=\"text-muted-foreground text-base\" style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>\n                                    {t('personalDetails.noDocumentsAvailable', 'No documents available. Please upload a document first.')}\n                                </p>\n                            </div>\n                        ) : (\n                            <div className=\"space-y-3 max-h-96 overflow-y-auto custom-scrollbar\">\n                                {availableDocuments.map((doc, index) => (\n                                    <div\n                                        key={index}\n                                        className=\"flex items-center justify-between gap-4 p-4 border border-border rounded-lg hover:bg-muted/30 transition-colors cursor-pointer\"\n                                        onClick={() => handleSelectDocument(doc)}\n                                    >\n                                        <div className=\"flex items-center gap-4 flex-1 min-w-0\">\n                                            <div className=\"p-2 rounded-lg bg-primary/10 text-primary\">\n                                                <FiFileText size={20} />\n                                            </div>\n                                            <div className=\"flex-1 min-w-0\">\n                                                <div className=\"font-semibold text-sm truncate mb-1\" style={{ color: 'hsl(var(--foreground))', fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>\n                                                    {doc.originalFileName || doc.fileName || `Document ${index + 1}`}\n                                                </div>\n                                                <div className=\"flex items-center gap-2 text-xs text-muted-foreground\" style={{ fontFamily: 'var(--font-family-text, Roboto, sans-serif)' }}>\n                                                    {doc.type && (\n                                                        <span className=\"px-2 py-0.5 rounded-full bg-primary/10 text-primary font-medium\">\n                                                            {t(`dashboardProfile:documents.${doc.type}`, doc.type)}\n                                                        </span>\n                                                    )}\n                                                    {doc.uploadedAt && (\n                                                        <span> {new Date(doc.uploadedAt).toLocaleDateString()}</span>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"shrink-0\">\n                                            {/* Button removed as per design change */}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n                        <div className=\"flex justify-end gap-3 pt-4 border-t border-border\">\n                            <Button\n                                variant=\"secondary\"\n                                onClick={handleCloseDocumentsView}\n                            >\n                                {t('common.cancel')}\n                            </Button>\n                        </div>\n                    </div>\n                </Dialog>\n            )}\n            <Dialog\n                isOpen={showConfirmTabDialog}\n                onClose={cancelTabSwitch}\n                title={t('validation:confirmTabChangeTitle')}\n                actions={<><Button onClick={cancelTabSwitch} variant=\"secondary\">{t('common:cancel')}</Button><Button onClick={confirmAndSwitchTab} variant=\"confirmation\">{t('common:saveAndContinue')}</Button></>}\n            ><p>{t('validation:unsavedChangesWarningNavigate')}</p></Dialog>\n\n            <Dialog\n                isOpen={showCancelDialog}\n                onClose={declineCancelChanges}\n                title={t('validation:confirmCancelTitle')}\n                messageType=\"warning\"\n                actions={<><Button onClick={declineCancelChanges} variant=\"secondary\">{t('common:no')}</Button><Button onClick={confirmCancelChanges} variant=\"warning\">{t('common:yesDiscard')}</Button></>}\n            ><p>{t('validation:discardChangesWarning')}</p></Dialog>\n        </div>\n    );\n};\n\nexport default Profile;","var map = {\n\t\"./professionals-doctor.json\": [\n\t\t1038,\n\t\t1038\n\t],\n\t\"./professionals-pharmacist.json\": [\n\t\t5555,\n\t\t5555\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 6456;\nmodule.exports = webpackAsyncContext;","import { useState, useEffect } from 'react';\n\nexport const useMobileView = () => {\n  const [isMobile, setIsMobile] = useState(() => {\n    return typeof window !== 'undefined' ? window.innerWidth < 768 : false;\n  });\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return isMobile;\n};\n\nexport default useMobileView;\n\n"],"names":["_ref","profile","config","activeTab","onTabChange","isTabCompleted","isTabAccessible","nextIncompleteSection","highlightTabId","collapsed","onToggle","onAutofill","showMenu","setShowMenu","useState","isMobile","useMobileView","t","useTranslation","isTutorialActive","stepData","useTutorial","isAutofillHighlighted","highlightUploadButton","tabs","getIconForTab","tabId","_jsx","FiUser","className","FiBriefcase","FiCreditCard","FiFileText","FiSettings","_jsxs","cn","children","onClick","title","FiChevronRight","size","_Fragment","FiChevronLeft","map","tab","isActive","id","isCompleted","isAccessible","isHighlighted","handleTabClick","labelKey","FiCheckCircle","FiCircle","style","pointerEvents","userSelect","e","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","console","log","concat","FiZap","mockProfileData","personalDetails","identity","legalFirstName","legalLastName","dateOfBirth","nationality","ahvNumber","contact","residentialAddress","street","number","postalCode","city","canton","country","primaryPhonePrefix","primaryPhone","primaryEmail","professionalBackground","education","degree","institution","field","startDate","endDate","currentlyStudying","gpa","honors","workExperience","jobTitle","employer","location","current","description","qualifications","type","licenseNumber","dateObtained","validForLife","isVerified","billingInformation","employmentEligibility","workPermit","expiryDate","permitNumber","issuingCanton","payrollData","numberOfChildren","civilStatus","withholdingTaxInfo","isSubject","taxCanton","religion","banking","iban","bankName","accountHolderName","settings","platformSettings","detailedAvailability","availabilityType","maxHoursPerWeek","noticePeriodShortTerm","onCallPreferences","longTermContractEarliestStartDate","Date","now","toISOString","split","notes","defaultMarketplaceRadius","contractAutoApproval","enabled","minimumHoursInAdvance","isActiveOnMarketplace","notificationPreferences","email","push","sms","marketplaceUpdates","scheduleChanges","contractUpdates","facilityCoreDetails","facilityName","facilityType","address","mainPhoneNumber","mainEmail","website","facilityLegalBilling","legalEntityName","uidNumber","commercialRegisterNumber","legalRepresentative","firstName","lastName","phone","billingContact","name","facilityIBAN","facilityBankName","styles","sectionContainer","headerCard","sectionTitle","sectionTitleStyle","fontSize","color","fontFamily","sectionSubtitle","subtitleRow","mandatoryFieldLegend","mandatoryMark","sectionsWrapper","leftColumn","rightColumn","sectionCard","cardHeader","cardIconWrapper","cardTitle","cardTitleH3","cardTitleH3Style","grid","gridSingle","fieldWrapper","fullWidth","formActions","_displayProfile$first","_displayProfile$ident","_displayProfile$ident2","_displayProfile$lastN","_displayProfile$ident3","_displayProfile$ident4","formData","errors","isSubmitting","onInputChange","onSaveAndContinue","onCancel","getNestedValue","onTriggerUpload","onStepGuideVisibilityChange","currentUser","useAuth","uploadImageAndRetrieveURL","useProfileData","isUploadingPicture","setIsUploadingPicture","pictureError","setPictureError","fileInputRef","useRef","showStepGuide","useEffect","countryOptions","cantonOptions","residencyPermitOptions","availabilityStatusOptions","contractTypeOptions","educationLevelOptions","phonePrefixOptions","useDropdownOptions","getDropdownOptions","useCallback","optionsKey","groupedFields","useMemo","_config$fields","fields","groups","order","forEach","groupKey","group","Object","keys","sort","a","b","indexA","indexOf","indexB","localeCompare","key","handleCancel","window","reload","displayProfile","profilePicture","photoURL","renderField","fieldConfig","required","placeholder","label","value","error","fieldKey","commonProps","wrapperClassName","maxDate","setFullYear","getFullYear","undefined","dateValue","onChange","target","max","borderColor","SimpleDropdown","options","newValue","InputField","_objectSpread","renderContactFields","phonePrefixField","find","f","phoneField","emailField","getGroupIcon","FiMapPin","FiPhone","FiInfo","getGroupTitle","charAt","toUpperCase","slice","_fileInputRef$current","click","src","alt","ref","async","file","files","startsWith","reader","FileReader","onload","uid","event","result","readAsDataURL","accept","filter","TextareaField","maxLength","rows","marginTop","Button","variant","disabled","checked","showError","useNotification","backgroundColor","opacity","labelColor","switchColor","marginRight","marginBottom","marginLeft","itemTitleStyle","fontWeight","sectionContent","formSectionError","emptyStateText","addItemForm","itemDisplayLine","itemContent","itemActions","errorText","onArrayChange","i18n","dropdownOptionsFromHook","sectionConfig","itemSchemas","formStates","setFormStates","initialStates","showForm","editIndex","itemData","itemErrors","mappedOptionsKey","suffixedKey","optionsFromHook","length","dropdownTranslations","getResourceBundle","language","entries","_ref2","_ref3","warn","setLocalItemErrors","sectionKey","prev","resetFormState","handleItemChange","fieldName","newState","cloneDeep","set","handleAddOrUpdateItem","_sectionConfig$sectio","currentFormState","itemSchemaRef","itemSchema","fullSectionPath","currentList","validationResult","validateProfileItem","isValid","fieldRule","dependsOn","validationRules","isActuallyRequired","dependentValue","get","conditionMet","dependsOnValue","includes","dependsOnValueExclude","minLength","String","count","pattern","RegExp","test","patternErrorKey","updatedList","resetFormStateCallback","setLocalErrorsCallback","list","Array","isArray","item","index","addOrUpdateProfileItem","handleDeleteItem","indexToDelete","_","i","deleteProfileItem","getSectionIcon","FiBookOpen","FiAward","renderListSection","mainSectionRule","mainSectionError","subsectionTitle","replace","classNames","display","alignItems","gap","flexDirection","React","padding","margin","justifyContent","handleShowEditForm","FiEdit","FiTrash2","height","textAlign","handleShowAddForm","FiPlus","renderItemFormField","maxYear","dependencyMet","wrapInput","component","isFullWidth","arguments","maxDateValue","Switch","CheckboxField","handleCancelForm","hiringMandatoryMark","showHiringInfo","setShowHiringInfo","fieldsToRender","checkDependency","isSingleColumn","restConfig","_objectWithoutProperties","_excluded","showHiringStar","requiredForHiring","finalLabel","min","groupName","payrollFields","taxFields","beforeTax","afterTax","foundReligion","handleSaveAndContinueClick","some","v","_unused","residency","insurance","FiShield","billingAddress","FiHome","FiDollarSign","Dialog","isOpen","onClose","actions","errorUpload","upload","uploadState","useFileUpload","setUploadState","isLoading","progress","path","docType","downloadURL","uploadFile","message","isSwiss","documentFieldsConfig","documentUploads","descriptionKey","educationList","workExperienceList","normalizeDocumentName","fileName","educationIndex","qualificationIndex","workExperienceIndex","referenceType","extension","pop","normalizedBase","substring","lastIndexOf","toLowerCase","timestamp","edu","qual","workExp","handleFileUpload","referenceValue","isMultiple","refEducationIndex","parseInt","userId","normalizedFileName","uploadedAt","fileMetadata","documentId","category","originalFileName","storageUrl","fileSize","fileType","status","currentDocs","filteredDocs","doc","handleRemoveDocument","indexOrUrlToRemove","updatedDocs","docToRemove","getCurrentFiles","docsOfType","url","qualificationsList","getEducationOptions","toString","getQualificationOptions","getReferenceLetterOptions","RenderDocumentCard","currentFiles","isCurrentlyUploading","inputRef","getInitialEducationIndex","_currentFiles$","getInitialQualificationIndex","_currentFiles$2","getInitialReferenceValue","_currentFiles$3","selectedEducationIndex","setSelectedEducationIndex","selectedQualificationIndex","setSelectedQualificationIndex","selectedReferenceValue","setSelectedReferenceValue","showEducationDropdown","showQualificationDropdown","showReferenceDropdown","uploadButtonLabel","renderDocumentItem","fileData","totalItems","parts","URL","pathname","decodeURIComponent","getFileNameFromUrl","displayName","itemUrl","width","flex","minWidth","overflow","textOverflow","whiteSpace","_doc$educationIndex","_doc$qualificationInd","FiUploadCloud","paddingBottom","UploadFile","documentName","eduIndex","qualIndex","refValue","API_BASE","process","REACT_APP_API_BASE_URL","apiRequest","endpoint","token","user","auth","Error","getIdToken","getAuthToken","response","fetch","headers","data","json","ok","getDeletionPreview","method","deleteAccount","reason","body","JSON","stringify","confirmPhrase","AccountDeletion","_deletionPreview$what","_deletionPreview$what2","logout","showNotification","deletionPreview","setDeletionPreview","isLoadingPreview","setIsLoadingPreview","isDeleteDialogOpen","setIsDeleteDialogOpen","isReauthDialogOpen","setIsReauthDialogOpen","isProcessingDelete","setIsProcessingDelete","setConfirmPhrase","confirmError","setConfirmError","reauthPassword","setReauthPassword","reauthError","setReauthError","authProvider","setAuthProvider","_currentUser$provider","isGoogleUser","providerData","provider","providerId","preview","loadPreview","handleDeleteClick","handleConfirmDelete","processAccountDeletion","success","href","handleReauthAndDelete","GoogleAuthProvider","signInWithPopup","credential","EmailAuthProvider","reauthenticateWithCredential","code","FiX","whatWillBeDeleted","hasLegalRecords","FiArchive","whatWillBeRetained","retentionPeriod","FiLock","FiCheck","FiAlertTriangle","icon","messageType","PersonnalizedInputField","InputFieldHideUnhide","showErrors","platformSettingsWithoutNotes","_groupedFields$platfo","notesField","_groupedFields$platfo2","privacy","marketplace","FiGlobe","availability","FiClock","notifications","FiBell","FiUserX","_config$tabs","legacyOptionName","legacyOptionsFromHook","directOptions","dropdownOptionsResolved","placeholderKey","infoKey","selectedOption","opt","infoText","currentTabConfig","fallback","trim","c","facilityId","fileExtension","baseName","currentUrls","updatedUrls","operationalSettings","contractSettings","calculateProfileCompleteness","TABS_FOR_COMPLETENESS","completedTabs","Math","round","profileData","fieldsOrRules","every","isComplete","rules","minItems","_config$tabs$","tabIndex","findIndex","Profile","_extractedData$person","_extractedData$person2","_extractedData$person3","_extractedData$person4","_extractedData$person5","_extractedData$person6","_extractedData$profes","_extractedData$profes2","_extractedData$profes3","navigate","useNavigate","useLocation","setProfileCompletionStatus","useDashboard","pageMobileContext","usePageMobile","initialProfileData","isLoadingData","profileError","updateProfileData","initializeProfileDocument","refreshProfileData","setActiveTab","setFormData","profileConfig","setProfileConfig","isLoadingConfig","setIsLoadingConfig","originalData","setIsSubmitting","setErrors","subscriptionStatus","setSubscriptionStatus","isProfileMenuCollapsed","setIsProfileMenuCollapsed","showSidebar","setShowSidebar","showConfirmTabDialog","setShowConfirmTabDialog","nextTabToNavigate","setNextTabToNavigate","showCancelDialog","setShowCancelDialog","showAutoFillDialog","setShowAutoFillDialog","showDocumentsView","setShowDocumentsView","selectedDocumentType","setSelectedDocumentType","isAnalyzing","setIsAnalyzing","extractedData","setExtractedData","showAnalysisConfirmation","setShowAnalysisConfirmation","cachedData","setCachedData","cached","getCachedExtractedData","loadCachedData","autoFillButtonRef","isFormModified","isEqual","then","tutorialPassed","startTutorial","activeTutorial","completedTutorials","currentStep","isWaitingForSave","onTabCompleted","profileTutorialStartedRef","isUploading","setIsUploading","uploadProgress","setUploadProgress","uploadInputRef","isProfessional","role","profileTabs","timer","setTimeout","clearTimeout","profileType","_configModule","_configModule$default","_configModule$default2","_configModule$default3","_configModule2","_configModule2$tabs","_configModule2$tabs$","configModule","default","deepCopiedData","_config","loadConfig","fetchSubscriptionStatus","_formData$subscriptio","subscription","platformSubscriptionPlan","subscriptionTier","tier","isPremium","_initialProfileData$s","_onboardingDocumentsMerged","_formData$verificatio","userDocRef","db","userDoc","getDoc","exists","userData","onboardingDocs","onboardingDocuments","existingDocs","verification","verificationDocuments","existingPaths","Set","d","storagePath","newDocs","has","convertedDocs","random","substr","id_type","subfolder","mimeType","verified","verificationStatus","source","mergeOnboardingDocuments","pathParts","tabFromUrl","validTabIds","targetTab","endsWith","currentUrlEnd","handleInputChange","currentFormData","newFormData","prevErrors","newErrors","handleArrayChange","arrayName","newArray","obj","processAndFillProfile","document","processDocumentWithAI","handleCloseAutoFillDialog","_profileConfig$fields","_profileConfig$fields2","updatedFormData","documentFieldConfig","documents","cv","fieldPath","verificationDocumentsProvided","dbError","handleUploadButtonClick","isAutoFillDisabled","handleAutoFillClick","handleCloseDocumentsView","handleSelectDocument","applyExtractedData","mergeExtractedData","handleFillEmptyFields","cancelAnalysis","handleAutofill","mockData","successMsg","reduce","acc","availableDocuments","documentTypeOptions","_profileConfig$fields3","selectedDocumentTypeConfig","_profileConfig$fields4","_profileConfig$fields5","handleUseCachedData","validateCurrentTabData","currentTabId","checkField","shouldValidate","handleSave","navigateToNextTab","isDataValid","shouldUpdateProfileCompletionStatus","updatedData","currentIndex","nextTab","err","handleSaveAndContinue","setPageMobileState","handleBack","_profileConfig$tabs","_profileConfig$tabs$","handleTabChange","confirmAndSwitchTab","savedSuccessfully","cancelTabSwitch","handleCancelChanges","confirmCancelChanges","declineCancelChanges","completionPercentage","nextIncompleteTab","LoadingSpinner","FiUpload","professionalSummary","ProfileHeader","highlightTab","scrollbarGutter","renderLoadingOrError","currentTabComponent","isFacility","PersonalDetails","ProfessionalBackground","BillingInformation","ProfessionalDocumentUploads","FacilityDetails","FacilityDocumentUploads","FacilitySettings","ProfessionalSettings","toLocaleDateString","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","ids","module","exports","setIsMobile","innerWidth","handleResize","addEventListener","removeEventListener"],"ignoreList":[],"sourceRoot":""}