(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[83],{5083:(e,t,a)=>{"use strict";a.r(t),a.d(t,{calculateProfileCompleteness:()=>pe,default:()=>ge,isTabAccessible:()=>xe,isTabCompleted:()=>fe});var r=a(9379),n=a(5043),l=a(4117),i=a(3216),o=a(3536),s=a(5200),c=a(5016),d=a(6471),u=a(6667),m=a(6068),p=a(3339);const f=(0,m.c7)(),x=["uid","email","emailVerified","role","profileType","firstName","lastName","displayName","photoURL","createdAt","updatedAt"],g=e=>{if(!e)return e;if(Array.isArray(e))return e.map(g);if(e instanceof u.Dc)return e.toDate();if("object"===typeof e&&null!==e){const t={};for(const a in e)t[a]=g(e[a]);return t}return e},h=e=>{if(void 0===e)return;if(null===e||"object"!==typeof e||e instanceof Date||e instanceof u.Dc)return e;if(Array.isArray(e)){return e.map(h).filter(e=>void 0!==e)}const t={};let a=!1;for(const[r,n]of Object.entries(e)){const e=h(n);void 0!==e&&(t[r]=e,a=!0)}return a?t:0===Object.keys(e).length?{}:void 0},v=()=>{const{currentUser:e}=(0,c.A)(),[t,a]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),[o,s]=(0,n.useState)(null),d=(0,n.useCallback)(e=>"facility"===e||"company"===e?"facilityProfiles":("professional"===e||console.warn("[useProfileData] Unknown role: ".concat(e,", defaulting to professionalProfiles")),"professionalProfiles"),[]),v=(0,n.useCallback)(e=>"facility"===e||"company"===e?"pharmacy":"professional"===e?"doctor":"default",[]),y=(0,n.useCallback)(async()=>{if(!e)return i(!1),a(null),null;i(!0),s(null);try{const t=(0,u.doc)(p.db,"users",e.uid),n=await(0,u.getDoc)(t);if(!n.exists())return console.warn("[useProfileData] User document not found. Call initializeProfileDocument."),i(!1),{uid:e.uid,email:e.email,role:"professional",profileType:v("professional")};const l=g(n.data()),o=l.role||"professional",s=l.profileType||v(o);l.role&&l.profileType||console.warn("[useProfileData] User role or profileType missing, will attempt to update in init.");const c=d(o),m=(0,u.doc)(p.db,c,e.uid),f=await(0,u.getDoc)(m);let x=(0,r.A)((0,r.A)({},l),{},{role:o,profileType:s});if(f.exists()){const e=g(f.data());x=(0,r.A)((0,r.A)({},x),e)}else console.warn("[useProfileData] Profile document in ".concat(c," not found."));return a(x),x}catch(t){return console.error("[useProfileData] Error fetching profile data:",t),s(t.message),null}finally{i(!1)}},[e,d,v]);(0,n.useEffect)(()=>{e?y():(a(null),i(!1))},[e,y]);const b=(0,n.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"professional",a=arguments.length>1?arguments[1]:void 0;if(!e)return!1;console.log("[useProfileData] Initializing Profile Document for role: ".concat(t,", type: ").concat(a)),i(!0);try{const i=(0,u.doc)(p.db,"users",e.uid);let o=await(0,u.getDoc)(i),s={};const c=t,m=a||v(c);var n,l;if(o.exists())s=g(o.data()),s.role===c&&s.profileType===m&&s.role&&s.profileType||(await(0,u.updateDoc)(i,{role:c,profileType:m,updatedAt:u.Dc.now()}),s.role=c,s.profileType=m);else console.log("[useProfileData] Creating new user document with role and type..."),s={uid:e.uid,email:e.email,role:c,profileType:m,createdAt:u.Dc.now(),updatedAt:u.Dc.now(),firstName:(null===(n=e.displayName)||void 0===n?void 0:n.split(" ")[0])||"",lastName:(null===(l=e.displayName)||void 0===l?void 0:l.split(" ").slice(1).join(" "))||"",photoURL:e.photoURL||""},await(0,u.BN)(i,s);const f=d(c),x=(0,u.doc)(p.db,f,e.uid);if(!(await(0,u.getDoc)(x)).exists()){console.log("[useProfileData] Creating new ".concat(f," document for type ").concat(m,"..."));const t=(0,r.A)((0,r.A)({userId:e.uid,createdAt:u.Dc.now(),updatedAt:u.Dc.now()},"professional"===c?{education:[],licensesCertifications:[]}:{}),"facility"===c?{facilityName:"".concat(s.firstName||"New"," ").concat("facility"===c?m:"").trim()}:{});await(0,u.BN)(x,t)}return console.log("[useProfileData] Initialization check complete."),await y(),!0}catch(o){return console.error("[useProfileData] Error initializing profile:",o),s(o.message),!1}finally{i(!1)}},[e,d,v,y]),j=async(e,t)=>{if(!e||!t)throw new Error("UserId and image data are required");try{const a=await fetch(t),r=await a.blob(),n=(0,m.KR)(f,"profile-pictures/".concat(e,"/").concat(Date.now(),".jpg"));await(0,m.D)(n,r);return await(0,m.qk)(n)}catch(o){throw console.error("[useProfileData] Error uploading profile picture:",o),o}};return{profileData:t,isLoading:l,error:o,fetchProfileData:y,refreshProfileData:y,updateProfileData:async function(n){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{forceRefresh:o=!1}=l;if(!e)throw new Error("User not authenticated.");if(!t)throw new Error("Original profile data not loaded for context.");i(!0),console.log("[useProfileData] Attempting to save:",n);try{const l={},i={},s=u.Dc.now(),c=n.role||t.role||"professional",m=n.profileType||t.profileType||v(c);for(const[e,t]of Object.entries(n))x.includes(e)?l[e]=t:i[e]=t;l.role=c,l.profileType=m;const f=d(c),g=(0,u.doc)(p.db,"users",e.uid),b=(0,u.doc)(p.db,f,e.uid);if(Object.keys(l).length>0){l.updatedAt=s;const e=h(l);e&&Object.keys(e).length>0&&(console.log("[useProfileData] Updating User Doc:",e),await(0,u.updateDoc)(g,e))}if(Object.keys(i).length>0){i.updatedAt=s,i.userId||(await(0,u.getDoc)(b)).exists()||(i.userId=e.uid,i.createdAt=s);const t=h(i);t&&Object.keys(t).length>0&&(console.log("[useProfileData] Updating Profile Doc in ".concat(f,":"),t),await(0,u.BN)(b,t,{merge:!0}))}if(o){console.log("[useProfileData] Force refresh enabled - fetching fresh data from server");return await y()}const j=(0,r.A)((0,r.A)((0,r.A)({},t),n),{},{role:c,profileType:m,updatedAt:s.toDate()});return a(j),console.log("[useProfileData] Update successful. Returning merged data (no re-fetch)."),j}catch(c){throw console.error("[useProfileData] Error updating profile data:",c),s(c.message),c}finally{i(!1)}},initializeProfileDocument:b,uploadProfilePicture:j,uploadImageAndRetrieveURL:j,changeUserRoleAndProfileType:async(t,a)=>{if(!e)throw new Error("Not authenticated");return await(0,u.updateDoc)((0,u.doc)(p.db,"users",e.uid),{role:t,profileType:a,updatedAt:u.Dc.now()}),await b(t,a),y()}}};var y=a(5242),b=a(2383),j=a(8264),w=a(8096),N=(a(9521),a(3909)),C=a(4315),T=a(8564),A=a(5073),k=a(6911),S=a(4764),D=a(579);const I=e=>{let{profile:t,config:a,activeTab:r,onTabChange:n,isTabCompleted:i,isTabAccessible:o,nextIncompleteSection:c,highlightTabId:d,collapsed:u=!1,onToggle:m}=e;const p=(0,j.n)(),{t:f}=(0,l.Bd)(["dashboardProfile","tabs"]),x=(null===a||void 0===a?void 0:a.tabs)||[],g=e=>{switch(e){case"personalDetails":default:return(0,D.jsx)(s.JXP,{className:"w-5 h-5 shrink-0"});case"professionalBackground":return(0,D.jsx)(s.qYx,{className:"w-5 h-5 shrink-0"});case"billingInformation":return(0,D.jsx)(s.lZI,{className:"w-5 h-5 shrink-0"});case"documentUploads":return(0,D.jsx)(s.jH2,{className:"w-5 h-5 shrink-0"});case"settings":return(0,D.jsx)(s.VSk,{className:"w-5 h-5 shrink-0"})}};return(0,D.jsxs)("div",{className:(0,S.cn)("w-full h-fit bg-card rounded-xl border border-border/60 transition-all duration-300 ease-in-out overflow-x-hidden",u?"p-2":"p-4"),children:[m&&!p&&(0,D.jsx)("div",{className:(0,S.cn)("border-b border-border mb-3",u?"px-1 pb-2":"px-1 pb-3"),children:(0,D.jsx)("button",{onClick:m,className:(0,S.cn)("w-full h-10 rounded-md hover:bg-muted/50 text-muted-foreground/70 transition-colors flex items-center gap-2",u?"justify-center px-2":"justify-start px-2"),title:u?"Expand":"Collapse",children:u?(0,D.jsx)(s.fOo,{size:18}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(s.irw,{size:18}),(0,D.jsx)("span",{className:"text-sm font-medium",children:"Collapse"})]})})}),(0,D.jsx)("nav",{className:(0,S.cn)("flex flex-col","gap-3"),children:x.map(e=>{const l=r===e.id,c=i(t,e.id,a),m=o(t,e.id,a),p=d===e.id&&!c;return m?(0,D.jsxs)("button",{"data-tab":e.id,onClick:()=>{return r=e.id,void(o(t,r,a)&&n(r));var r},className:(0,S.cn)("group relative flex gap-3 rounded-lg hover:bg-muted/50 transition-all cursor-pointer border min-w-0",u?"p-2 justify-center":"p-3",l&&"bg-primary/5 border-primary/10",p&&"border-primary/30 bg-primary/10 ring-2 ring-primary/20",!l&&!p&&"border-transparent"),children:[(0,D.jsx)("div",{className:(0,S.cn)("w-1.5 h-full absolute left-0 top-0 bottom-0 rounded-l-lg",l&&"bg-primary")}),(0,D.jsxs)("div",{className:(0,S.cn)("w-full flex items-center justify-between min-w-0",u?"justify-center pl-0":"pl-2"),children:[(0,D.jsxs)("div",{className:(0,S.cn)("flex items-center min-w-0",u?"justify-center":"gap-3"),children:[(0,D.jsx)("div",{className:(0,S.cn)("transition-colors shrink-0",l?"text-primary":"text-muted-foreground group-hover:text-foreground"),children:g(e.id)}),!u&&(0,D.jsx)("span",{className:(0,S.cn)("text-sm font-medium truncate",l?"text-foreground":"text-muted-foreground group-hover:text-foreground"),children:f(e.labelKey,e.id)})]}),!u&&(0,D.jsx)("div",{className:"ml-2 shrink-0",children:c?(0,D.jsx)(s.A3x,{className:"w-4 h-4 text-green-500/80"}):(0,D.jsx)(s.sxA,{className:(0,S.cn)("w-4 h-4",l?"text-primary/40":"text-muted-foreground/20")})})]}),u&&(0,D.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap border border-border",children:[f(e.labelKey,e.id),c&&(0,D.jsx)("span",{className:"ml-1 text-green-500",children:"\u2713"})]})]},e.id):(0,D.jsxs)("div",{"data-tab":e.id,"data-tutorial-disabled":"true",className:(0,S.cn)("group relative flex gap-3 rounded-lg border min-w-0 transition-all duration-200 outline-none",u?"p-2 justify-center":"p-3","text-muted-foreground/40 cursor-not-allowed pointer-events-none select-none","border-transparent"),style:{pointerEvents:"none",userSelect:"none"},onClick:t=>(t.preventDefault(),t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),console.log("[ProfileHeader] Click prevented on ".concat(e.id," - tab is locked (rendered as div)")),!1),children:[(0,D.jsx)("div",{className:(0,S.cn)("w-1.5 h-full absolute left-0 top-0 bottom-0 rounded-l-lg")}),(0,D.jsxs)("div",{className:(0,S.cn)("w-full flex items-center justify-between min-w-0",u?"justify-center pl-0":"pl-2"),children:[(0,D.jsxs)("div",{className:(0,S.cn)("flex items-center min-w-0",u?"justify-center":"gap-3"),children:[(0,D.jsx)("div",{className:(0,S.cn)("shrink-0","bg-muted/10 text-muted-foreground/40"),children:g(e.id)}),!u&&(0,D.jsx)("span",{className:(0,S.cn)("text-sm font-medium truncate","text-muted-foreground/40"),children:f(e.labelKey,e.id)})]}),!u&&(0,D.jsx)("div",{className:"ml-2 shrink-0",children:(0,D.jsx)(s.sxA,{className:"w-4 h-4 text-muted-foreground/20"})})]}),u&&(0,D.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap border border-border",children:[f(e.labelKey,e.id)," (Locked)"]})]},e.id)})})]})};var E=a(325),P=a(7588);var O=a(2814),F=a(4046),R=a(6149);const L={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-0",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"personal-details-sections-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",gridSingle:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},H=e=>{var t,a,i,o,d,u;let{formData:m,config:p,errors:f,isSubmitting:x,onInputChange:g,onSaveAndContinue:h,onCancel:y,getNestedValue:b,onTriggerUpload:j,onStepGuideVisibilityChange:w}=e;const{t:N}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),{currentUser:T}=(0,c.A)(),{uploadImageAndRetrieveURL:A}=v(),[S,I]=(0,n.useState)(!1),[E,P]=(0,n.useState)(""),H=(0,n.useRef)(null),[_]=(0,n.useState)(!0);(0,n.useEffect)(()=>{w&&w(_)},[_,w]);const{countryOptions:W,cantonOptions:U,residencyPermitOptions:M,availabilityStatusOptions:q,contractTypeOptions:B,educationLevelOptions:z,phonePrefixOptions:V}=(0,O.n)(),K=(0,n.useCallback)(e=>{switch(e){case"countries":return W;case"cantons":return U;case"workPermits":return M;case"availability":return q;case"contractTypes":return B;case"education":return z;case"phonePrefixes":return V;default:return[]}},[W,U,M,q,B,z,V]),Y=(0,n.useMemo)(()=>{var e;const t=(null===p||void 0===p||null===(e=p.fields)||void 0===e?void 0:e.personalDetails)||[],a={},r=["identity","address","contact"];t.forEach(e=>{const t=e.group||"other";a[t]||(a[t]=[]),a[t].push(e)});return Object.keys(a).sort((e,t)=>{const a=r.indexOf(e),n=r.indexOf(t);return-1!==a&&-1!==n?a-n:-1!==a?-1:-1!==n?1:e.localeCompare(t)}).map(e=>({key:e,fields:a[e]}))},[p]),G=(0,n.useCallback)(()=>{y?y():window.location.reload()},[y]),Z=m||T||{},Q=b(m,"profilePicture")||(null===m||void 0===m?void 0:m.profilePicture)||(null===T||void 0===T?void 0:T.photoURL),X=(e,t)=>{const{name:a,type:n,required:l,labelKey:i,optionsKey:o,placeholder:s}=e,c=N(i,a),d=b(m,a),u=b(f,a),p=a,x={label:c,error:u,required:l,wrapperClassName:L.fieldWrapper};if("date"===n){const e="identity.dateOfBirth"===a?new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0]:void 0,t=d?"string"===typeof d?d:new Date(d).toISOString().split("T")[0]:"";return(0,D.jsxs)("div",{className:L.fieldWrapper,children:[c&&(0,D.jsxs)("label",{className:"boxed-date-label ".concat(u?"boxed-date-label--error":""),children:[c,l&&(0,D.jsx)("span",{className:"boxed-inputfield-required",children:"*"})]}),(0,D.jsx)("input",{type:"date",value:t,onChange:e=>g(a,e.target.value||null),max:e,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(u?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:u?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:u?"var(--boxed-inputfield-error-color)":"inherit"}})]},p)}return"dropdown"===n?(0,D.jsx)("div",{className:L.fieldWrapper,children:(0,D.jsx)(k.A,{label:x.label,options:K(o),value:d,onChange:e=>g(a,e),placeholder:N(s||"common.selectPlaceholder"),required:x.required,error:x.error})},p):(0,D.jsx)("div",{className:L.fieldWrapper,children:(0,D.jsx)(F.A,(0,r.A)((0,r.A)({},x),{},{name:a,type:"email"===n?"email":"tel"===n?"tel":"text",value:d||"",onChange:e=>g(a,e.target.value),placeholder:s?N(s):""}))},p)},J=e=>{const t=e.find(e=>"contact.primaryPhonePrefix"===e.name),a=e.find(e=>"contact.primaryPhone"===e.name),r=e.find(e=>"contact.primaryEmail"===e.name);return(0,D.jsxs)("div",{className:L.gridSingle,children:[t&&X(t),a&&X(a),r&&X(r)]})},$=e=>{switch(e){case"identity":return(0,D.jsx)(s.JXP,{});case"address":return(0,D.jsx)(s.HzC,{});case"contact":return(0,D.jsx)(s.QFc,{});default:return(0,D.jsx)(s.S8s,{})}},ee=e=>N({identity:"personalDetails.identityInfo",address:"personalDetails.residentialAddress",contact:"personalDetails.contactInformation"}[e]||"personalDetails.".concat(e),e.charAt(0).toUpperCase()+e.slice(1));return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("style",{children:"\n        .personal-details-container {\n          container-type: inline-size;\n        }\n        @container (min-width: 700px) {\n          .personal-details-sections-wrapper {\n            flex-direction: row;\n          }\n        }\n      "}),(0,D.jsxs)("div",{className:"".concat(L.sectionContainer," personal-details-container"),children:[(0,D.jsx)("div",{className:L.headerCard,children:(0,D.jsxs)("div",{className:"flex items-center gap-6 mb-4",children:[(0,D.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{var e;return null===(e=H.current)||void 0===e?void 0:e.click()},children:[(0,D.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-border group-hover:border-primary transition-colors",children:Q?(0,D.jsx)("img",{src:Q,alt:"Profile",className:"w-full h-full object-cover"}):(0,D.jsxs)("div",{className:"w-full h-full bg-muted flex items-center justify-center text-2xl font-bold text-muted-foreground",children:[(null===Z||void 0===Z||null===(t=Z.firstName)||void 0===t?void 0:t[0])||(null===Z||void 0===Z||null===(a=Z.identity)||void 0===a||null===(i=a.legalFirstName)||void 0===i?void 0:i[0])||"U",(null===Z||void 0===Z||null===(o=Z.lastName)||void 0===o?void 0:o[0])||(null===Z||void 0===Z||null===(d=Z.identity)||void 0===d||null===(u=d.legalLastName)||void 0===u?void 0:u[0])||""]})}),(0,D.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,D.jsx)("span",{className:"text-xs text-white font-medium",children:N("common.edit")})}),(0,D.jsx)("input",{type:"file",ref:H,onChange:async e=>{const t=e.target.files[0];if(!t)return;if(t.size/1048576>2)P(N("accountBasics.errors.fileTooLarge"));else if(t.type.startsWith("image/")){I(!0),P("");try{const e=new FileReader;e.onload=async e=>{const t=await A(T.uid,e.target.result);g("profilePicture",t),I(!1)},e.readAsDataURL(t)}catch(a){console.error("Error uploading profile picture:",a),P(N("accountBasics.errors.uploadFailed")),I(!1)}}else P(N("accountBasics.errors.invalidFileType"))},accept:"image/*",className:"hidden"})]}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsx)("h2",{className:L.sectionTitle,style:L.sectionTitleStyle,children:N("personalDetails.title")}),(0,D.jsxs)("div",{className:L.subtitleRow,children:[(0,D.jsx)("p",{className:L.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:N("personalDetails.subtitle","Please ensure your personal details are accurate and up to date.")}),(0,D.jsxs)("div",{className:L.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:L.mandatoryMark,children:"*"})," ",N("common.mandatoryFields")]})]}),E&&(0,D.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E}),S&&(0,D.jsx)("p",{className:"text-primary text-sm mt-1",children:N("accountBasics.uploading")})]})]})}),(0,D.jsxs)("div",{className:L.sectionsWrapper,children:[(0,D.jsx)("div",{className:L.leftColumn,children:Y.filter(e=>"identity"===e.key||"contact"===e.key).map(e=>(0,D.jsx)("div",{className:L.sectionCard,children:"contact"===e.key?(0,D.jsxs)("div",{className:L.gridSingle,children:[(0,D.jsxs)("div",{className:L.cardHeader,children:[(0,D.jsx)("div",{className:L.cardIconWrapper,children:$(e.key)}),(0,D.jsx)("div",{className:L.cardTitle,children:(0,D.jsx)("h3",{className:L.cardTitleH3,style:L.cardTitleH3Style,children:ee(e.key)})})]}),J(e.fields)]}):(0,D.jsxs)("div",{className:L.grid,children:[(0,D.jsxs)("div",{className:L.cardHeader,children:[(0,D.jsx)("div",{className:L.cardIconWrapper,children:$(e.key)}),(0,D.jsx)("div",{className:L.cardTitle,children:(0,D.jsx)("h3",{className:L.cardTitleH3,style:L.cardTitleH3Style,children:ee(e.key)})})]}),e.fields.map(t=>X(t,e.key))]})},e.key))}),(0,D.jsxs)("div",{className:L.rightColumn,children:[Y.filter(e=>"address"===e.key).map(e=>(0,D.jsx)("div",{className:L.sectionCard,children:(0,D.jsxs)("div",{className:L.grid,children:[(0,D.jsxs)("div",{className:L.cardHeader,children:[(0,D.jsx)("div",{className:L.cardIconWrapper,children:$(e.key)}),(0,D.jsx)("div",{className:L.cardTitle,children:(0,D.jsx)("h3",{className:L.cardTitleH3,style:L.cardTitleH3Style,children:ee(e.key)})})]}),e.fields.map(t=>X(t,e.key))]})},e.key)),(0,D.jsx)("div",{className:L.sectionCard,children:(0,D.jsxs)("div",{className:L.gridSingle,children:[(0,D.jsxs)("div",{className:L.cardHeader,children:[(0,D.jsx)("div",{className:L.cardIconWrapper,children:(0,D.jsx)(s.jH2,{})}),(0,D.jsx)("div",{className:L.cardTitle,children:(0,D.jsx)("h3",{className:L.cardTitleH3,style:L.cardTitleH3Style,children:N("personalDetails.summary","Summary")})})]}),(0,D.jsx)("div",{className:L.gridSingle,children:(0,D.jsx)(R.A,{label:"",name:"bio",value:b(m,"bio")||"A recent graduate with a Master's degree in Pharmaceutical Sciences from ETH Zurich, specializing in research and immunology. William Abhamon possesses extensive hands-on experience in cutting-edge pharmaceutical research, including developing antibody fragments, investigating receptor aggregation, and studying protein-RNA interactions. Complementing his strong scientific background, he brings practical pharmacy experience, leadership skills from student associations, and proficiency in advanced scientific software and programming languages.",onChange:e=>g("bio",e.target.value),placeholder:N("personalDetails.summaryPlaceholder","Tell us about your professional background..."),error:b(f,"bio"),maxLength:1e3,rows:8,wrapperClassName:L.fieldWrapper})})]})})]})]}),(0,D.jsx)("div",{className:L.sectionCard,children:(0,D.jsxs)("div",{className:L.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:G,variant:"secondary",disabled:x,children:N("common.cancel")}),(0,D.jsx)(C.A,{onClick:h,variant:"confirmation",disabled:x,children:N(x?"common.saving":"common.saveAndContinue")})]})})]})]})};var _=a(8139),W=a.n(_);const U=e=>{let{label:t,checked:a=!1,onChange:r,color:l,error:i=null,required:o=!1,name:s=""}=e;const{showError:c}=(0,d.h)();(0,n.useEffect)(()=>{i&&c(i)},[i,c]);return(0,D.jsx)("div",{className:"checkbox-wrapper",children:(0,D.jsxs)("label",{className:"checkbox-container ".concat(i?"checkbox-container--error":""),children:[(0,D.jsx)("input",{type:"checkbox",name:s,checked:a,onChange:e=>{i&&r?r(e,null):r(e)},required:o}),(0,D.jsx)("span",{className:"checkmark",style:{backgroundColor:a?l:"#fff",borderColor:i?"var(--red-3)":l,opacity:a?1:.5}}),(0,D.jsxs)("span",{className:"checkbox-label ".concat(i?"checkbox-label--error":""),style:{opacity:a?1:.5},children:[t,o&&(0,D.jsx)("span",{className:"checkbox-required",children:"*"})]})]})})},M=e=>{let{label:t,checked:a=!1,onChange:r,labelColor:n="#333",switchColor:l="#4CAF50",marginTop:i="0",marginRight:o="0",marginBottom:s="20px",marginLeft:c="0"}=e;return(0,D.jsxs)("div",{className:"switch-wrapper",style:{marginTop:i,marginRight:o,marginBottom:s,marginLeft:c},children:[(0,D.jsx)("span",{className:"switch-label",style:{color:n},children:t}),(0,D.jsxs)("label",{className:"switch",children:[(0,D.jsx)("input",{type:"checkbox",checked:a,onChange:e=>r(e.target.checked)}),(0,D.jsx)("span",{className:"slider round",style:{backgroundColor:a?l:"#ccc"}})]})]})},q={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},itemTitleStyle:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)",fontSize:"var(--font-size-small)",fontWeight:"500"},grid:"grid grid-cols-1 gap-6 !grid-cols-1",gridSingle:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"",sectionContent:"space-y-4",formSectionError:"border-destructive/50",emptyStateText:"text-center text-muted-foreground py-8",addItemForm:"rounded-lg p-6 border border-border/60 mt-4",itemDisplayLine:"flex flex-col",itemContent:"flex flex-col gap-1",itemActions:"flex gap-2",formActions:"flex justify-end gap-4 mt-6",errorText:"text-destructive text-sm mt-2"},B=e=>{let{formData:t,config:a,errors:i,isSubmitting:c,onArrayChange:d,onSaveAndContinue:u,onCancel:m,getNestedValue:p,onInputChange:f}=e;const{t:x,i18n:g}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),h=(0,O.n)(),v=(0,n.useCallback)(()=>{m&&m(),window.location.reload()},[m]),y=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.professionalBackground)||{}},[a]),b=(0,n.useMemo)(()=>(null===a||void 0===a?void 0:a.itemSchemas)||{},[a]),[j,w]=(0,n.useState)({});(0,n.useMemo)(()=>{const e={};Object.keys(y).forEach(t=>{e[t]={showForm:!1,editIndex:-1,itemData:{},itemErrors:{}}}),w(e)},[y]);const N=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=h[a];if(r&&r.length>0)return r;if("educationLevels"===e){const e=h.educationLevelOptions;if(e&&e.length>0)return e}const n=g.getResourceBundle(g.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return console.warn("No options found for key: ".concat(e," (mapped to: ").concat(t,")")),[]},[h,g]),T=(0,n.useCallback)((e,t)=>{w(a=>(0,r.A)((0,r.A)({},a),{},{[e]:(0,r.A)((0,r.A)({},a[e]),{},{itemErrors:t})}))},[]),A=(0,n.useCallback)(e=>{w(t=>(0,r.A)((0,r.A)({},t),{},{[e]:{showForm:!1,editIndex:-1,itemData:{},itemErrors:{}}}))},[]),S=(e,t,a)=>{w(r=>{const n=(0,o.cloneDeep)(r);return(0,o.set)(n[e].itemData,t,a),(0,o.set)(n[e].itemErrors,t,void 0),n})},I=e=>{var a;const r=j[e];if(!r)return;const{itemData:n,editIndex:l}=r,i=null===(a=y[e])||void 0===a?void 0:a.itemSchemaRef,s=b[i]||[],c="professionalDetails.".concat(e),u=p(t,c)||[],m=((e,t,a)=>{const r={};let n=!0;return t?(t.forEach(t=>{const{name:l,required:i,dependsOn:s,validationRules:c}=t;let d=i;if(s){const a=(0,o.get)(e,s);let r=!1;r=t.dependsOnValue?t.dependsOnValue.includes(a):!t.dependsOnValueExclude||!t.dependsOnValueExclude.includes(a),r||(d=!1)}if(d){const t=(0,o.get)(e,l);null!==t&&void 0!==t&&""!==t||(n=!1,(0,o.set)(r,l,a("validation.required")))}const u=(0,o.get)(e,l);if(u&&c&&(c.minLength&&String(u).length<c.minLength&&(n=!1,(0,o.set)(r,l,a("validation.minLength",{count:c.minLength}))),c.pattern))try{new RegExp(c.pattern).test(String(u))||(n=!1,(0,o.set)(r,l,a(c.patternErrorKey||"validation.invalidFormat")))}catch(m){console.error("Invalid regex pattern in config:",c.pattern,m)}}),{isValid:n,errors:r}):{isValid:!0,errors:{}}})(n,s,x);(e=>{let t,{sectionKey:a,itemData:r,editIndex:n,currentList:l,onArrayChange:i,resetFormStateCallback:o,validationResult:s,setLocalErrorsCallback:c}=e;if(c(s.errors),!s.isValid)return console.warn("Validation failed for ".concat(a," item:"),s.errors),!1;const d=Array.isArray(l)?l:[];t=n>-1?d.map((e,t)=>t===n?r:e):[...d,r],i(a,t),o()})({sectionKey:c,itemData:n,editIndex:l,currentList:u,onArrayChange:d,resetFormStateCallback:()=>A(e),validationResult:m,setLocalErrorsCallback:t=>T(e,t)})},E=(e,a)=>{const r="professionalDetails.".concat(e);(e=>{let{sectionKey:t,indexToDelete:a,currentList:r,onArrayChange:n}=e;n(t,(Array.isArray(r)?r:[]).filter((e,t)=>t!==a))})({sectionKey:r,indexToDelete:a,currentList:p(t,r)||[],onArrayChange:d})},P=e=>{switch(e){case"education":return(0,D.jsx)(s.D1A,{});case"workExperience":default:return(0,D.jsx)(s.qYx,{});case"qualifications":return(0,D.jsx)(s.TPq,{})}},L=e=>{const a=y[e];if(!a)return null;const l=a.itemSchemaRef,c=b[l]||[],d="professionalDetails.".concat(e),u=p(t,d)||[],m=p(i,d),f=j[e],g=x(a.labelKey,e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"));return(0,D.jsx)("div",{className:q.sectionCard,children:(0,D.jsxs)("div",{className:W()(q.sectionContent,{[q.formSectionError]:m&&!u.length}),children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,D.jsx)("div",{className:q.cardIconWrapper,children:P(e)}),(0,D.jsx)("h3",{className:q.cardTitleH3,style:q.cardTitleH3Style,children:g})]}),!(null!==f&&void 0!==f&&f.showForm)&&(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0,marginBottom:0},children:[u.length>0&&u.map((a,l)=>(0,D.jsxs)(n.Fragment,{children:[(0,D.jsxs)("div",{style:{padding:0,margin:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,D.jsxs)("div",{className:q.itemContent,children:[(0,D.jsx)("div",{className:"text-sm font-medium",style:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:(0,D.jsx)("strong",{children:a.title||a.degree||a.jobTitle||"Item"})}),(0,D.jsx)("div",{className:"text-xs",style:{color:"hsl(var(--muted-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:a.institution||a.employer})]}),(0,D.jsxs)("div",{className:q.itemActions,style:{display:"flex",gap:"0.75rem"},children:[(0,D.jsx)("button",{onClick:()=>((e,a)=>{const n="professionalDetails.".concat(e),l=p(t,n)||[];w(t=>(0,r.A)((0,r.A)({},t),{},{[e]:{showForm:!0,editIndex:a,itemData:(0,o.cloneDeep)(l[a]),itemErrors:{}}}))})(e,l),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:x("common.edit"),"aria-label":x("common.edit"),children:(0,D.jsx)(s.SG1,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>E(e,l),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors",title:x("common.delete"),"aria-label":x("common.delete"),children:(0,D.jsx)(s.IXo,{className:"w-4 h-4"})})]})]}),l<u.length-1&&(0,D.jsx)("div",{style:{height:"1px",backgroundColor:"hsl(var(--border) / 0.3)",margin:"0.5rem 0"}})]},"".concat(e,"-").concat(l))),0===u.length&&(0,D.jsx)("p",{className:q.emptyStateText,style:{textAlign:"center",color:"gray",padding:"2rem"},children:x("professionalBackground.no".concat(e.charAt(0).toUpperCase()+e.slice(1)),"No entries added yet.")}),m&&!u.length&&(0,D.jsx)("p",{className:q.errorText,children:m}),(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:0,padding:0},children:(0,D.jsx)("button",{onClick:()=>(e=>{w(t=>(0,r.A)((0,r.A)({},t),{},{[e]:{showForm:!0,editIndex:-1,itemData:{},itemErrors:{}}}))})(e),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:x("common.add"),"aria-label":x("common.add"),children:(0,D.jsx)(s.GGD,{className:"w-4 h-4"})})})]}),(null===f||void 0===f?void 0:f.showForm)&&(0,D.jsxs)("div",{className:q.addItemForm,children:[(0,D.jsxs)("h4",{style:{marginTop:0,marginBottom:"1.5rem",color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:[f.editIndex>-1?x("common.edit"):x("common.add")," ",g]}),(0,D.jsx)("div",{className:q.grid,children:c.map(t=>((e,t)=>{const{name:a,type:n,required:l,labelKey:i,optionsKey:s,dependsOn:c,dependsOnValue:d,dependsOnValueExclude:u,maxYear:m}=t,p=j[e];if(!p)return null;const{itemData:f,itemErrors:g}=p;if(c){const e=(0,o.get)(f,c);let t=!0;if(d?t=d.includes(e):u&&(t=!u.includes(e)),!t)return null}const h=(0,o.get)(f,a),v=(0,o.get)(g,a),y=x(i,a.charAt(0).toUpperCase()+a.slice(1).replace(/([A-Z])/g," $1"));let b=l;if(c&&b){const e=(0,o.get)(f,c);let t=!0;d?t=d.includes(e):u&&(t=!u.includes(e)),t||(b=!1)}const w={label:(0,D.jsxs)(D.Fragment,{children:[y," ",b&&(0,D.jsx)("span",{className:q.mandatoryMark,children:"*"})]}),error:v,required:b,wrapperClassName:q.fieldWrapper},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,D.jsx)("div",{className:W()(q.fieldWrapper,{[q.fullWidth]:t}),children:e},a)};switch(n){case"text":return C((0,D.jsx)(F.A,(0,r.A)((0,r.A)({},w),{},{value:h||"",onChange:t=>S(e,a,t.target.value)})));case"textarea":return C((0,D.jsx)(R.A,(0,r.A)((0,r.A)({},w),{},{value:h||"",onChange:t=>S(e,a,t.target.value)})),!0);case"date":const t=m?new Date(m,11,31).toISOString().split("T")[0]:void 0,n=h?"string"===typeof h?h:new Date(h).toISOString().split("T")[0]:"";return C((0,D.jsxs)("div",{children:[w.label&&(0,D.jsx)("label",{className:"boxed-date-label ".concat(w.error?"boxed-date-label--error":""),children:w.label}),(0,D.jsx)("input",{type:"date",value:n,onChange:t=>S(e,a,t.target.value||null),max:t,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(w.error?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:w.error?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:w.error?"var(--boxed-inputfield-error-color)":"inherit"}})]}));case"dropdown":const l=N(s);return C((0,D.jsx)(k.A,{label:w.label,options:l,value:h,onChange:t=>S(e,a,t),placeholder:x("common.selectPlaceholder","Select..."),required:w.required,error:w.error}));case"checkbox":return"currentlyStudying"===a||"current"===a?C((0,D.jsx)(M,{label:y,checked:!!h,onChange:t=>S(e,a,t),marginBottom:"0"}),!1):C((0,D.jsx)(U,{label:y,checked:!!h,onChange:t=>S(e,a,t.target.checked)}),!0);default:return null}})(e,t))}),(0,D.jsxs)("div",{className:q.formActions,style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},children:[(0,D.jsx)(C.A,{onClick:()=>(e=>{A(e)})(e),variant:"secondary",children:x("common.cancel")}),(0,D.jsx)(C.A,{onClick:()=>I(e),variant:"primary",children:f.editIndex>-1?x("common.update"):x("common.add")})]})]})]})},e)};return(0,D.jsxs)("div",{className:q.sectionContainer,children:[(0,D.jsxs)("div",{className:q.headerCard,children:[(0,D.jsx)("h2",{className:q.sectionTitle,style:q.sectionTitleStyle,children:x("professionalBackground.title")}),(0,D.jsxs)("div",{className:q.subtitleRow,children:[(0,D.jsx)("p",{className:q.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:x("professionalBackground.subtitle")}),(0,D.jsxs)("div",{className:q.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:q.mandatoryMark,children:"*"})," ",x("common.mandatoryFields")]})]})]}),(0,D.jsxs)("div",{className:q.sectionsWrapper,children:[(0,D.jsx)("div",{className:q.leftColumn,children:Object.keys(y).filter(e=>"education"===e||"qualifications"===e).map(e=>L(e))}),(0,D.jsx)("div",{className:q.rightColumn,children:Object.keys(y).filter(e=>"workExperience"===e).map(e=>L(e))})]}),(0,D.jsx)("div",{className:q.sectionCard,children:(0,D.jsxs)("div",{className:q.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:v,variant:"secondary",disabled:c,children:x("common.cancel")}),(0,D.jsx)(C.A,{onClick:u,variant:"confirmation",disabled:c,children:x(c?"common.saving":"common.saveAndContinue")})]})})]})};var z=a(3986);const V=["name","type","required","labelKey","optionsKey","dependsOn","dependsOnValue","dependsOnValueExclude","maxYear","placeholder"],K={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",hiringMandatoryMark:"text-orange-500",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",gridSingle:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},Y=e=>{let{formData:t,config:a,errors:i,isSubmitting:o,onInputChange:c,onSaveAndContinue:d,onCancel:u,getNestedValue:m}=e;const{t:p,i18n:f}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),[x,g]=(0,n.useState)(!1),h=(0,O.n)(),v=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.billingInformation)||[]},[a]),y=(0,n.useCallback)(()=>{u&&u(),window.location.reload()},[u]),b=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=h[a];if(r&&r.length>0)return r;if("educationLevels"===e){const e=h.educationLevelOptions;if(e&&e.length>0)return e}const n=f.getResourceBundle(f.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return[]},[h,f]),j=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const a=m(t,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(a):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(a)},[t,m]),w=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{name:n,type:l,required:o,labelKey:s,optionsKey:d,dependsOn:u,dependsOnValue:f,dependsOnValueExclude:x,maxYear:g,placeholder:h}=e,v=(0,z.A)(e,V);if(!j(e))return null;const y=m(t,n),w=m(i,n),N=p(s,n);let C=o;u&&C&&(j(e)||(C=!1));const T=e.requiredForHiring&&!C&&j(e),A=(0,D.jsxs)(D.Fragment,{children:[N," ",C&&(0,D.jsx)("span",{className:"boxed-inputfield-required",children:"*"})," ",T&&(0,D.jsx)("span",{className:K.hiringMandatoryMark,children:"*"})]}),S={label:A,error:w,required:C,wrapperClassName:K.fieldWrapper},I=e=>(0,D.jsx)("div",{className:W()(K.fieldWrapper,{[K.fullWidth]:!a&&"checkbox"===l&&"withholdingTaxSubject"!==n}),children:e},n);switch(l){case"date":const e=g?new Date(g,11,31).toISOString().split("T")[0]:new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0],t=y?"string"===typeof y?y:new Date(y).toISOString().split("T")[0]:"";return I((0,D.jsxs)("div",{children:[A&&(0,D.jsx)("label",{className:"boxed-date-label ".concat(w?"boxed-date-label--error":""),children:A}),(0,D.jsx)("input",{type:"date",value:t,onChange:e=>c(n,e.target.value||null),max:e,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(w?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:w?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:w?"var(--boxed-inputfield-error-color)":"inherit"}})]}));case"dropdown":const a=b(d);return a.length,I((0,D.jsx)(k.A,{label:S.label,options:a,value:y,onChange:e=>{console.log("SimpleDropdown onChange:",{name:n,newValue:e}),c(n,e)},placeholder:h||p("common.selectPlaceholder","Select..."),required:S.required,error:S.error},n));case"checkbox":return I((0,D.jsx)(M,{label:N,checked:!!y,onChange:e=>c(n,e),marginBottom:"payrollData.withholdingTaxInfo.isSubject"===n?"0":"20px"},n));default:return I((0,D.jsx)(F.A,(0,r.A)((0,r.A)({},S),{},{name:n,type:"number"===l?"number":"text",value:y||"",onChange:e=>c(n,e.target.value),min:"number"===l?v.min:void 0,max:"number"===l?v.max:void 0}),n))}},N=(0,n.useMemo)(()=>{const e={};if(v.forEach(t=>{const a=t.group||"general";e[a]||(e[a]=[]),e[a].push(t)}),e.payrollData){const t=e.payrollData,a=t.filter(e=>e.name&&e.name.includes("withholdingTaxInfo")),r=[],n=[];let l=!1;t.forEach(e=>{e.name&&e.name.includes("withholdingTaxInfo")||("payrollData.religion"===e.name?(l=!0,r.push(e)):l?n.push(e):r.push(e))}),e.payrollData=[...r,...a,...n]}return e},[v]),A=(0,n.useCallback)(()=>{try{v.filter(e=>e.requiredForHiring).filter(e=>j(e)).some(e=>{const a=m(t,e.name);return void 0===a||null===a||""===a})&&g(!0)}catch(e){}d()},[v,t,m,d,j]);return(0,D.jsxs)("div",{className:K.sectionContainer,children:[(0,D.jsxs)("div",{className:K.headerCard,children:[(0,D.jsx)("h2",{className:K.sectionTitle,style:K.sectionTitleStyle,children:p("billingInformation.title")}),(0,D.jsxs)("div",{className:K.subtitleRow,children:[(0,D.jsx)("p",{className:K.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:p("billingInformation.subtitle","Provide your employment and billing details.")}),(0,D.jsxs)("div",{className:K.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:K.hiringMandatoryMark,children:"*"})," ",p("billingInformation.hiringRequiredLegend")]})]})]}),(0,D.jsxs)("div",{className:K.sectionsWrapper,children:[(0,D.jsxs)("div",{className:K.leftColumn,children:[N.employmentEligibility&&(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.grid,children:[(0,D.jsxs)("div",{className:K.cardHeader,children:[(0,D.jsx)("div",{className:K.cardIconWrapper,children:(0,D.jsx)(s.qYx,{})}),(0,D.jsx)("div",{className:K.cardTitle,children:(0,D.jsx)("h3",{className:K.cardTitleH3,style:K.cardTitleH3Style,children:p("billingInformation.employmentEligibilityTitle")})})]}),N.employmentEligibility.map(w)]})}),N.banking&&(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.grid,children:[(0,D.jsxs)("div",{className:K.cardHeader,children:[(0,D.jsx)("div",{className:K.cardIconWrapper,children:(0,D.jsx)(s.lZI,{})}),(0,D.jsx)("div",{className:K.cardTitle,children:(0,D.jsx)("h3",{className:K.cardTitleH3,style:K.cardTitleH3Style,children:p("billingInformation.bankingInfo")})})]}),N.banking.map(w)]})}),N.residency&&(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.grid,children:[(0,D.jsxs)("div",{className:K.cardHeader,children:[(0,D.jsx)("div",{className:K.cardIconWrapper,children:(0,D.jsx)(s.qYx,{})}),(0,D.jsx)("div",{className:K.cardTitle,children:(0,D.jsx)("h3",{className:K.cardTitleH3,style:K.cardTitleH3Style,children:p("billingInformation.residencyPermitTitle")})})]}),N.residency.map(w)]})}),N.insurance&&(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.grid,children:[(0,D.jsxs)("div",{className:K.cardHeader,children:[(0,D.jsx)("div",{className:K.cardIconWrapper,children:(0,D.jsx)(s.pcC,{})}),(0,D.jsx)("div",{className:K.cardTitle,children:(0,D.jsx)("h3",{className:K.cardTitleH3,style:K.cardTitleH3Style,children:p("billingInformation.insurance")})})]}),N.insurance.map(w)]})}),N.billingAddress&&(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.grid,children:[(0,D.jsxs)("div",{className:K.cardHeader,children:[(0,D.jsx)("div",{className:K.cardIconWrapper,children:(0,D.jsx)(s.V5Y,{})}),(0,D.jsx)("div",{className:K.cardTitle,children:(0,D.jsx)("h3",{className:K.cardTitleH3,style:K.cardTitleH3Style,children:p("billingInformation.billingAddress")})})]}),N.billingAddress.find(e=>"sameAsResidential"===e.name)&&w(N.billingAddress.find(e=>"sameAsResidential"===e.name)),N.billingAddress.filter(e=>"sameAsResidential"!==e.name).map(w)]})})]}),(0,D.jsx)("div",{className:K.rightColumn,children:N.payrollData&&(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.gridSingle,children:[(0,D.jsxs)("div",{className:K.cardHeader,children:[(0,D.jsx)("div",{className:K.cardIconWrapper,children:(0,D.jsx)(s.z8N,{})}),(0,D.jsx)("div",{className:K.cardTitle,children:(0,D.jsx)("h3",{className:K.cardTitleH3,style:K.cardTitleH3Style,children:p("billingInformation.payrollDataTitle")})})]}),N.payrollData.map(e=>w(e,!0))]})})})]}),(0,D.jsx)("div",{className:K.sectionCard,children:(0,D.jsxs)("div",{className:K.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:y,variant:"secondary",disabled:o,children:p("common.cancel")}),(0,D.jsx)(C.A,{onClick:A,variant:"confirmation",disabled:o,children:p(o?"common.saving":"common.saveAndContinue")})]})}),(0,D.jsx)(T.A,{isOpen:x,onClose:()=>g(!1),title:p("billingInformation.hiringInfoTitle"),actions:(0,D.jsx)(C.A,{onClick:()=>g(!1),variant:"primary",children:"OK"}),children:(0,D.jsx)("p",{children:p("billingInformation.hiringInfoMessage")})})]})},G={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto",sectionContent:"space-y-4",errorText:"text-destructive text-sm mt-2",errorUpload:"border-destructive"},Z=e=>{let{formData:t,config:a,errors:i,isSubmitting:o,onInputChange:c,onArrayChange:d,onSaveAndContinue:u,onCancel:m,getNestedValue:p}=e;const{t:f}=(0,l.Bd)(["dashboardProfile","common","validation"]),{upload:x,uploadState:g}=(()=>{const[e,t]=(0,n.useState)({isLoading:!1,progress:0,error:null,type:null});return{upload:async(e,a,n)=>{t({isLoading:!0,progress:0,error:null,type:n});try{const l=await(0,E.QM)(e,a,e=>{t(t=>(0,r.A)((0,r.A)({},t),{},{progress:t.type===n?e:t.progress}))});return t({isLoading:!1,progress:0,error:null,type:null}),console.log("Upload complete for ".concat(n,": ").concat(l)),l}catch(l){throw console.error("Error uploading ".concat(n,":"),l),t({isLoading:!1,progress:0,error:l.message||"Upload failed",type:n}),l}},uploadState:e}})(),h="switzerland"===p(t,"identity.nationality"),v=(0,n.useMemo)(()=>{var e;return((null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.documentUploads)||[]).map(e=>"workPermit"===e.docType?h?(0,r.A)((0,r.A)({},e),{},{docType:"idCard",name:"workPermitUrl",labelKey:"documents.idCard",descriptionKey:"documents.idCardDescription",required:!0}):(0,r.A)((0,r.A)({},e),{},{labelKey:"documents.workPermit",descriptionKey:"documents.workPermitDescription"}):e)},[a,h]),y=(0,n.useCallback)(()=>{m&&m(),window.location.reload()},[m]),b=(0,n.useMemo)(()=>p(t,"professionalDetails.education")||[],[t,p]),j=(0,n.useMemo)(()=>p(t,"professionalDetails.workExperience")||[],[t,p]),w=(0,n.useCallback)(function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const o=e.split(".").pop(),s=(e.substring(0,e.lastIndexOf("."))||e).toLowerCase().replace(/[^a-z0-9]/g,"_"),c=Date.now();if("diploma"===a&&null!==r&&b[r]){const e=b[r],t=(e.degree||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),n=(e.institution||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_").concat(t,"_").concat(n,"_").concat(c,".").concat(o)}if("qualification"===a&&null!==n){const e=p(t,"professionalDetails.qualifications")||[];if(e[n]){const t=e[n],r=(t.title||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),l=(t.institution||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_").concat(r,"_").concat(l,"_").concat(c,".").concat(o)}}if("referenceLetter"===a&&"workExperience"===i&&null!==l&&j[l]){const e=j[l],t=(e.jobTitle||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),r=(e.employer||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_work_").concat(t,"_").concat(r,"_").concat(c,".").concat(o)}if("referenceLetter"===a&&"education"===i&&null!==r&&b[r]){const e=b[r],t=(e.degree||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),n=(e.institution||"").toLowerCase().replace(/[^a-z0-9]/g,"_");return"".concat(a,"_edu_").concat(t,"_").concat(n,"_").concat(c,".").concat(o)}return"".concat(a,"_").concat(s,"_").concat(c,".").concat(o)},[b,t,p,j]),N=(0,n.useCallback)(async function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!e||0===e.length)return;const i=e[0],{docType:o,name:s,isMultiple:u}=a;let m=null,f=null,g=null;"referenceLetter"===o&&l&&(l.startsWith("work_")?(f="workExperience",m=parseInt(l.split("_")[1])):l.startsWith("edu_")&&(f="education",g=parseInt(l.split("_")[1])));try{const e=p(t,"userId")||"unknown_user",a=w(i.name,o,r||g,n,m,f),l="documents/".concat(e,"/").concat(o,"/").concat(a),h=await x(i,l,o),v=(new Date).toISOString(),y={documentId:"doc_".concat(Date.now()),userId:e,type:o,category:o,fileName:a,originalFileName:i.name,storageUrl:h,fileSize:i.size,fileType:i.type||"application/octet-stream",uploadedAt:v,status:"pending_verification",educationIndex:"diploma"===o?null!==r?parseInt(r):null:"referenceLetter"===o&&"education"===f?g:null,qualificationIndex:"qualification"===o&&null!==n?parseInt(n):null,workExperienceIndex:"referenceLetter"===o&&"workExperience"===f?m:null,referenceType:"referenceLetter"===o?f:null};if(u){const e=p(t,"verification.verificationDocuments")||[];d("verification.verificationDocuments",[...e,y])}else{const e=(p(t,"verification.verificationDocuments")||[]).filter(e=>e.type!==o);d("verification.verificationDocuments",[...e,y]),c(s,h)}}catch(h){console.error("Error uploading ".concat(o,":"),h)}},[x,t,p,c,d,w]),T=(0,n.useCallback)((e,a)=>{const{name:r,isMultiple:n,docType:l}=e;if(n){const e=p(t,"verification.verificationDocuments")||[];let r;if("number"===typeof a){const t=e.filter(e=>e.type===l)[a];r=e.filter(e=>e!==t)}else r=e.filter(e=>e.storageUrl!==a);d("verification.verificationDocuments",r)}else{const e=(p(t,"verification.verificationDocuments")||[]).filter(e=>e.type!==l);d("verification.verificationDocuments",e),c(r,"")}},[p,t,c,d]),S=(0,n.useCallback)(e=>{const{isMultiple:a,docType:r}=e,n=(p(t,"verification.verificationDocuments")||[]).filter(e=>e.type===r);return a?n.map(e=>({url:e.storageUrl,doc:e})):n.length>0?[{url:n[0].storageUrl,doc:n[0]}]:[]},[t,p]),I=(0,n.useMemo)(()=>p(t,"professionalDetails.qualifications")||[],[t,p]),P=(0,n.useMemo)(()=>{const e=b.map((e,t)=>{const a=e.degree?f("dropdowns:educationLevels.".concat(e.degree),e.degree):"",r=e.institution||"",n=e.field||"",l="".concat(a).concat(r?", ".concat(r):"").concat(n?", ".concat(n):"");return{value:t.toString(),label:l||"Education ".concat(t+1)}});return e.push({value:"other",label:f("common.other","Other")}),e},[b,f]),O=(0,n.useMemo)(()=>{const e=I.map((e,t)=>{const a=e.title||"",r=e.institution||"",n=e.type?f("dropdowns:qualificationTypes.".concat(e.type),e.type):"",l="".concat(a).concat(r?", ".concat(r):"").concat(n?" (".concat(n,")"):"");return{value:t.toString(),label:l||"Qualification ".concat(t+1)}});return e.push({value:"other",label:f("common.other","Other")}),e},[I,f]),F=(0,n.useMemo)(()=>{const e=[];return j.length>0&&j.forEach((t,a)=>{const r=t.jobTitle||"",n=t.employer||"",l=t.location||"",i="".concat(r).concat(n?", ".concat(n):"").concat(l?", ".concat(l):"");e.push({value:"work_".concat(a),label:"[".concat(f("documents.workExperience","Work Experience"),"] ").concat(i||"Work ".concat(a+1))})}),b.length>0&&b.forEach((t,a)=>{const r=t.degree?f("dropdowns:educationLevels.".concat(t.degree),t.degree):"",n=t.institution||"",l=t.field||"",i="".concat(r).concat(n?", ".concat(n):"").concat(l?", ".concat(l):"");e.push({value:"edu_".concat(a),label:"[".concat(f("documents.education","Education"),"] ").concat(i||"Education ".concat(a+1))})}),e.push({value:"other",label:f("common.other","Other")}),e},[j,b,f]),R=e=>{let{fieldConfig:t}=e;const{docType:a,name:r,required:l,isMultiple:o,labelKey:c,accept:d}=t,u=S(t),m=p(i,r),x=f(c,a),h=g.isLoading&&g.type===a,v=(0,n.useRef)(null),y=(0,n.useMemo)(()=>{if("diploma"===a&&u.length>0&&!o){var e;const t=null===(e=u[0])||void 0===e?void 0:e.doc;if(null!==(null===t||void 0===t?void 0:t.educationIndex)&&void 0!==(null===t||void 0===t?void 0:t.educationIndex))return t.educationIndex.toString()}return null},[u,a,o]),w=(0,n.useMemo)(()=>{if("qualification"===a&&u.length>0&&!o){var e;const t=null===(e=u[0])||void 0===e?void 0:e.doc;if(null!==(null===t||void 0===t?void 0:t.qualificationIndex)&&void 0!==(null===t||void 0===t?void 0:t.qualificationIndex))return t.qualificationIndex.toString()}return null},[u,a,o]),C=(0,n.useMemo)(()=>{if("referenceLetter"===a&&u.length>0&&!o){var e;const t=null===(e=u[0])||void 0===e?void 0:e.doc;if("workExperience"===(null===t||void 0===t?void 0:t.referenceType)&&null!==(null===t||void 0===t?void 0:t.workExperienceIndex)&&void 0!==(null===t||void 0===t?void 0:t.workExperienceIndex))return"work_".concat(t.workExperienceIndex);if("education"===(null===t||void 0===t?void 0:t.referenceType)&&null!==(null===t||void 0===t?void 0:t.educationIndex)&&void 0!==(null===t||void 0===t?void 0:t.educationIndex))return"edu_".concat(t.educationIndex)}return null},[u,a,o]),[E,R]=(0,n.useState)(y),[L,H]=(0,n.useState)(w),[_,W]=(0,n.useState)(C),U="diploma"===a&&b.length>0,M="qualification"===a&&I.length>0,q="referenceLetter"===a&&F.length>0,B=o?f("documents.add".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Add ".concat(a)):u.length>0?f("documents.replace".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Replace ".concat(a)):f("documents.upload".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Upload ".concat(a)),z=(e,r,n)=>{const l=e.url||e,i=e.doc||null,c=(null===i||void 0===i?void 0:i.originalFileName)||(e=>{if(!e)return"";try{const t=new URL(e).pathname.split("/");return decodeURIComponent(t[t.length-1])}catch(t){const a=e.split("/");return a[a.length-1]}})(l);let d=c;if(null!==(null===i||void 0===i?void 0:i.educationIndex)&&void 0!==(null===i||void 0===i?void 0:i.educationIndex)&&b[i.educationIndex]){const e=b[i.educationIndex],t=e.degree?f("dropdowns:educationLevels.".concat(e.degree),e.degree):"",a=e.institution||"",r=e.field||"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?", ".concat(r):"")}else if(null!==(null===i||void 0===i?void 0:i.qualificationIndex)&&void 0!==(null===i||void 0===i?void 0:i.qualificationIndex)&&I[i.qualificationIndex]){const e=I[i.qualificationIndex],t=e.title||"",a=e.institution||"",r=e.type?f("dropdowns:qualificationTypes.".concat(e.type),e.type):"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?" (".concat(r,")"):"")}else if("workExperience"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.workExperienceIndex)&&void 0!==(null===i||void 0===i?void 0:i.workExperienceIndex)&&j[i.workExperienceIndex]){const e=j[i.workExperienceIndex],t=e.jobTitle||"",a=e.employer||"",r=e.location||"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?", ".concat(r):"")}else if("education"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.educationIndex)&&void 0!==(null===i||void 0===i?void 0:i.educationIndex)&&b[i.educationIndex]){const e=b[i.educationIndex],t=e.degree?f("dropdowns:educationLevels.".concat(e.degree),e.degree):"",a=e.institution||"",r=e.field||"";d="".concat(t).concat(a?", ".concat(a):"").concat(r?", ".concat(r):"")}const u="string"===typeof l?l:(null===l||void 0===l?void 0:l.url)||l;return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:0,margin:0},children:[(0,D.jsx)("div",{style:{width:"32px",height:"32px",color:"hsl(var(--foreground))",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"0.75rem"},children:(0,D.jsx)(s.jH2,{})}),(0,D.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,D.jsx)("p",{style:{margin:0,fontWeight:500,fontSize:"var(--font-size-small)",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:c,children:d}),(0,D.jsxs)("p",{style:{margin:0,fontSize:"0.75rem",color:"hsl(var(--muted-foreground))",display:"flex",alignItems:"center",gap:"4px"},children:[(0,D.jsx)(s.A3x,{size:12})," ",f("common.uploaded")]})]}),(0,D.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,D.jsx)("button",{onClick:()=>{var e;if("diploma"===a)R((null===i||void 0===i||null===(e=i.educationIndex)||void 0===e?void 0:e.toString())||null);else if("qualification"===a){var t;H((null===i||void 0===i||null===(t=i.qualificationIndex)||void 0===t?void 0:t.toString())||null)}else"referenceLetter"===a&&("workExperience"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.workExperienceIndex)&&void 0!==(null===i||void 0===i?void 0:i.workExperienceIndex)?W("work_".concat(i.workExperienceIndex)):"education"===(null===i||void 0===i?void 0:i.referenceType)&&null!==(null===i||void 0===i?void 0:i.educationIndex)&&void 0!==(null===i||void 0===i?void 0:i.educationIndex)&&W("edu_".concat(i.educationIndex)));v.current&&v.current.click()},className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:f("documents.replace"),"aria-label":f("documents.replace"),children:(0,D.jsx)(s.SG1,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>{T(t,o?r:u)},className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors",title:f("documents.remove"),"aria-label":f("documents.remove"),children:(0,D.jsx)(s.IXo,{className:"w-4 h-4"})})]})]},u||r)};return(0,D.jsx)("div",{className:G.sectionCard,children:(0,D.jsxs)("div",{className:G.sectionContent,children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,D.jsx)("div",{className:G.cardIconWrapper,children:(0,D.jsx)(s.YoE,{})}),(0,D.jsxs)("h3",{className:G.cardTitleH3,style:G.cardTitleH3Style,children:[x," ",l&&(0,D.jsx)("span",{className:G.mandatoryMark,children:"*"})]})]}),(0,D.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:0,paddingBottom:o||1!==u.length?void 0:0},children:o?u.map((e,t)=>{const a=e.url||e;return(0,D.jsxs)(n.Fragment,{children:[z(e,t,u.length),t<u.length-1&&(0,D.jsx)("div",{style:{height:"1px",backgroundColor:"hsl(var(--border) / 0.3)",margin:"0.5rem 0"}})]},a||t)}):u.length>0?z(u[0],0):null}),(0,D.jsxs)("div",{style:{marginTop:0===u.length?0:o||1!==u.length?"1.5rem":0},children:[U&&(o||0===u.length)&&(0,D.jsx)("div",{style:{marginBottom:"1rem"},children:(0,D.jsx)(k.A,{label:"",options:P,value:E,onChange:e=>R(e),placeholder:f("documents.selectEducationPlaceholder","Select education entry..."),required:!0})}),M&&(o||0===u.length)&&(0,D.jsx)("div",{style:{marginBottom:"1rem"},children:(0,D.jsx)(k.A,{label:"",options:O,value:L,onChange:e=>H(e),placeholder:f("documents.selectQualificationPlaceholder","Select qualification..."),required:!0})}),q&&(o||0===u.length)&&(0,D.jsx)("div",{style:{marginBottom:"1rem"},children:(0,D.jsx)(k.A,{label:"",options:F,value:_,onChange:e=>W(e),placeholder:f("documents.selectReferencePlaceholder","Select work experience or education..."),required:!0})}),o||0===u.length?(0,D.jsx)(A.A,{ref:v,onChange:e=>{if(U&&(null===E||""===E))return;if(M&&(null===L||""===L))return;if(q&&(null===_||""===_))return;N(e,t,U&&null!==E&&"other"!==E?E:null,M&&null!==L&&"other"!==L?L:null,q&&null!==_&&"other"!==_?_:null),U&&R(null),M&&H(null),q&&W(null)},isLoading:h,progress:h?g.progress:0,accept:d||".pdf,.jpg,.png,.doc,.docx",label:B,documentName:x.toLowerCase(),className:m&&0===u.length?G.errorUpload:"",disabled:U&&(null===E||""===E)||M&&(null===L||""===L)||q&&(null===_||""===_)}):(0,D.jsxs)(D.Fragment,{children:[U&&(0,D.jsx)("div",{style:{marginBottom:"1rem"},children:(0,D.jsx)(k.A,{label:"",options:P,value:E,onChange:e=>R(e),placeholder:f("documents.selectEducationPlaceholder","Select education entry..."),required:!0})}),M&&(0,D.jsx)("div",{style:{marginBottom:"1rem"},children:(0,D.jsx)(k.A,{label:"",options:O,value:L,onChange:e=>H(e),placeholder:f("documents.selectQualificationPlaceholder","Select qualification..."),required:!0})}),q&&(0,D.jsx)("div",{style:{marginBottom:"1rem"},children:(0,D.jsx)(k.A,{label:"",options:F,value:_,onChange:e=>W(e),placeholder:f("documents.selectReferencePlaceholder","Select work experience or education..."),required:!0})}),(0,D.jsx)("input",{ref:v,type:"file",accept:d||".pdf,.jpg,.png,.doc,.docx",onChange:e=>{if(e.target.files&&e.target.files[0]){if(U&&(null===E||""===E))return void(e.target.value="");if(M&&(null===L||""===L))return void(e.target.value="");if(q&&(null===_||""===_))return void(e.target.value="");const a=U&&null!==E&&"other"!==E?E:null,r=M&&null!==L&&"other"!==L?L:null,n=q&&null!==_&&"other"!==_?_:null;N([e.target.files[0]],t,a,r,n),U&&R(null),M&&H(null),q&&W(null),e.target.value=""}},style:{display:"none"}})]})]}),m&&0===u.length&&(0,D.jsx)("p",{className:G.errorText,style:{marginTop:"0.5rem"},children:m}),g.type===a&&g.error&&(0,D.jsx)("p",{className:G.errorText,style:{marginTop:"0.5rem"},children:g.error})]})})};return(0,D.jsxs)("div",{className:G.sectionContainer,children:[(0,D.jsxs)("div",{className:G.headerCard,children:[(0,D.jsx)("h2",{className:G.sectionTitle,style:G.sectionTitleStyle,children:f("documents.title")}),(0,D.jsxs)("div",{className:G.subtitleRow,children:[(0,D.jsx)("p",{className:G.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:f("documents.subtitle")}),(0,D.jsxs)("div",{className:G.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:G.mandatoryMark,children:"*"})," ",f("common.mandatoryFields")]})]})]}),(0,D.jsxs)("div",{className:G.sectionsWrapper,children:[(0,D.jsx)("div",{className:G.leftColumn,children:v.filter((e,t)=>t%2===0).map(e=>(0,D.jsx)(R,{fieldConfig:e},e.docType))}),(0,D.jsx)("div",{className:G.rightColumn,children:v.filter((e,t)=>t%2===1).map(e=>(0,D.jsx)(R,{fieldConfig:e},e.docType))})]}),(0,D.jsx)("div",{className:G.sectionCard,children:(0,D.jsxs)("div",{className:G.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:y,variant:"secondary",disabled:o||g.isLoading,children:f("common.cancel")}),(0,D.jsx)(C.A,{onClick:u,variant:"confirmation",disabled:o||g.isLoading,children:f(o?"common.saving":"common.saveAndContinue")})]})})]})};var Q=a(9043);const X={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:4000",REACT_APP_FIREBASE_API_KEY:"AIzaSyBKMnh477m8ZDmk7WhQZKPzb3VDe3PktDs",REACT_APP_FIREBASE_AUTH_DOMAIN:"interimed-620fd.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"interimed-620fd",REACT_APP_FIREBASE_STORAGE_BUCKET:"interimed-620fd.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"436488373074",REACT_APP_FIREBASE_APP_ID:"1:436488373074:web:60c3a26935b6238d9a308b",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-66V8BS82V0",REACT_APP_USE_FIREBASE_EMULATORS:"false"}.REACT_APP_API_BASE_URL||"https://europe-west6-medishift-fd594.cloudfunctions.net",J=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=await(async()=>{const e=p.auth.currentUser;if(!e)throw new Error("User not authenticated");return await e.getIdToken()})(),n=await fetch("".concat(X,"/").concat(e),(0,r.A)((0,r.A)({},t),{},{headers:(0,r.A)({"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},t.headers)})),l=await n.json();if(!n.ok)throw new Error(l.message||"API error: ".concat(n.status));return l},$=async()=>{try{return(await J("accountDeletionPreview",{method:"GET"})).data}catch(e){throw console.error("[AccountManagement] Error getting deletion preview:",e),e}},ee=async function(){let{reason:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return await J("accountDelete",{method:"POST",body:JSON.stringify({confirmPhrase:"DELETE MY ACCOUNT",reason:e||"User requested account deletion"})})}catch(t){throw console.error("[AccountManagement] Error deleting account:",t),t}};var te=a(3637);const ae=()=>{var e,t;const{t:a}=(0,l.Bd)(["dashboardProfile","common"]),{currentUser:r,logout:i}=(0,c.A)(),{showNotification:o}=(0,d.h)(),[u,m]=(0,n.useState)(null),[f,x]=(0,n.useState)(!0),[g,h]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),[b,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(""),[A,k]=(0,n.useState)(""),[S,I]=(0,n.useState)(""),[E,P]=(0,n.useState)(""),[O,R]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(r){var e;const t=null===(e=r.providerData)||void 0===e?void 0:e.some(e=>"google.com"===e.providerId);R(t?"google.com":"password")}},[r]),(0,n.useEffect)(()=>{(async()=>{try{const e=await $();m(e)}catch(e){console.error("Error loading deletion preview:",e),m(null)}finally{x(!1)}})()},[]);const L=(0,n.useCallback)(()=>{N(""),k(""),h(!0)},[]),H=(0,n.useCallback)(()=>{"DELETE MY ACCOUNT"===w?(h(!1),I(""),P(""),y(!0)):k(a("settings.accountDeletion.confirmMismatch"))},[w,a]),_=(0,n.useCallback)(async()=>{j(!0);try{const e=await ee({reason:"User requested account deletion from profile settings"});if(!e.success)throw new Error(e.message||"Deletion failed");o(a("settings.accountDeletion.success"),"success"),await i(),window.location.href="/"}catch(e){console.error("Error deleting account:",e),o(a("settings.accountDeletion.error")+": "+e.message,"error")}finally{j(!1),y(!1)}},[o,i,a]),W=(0,n.useCallback)(async()=>{if(p.auth.currentUser){j(!0),P("");try{if("google.com"===O){const e=new te.HF;await(0,te.df)(p.auth,e)}else{if(!S)return P(a("validation.required")),void j(!1);const e=te.IX.credential(p.auth.currentUser.email,S);await(0,te.kZ)(p.auth.currentUser,e)}await _()}catch(e){console.error("Error during reauthentication:",e),"auth/wrong-password"===e.code?P(a("accountBasics.errors.wrongPassword")):"auth/too-many-requests"===e.code?o(a("errors.tooManyRequests"),"error"):"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code?o(a("errors.popupClosed"),"info"):P(a("accountBasics.errors.deleteFailed")),j(!1)}}else o(a("errors.notLoggedIn"),"error")},[O,S,_,o,a]);return(0,D.jsxs)("div",{className:"space-y-6",children:[f?(0,D.jsx)("div",{className:"bg-card rounded-xl border border-border/60 p-6 shadow-sm",children:(0,D.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground",children:[(0,D.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent"}),(0,D.jsx)("span",{className:"text-sm",children:a("settings.accountDeletion.loadingPreview")})]})}):u&&(0,D.jsxs)("div",{className:"bg-card rounded-xl border border-border/60 p-6 shadow-sm",children:[(0,D.jsx)("h3",{className:"text-sm font-medium m-0 mb-4",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:a("settings.accountDeletion.previewTitle")}),(0,D.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,D.jsxs)("div",{className:"space-y-3",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 text-destructive font-medium text-sm",children:[(0,D.jsx)(s.yGN,{className:"w-4 h-4"}),a("settings.accountDeletion.immediatelyDeleted")]}),(0,D.jsx)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-6",children:null===(e=u.whatWillBeDeleted)||void 0===e?void 0:e.map((e,t)=>(0,D.jsx)("li",{className:"list-disc",children:e},t))})]}),u.hasLegalRecords&&(0,D.jsxs)("div",{className:"space-y-3",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 font-medium text-sm",children:[(0,D.jsx)(s.OZ2,{className:"w-4 h-4"}),a("settings.accountDeletion.retainedForLegalReasons")]}),(0,D.jsx)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-6",children:null===(t=u.whatWillBeRetained)||void 0===t?void 0:t.map((e,t)=>(0,D.jsx)("li",{className:"list-disc",children:e},t))}),u.retentionPeriod&&(0,D.jsxs)("p",{className:"text-xs text-muted-foreground italic mt-2 pl-6",children:[a("settings.accountDeletion.retentionPeriod"),": ",u.retentionPeriod]})]})]}),u.hasLegalRecords?(0,D.jsx)("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-800",children:(0,D.jsxs)("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[(0,D.jsx)(s.F5$,{className:"inline w-3 h-3 mr-1"}),a("settings.accountDeletion.swissLawNotice")]})}):(0,D.jsx)("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:(0,D.jsxs)("p",{className:"text-xs text-green-800 dark:text-green-200",children:[(0,D.jsx)(s.YrT,{className:"inline w-3 h-3 mr-1"}),a("settings.accountDeletion.noLegalRecords")]})})]}),(0,D.jsx)("div",{className:"bg-red-50/50 dark:bg-red-950/10 rounded-xl border border-red-100 dark:border-red-900/30 p-6 shadow-sm",children:(0,D.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,D.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,D.jsx)("div",{className:"p-2 rounded-lg bg-white text-red-600 dark:text-red-400 shrink-0",children:(0,D.jsx)(s.eHT,{className:"w-5 h-5"})}),(0,D.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,D.jsx)("h3",{className:"text-sm font-medium m-0 text-red-600 dark:text-red-400",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:a("settings.dangerZone")}),(0,D.jsx)("h4",{className:"font-medium text-foreground mt-2 mb-1",children:a("settings.accountDeletion.title")}),(0,D.jsx)("p",{className:"text-sm text-muted-foreground",children:a("settings.accountDeletion.description")})]})]}),(0,D.jsx)("div",{className:"shrink-0 md:ml-4",children:(0,D.jsx)(C.A,{onClick:L,disabled:b,variant:"danger",size:"sm",icon:(0,D.jsx)(s.IXo,{}),children:a("settings.accountDeletion.deleteButton")})})]})}),(0,D.jsx)(T.A,{isOpen:g,onClose:()=>h(!1),title:a("settings.accountDeletion.confirmTitle"),size:"small",messageType:"warning",actions:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.A,{onClick:()=>h(!1),variant:"secondary",disabled:b,children:a("common.cancel")}),(0,D.jsx)(C.A,{onClick:H,variant:"danger",disabled:b||"DELETE MY ACCOUNT"!==w,children:a("accountBasics.confirmDelete")})]}),children:(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("p",{className:"font-bold text-red-600",children:a("accountBasics.deleteWarningPermanent")}),(0,D.jsx)("p",{children:a("settings.accountDeletion.confirmMessage")}),(0,D.jsx)(F.A,{name:"confirmPhrase",value:w,onChange:e=>{N(e.target.value),A&&k("")},placeholder:a("settings.accountDeletion.confirmPlaceholder"),error:A})]})}),(0,D.jsx)(T.A,{isOpen:v,onClose:()=>{y(!1),I(""),P("")},title:a("settings.accountDeletion.reauthTitle"),size:"small",messageType:"warning",actions:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.A,{onClick:()=>{y(!1),I(""),P("")},variant:"secondary",disabled:b,children:a("common.cancel")}),(0,D.jsx)(C.A,{onClick:W,variant:"danger",disabled:b||"google.com"!==O&&!S,children:a(b?"settings.accountDeletion.processing":"accountBasics.confirmDeleteAccount")})]}),children:(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("p",{children:a("google.com"===O?"settings.accountDeletion.reauthMessageGoogle":"settings.accountDeletion.reauthMessage")}),"google.com"!==O&&(0,D.jsx)(Q.A,{label:a("accountBasics.password"),name:"reauthPassword",value:S,onChange:e=>{I(e.target.value),E&&P("")},error:E,type:"password",showErrors:!0})]})})]})},re=["name","type","required","labelKey","optionsKey","dependsOn","dependsOnValue","dependsOnValueExclude","maxYear","placeholder"],ne={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},le=e=>{let{formData:t,config:a,errors:i,isSubmitting:o,onInputChange:c,onSaveAndContinue:d,onCancel:u,getNestedValue:m}=e;const{t:p,i18n:f}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),x=(0,O.n)(),g=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.settings)||[]},[a]),h=(0,n.useCallback)(()=>{u&&u(),window.location.reload()},[u]),v=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=x[a];if(r&&r.length>0)return r;const n=f.getResourceBundle(f.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return[]},[x,f]),y=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const a=m(t,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(a):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(a)},[t,m]),b=e=>{const{name:a,type:n,required:l,labelKey:o,optionsKey:s,dependsOn:d,dependsOnValue:u,dependsOnValueExclude:f,maxYear:x,placeholder:g}=e,h=(0,z.A)(e,re);if(!y(e))return null;const b=m(t,a),j=m(i,a),w=p(o,a);let N=l;d&&N&&(y(e)||(N=!1));const C=(0,D.jsxs)(D.Fragment,{children:[w," ",N&&(0,D.jsx)("span",{className:"boxed-inputfield-required",children:"*"})]}),T={label:C,error:j,required:N,wrapperClassName:ne.fieldWrapper},A=e=>(0,D.jsx)("div",{className:W()(ne.fieldWrapper,{[ne.fullWidth]:"textarea"===n}),children:e},a);switch(n){case"date":const t=x?new Date(x,11,31).toISOString().split("T")[0]:void 0,l=b?"string"===typeof b?b:new Date(b).toISOString().split("T")[0]:"";return A((0,D.jsxs)("div",{children:[C&&(0,D.jsx)("label",{className:"boxed-date-label ".concat(j?"boxed-date-label--error":""),children:C}),(0,D.jsx)("input",{type:"date",value:l,onChange:e=>c(a,e.target.value||null),max:t,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(j?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:j?"var(--red-3)":"hsl(var(--border) / 0.6)",color:j?"var(--red-3)":"inherit"}})]}));case"dropdown":const i=v(s);return i.length,A((0,D.jsx)(k.A,{label:T.label,options:i,value:b,onChange:e=>{console.log("SimpleDropdown onChange:",{name:a,newValue:e}),c(a,e)},placeholder:g||p("common.selectPlaceholder","Select..."),required:T.required,error:T.error},a));case"checkbox":return"notifications"===e.group||"marketplace"===e.group?A((0,D.jsx)(M,{label:w,checked:!!b,onChange:e=>c(a,e),marginBottom:"0"},a)):A((0,D.jsx)(U,(0,r.A)((0,r.A)({},T),{},{label:w,checked:!!b,onChange:e=>c(a,e.target.checked)}),a));case"textarea":return A((0,D.jsx)(R.A,(0,r.A)((0,r.A)({},T),{},{value:b||"",onChange:e=>c(a,e.target.value),placeholder:g,maxLength:h.maxLength}),a));default:return A((0,D.jsx)(F.A,(0,r.A)((0,r.A)({},T),{},{name:a,type:"number"===n?"number":"text",value:b||"",onChange:e=>c(a,e.target.value),min:"number"===n?h.min:void 0,max:"number"===n?h.max:void 0,placeholder:g}),a))}},j=(0,n.useMemo)(()=>{const e={};return g.forEach(t=>{const a=t.group||"general";e[a]||(e[a]=[]),e[a].push(t)}),e},[g]),w=(0,n.useMemo)(()=>{var e;return(null===(e=j.platformSettings)||void 0===e?void 0:e.filter(e=>"platformSettings.detailedAvailability.notes"!==e.name))||[]},[j.platformSettings]),N=(0,n.useMemo)(()=>{var e;return null===(e=j.platformSettings)||void 0===e?void 0:e.find(e=>"platformSettings.detailedAvailability.notes"===e.name)},[j.platformSettings]);return(0,D.jsxs)("div",{className:ne.sectionContainer,children:[(0,D.jsxs)("div",{className:ne.headerCard,children:[(0,D.jsx)("h2",{className:ne.sectionTitle,style:ne.sectionTitleStyle,children:p("settings.title")}),(0,D.jsxs)("div",{className:ne.subtitleRow,children:[(0,D.jsx)("p",{className:ne.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:p("settings.subtitle")}),(0,D.jsxs)("div",{className:ne.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:ne.mandatoryMark,children:"*"})," ",p("common.mandatoryFields")]})]})]}),(0,D.jsxs)("div",{className:ne.sectionsWrapper,children:[(0,D.jsxs)("div",{className:ne.leftColumn,children:[w.length>0&&(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.grid,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.VSk,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.platformSettingsTitle")})})]}),w.map(b)]})}),j.privacy&&(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.grid,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.pcC,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.privacySettingsTitle")})})]}),j.privacy.map(b)]})}),j.marketplace&&(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.grid,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.VeH,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.marketplaceSettingsTitle")})})]}),j.marketplace.map(b)]})})]}),(0,D.jsxs)("div",{className:ne.rightColumn,children:[j.availability&&(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.grid,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.Ohp,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.availabilitySettingsTitle")})})]}),j.availability.map(b)]})}),j.notifications&&(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.grid,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.zd,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.notificationPreferencesTitle")})})]}),j.notifications.map(b)]})}),N&&(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.grid,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.Ohp,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.availabilityNotes")})})]}),b(N)]})})]})]}),(0,D.jsx)("div",{className:"w-full max-w-[1000px] mx-auto",children:(0,D.jsxs)("div",{className:ne.sectionCard,children:[(0,D.jsxs)("div",{className:ne.cardHeader,children:[(0,D.jsx)("div",{className:ne.cardIconWrapper,children:(0,D.jsx)(s.JOY,{})}),(0,D.jsx)("div",{className:ne.cardTitle,children:(0,D.jsx)("h3",{className:ne.cardTitleH3,style:ne.cardTitleH3Style,children:p("settings.accountDeletion.title","Account Management")})})]}),(0,D.jsx)("div",{className:"mt-4",children:(0,D.jsx)(ae,{})})]})}),(0,D.jsx)("div",{className:ne.sectionCard,children:(0,D.jsxs)("div",{className:ne.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:h,variant:"secondary",disabled:o,children:p("common.cancel")}),(0,D.jsx)(C.A,{onClick:d,variant:"confirmation",disabled:o,children:p(o?"common.saving":"common.saveAndContinue")})]})})]})},ie={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-0",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"facility-details-sections-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},oe=e=>{var t;let{activeTab:a,formData:i,config:o,errors:c,isSubmitting:d,onInputChange:u,onSaveAndContinue:m,onCancel:p,getNestedValue:f}=e;const{t:x,i18n:g}=(0,l.Bd)(["dashboardProfile","dropdowns","validation","common"]),h=(0,O.n)(),v=(0,n.useMemo)(()=>o&&a&&o.fields&&o.fields[a]?o.fields[a]:[],[o,a]),y=(0,n.useCallback)(e=>{const t=h["".concat(e,"Options")];if(t&&t.length>0)return t;const a="".concat(e.replace(/s$/,""),"Options"),r=h[a];if(r&&r.length>0)return r;const n=g.getResourceBundle(g.language,"dropdowns");if(n&&n[e]){const t=Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t.length>0)return t}return f(null===o||void 0===o?void 0:o.dropdownOptionsResolved,e)||[]},[o,f,h,g]),b=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const t=f(i,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(t):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(t)},[i,f]),j=e=>{const{name:t,type:a,required:n,labelKey:l,optionsKey:o,placeholderKey:s,infoKey:d,dependsOn:m}=e;if(!b(e))return null;const p=f(i,t),g=f(c,t),h=x(l,t),v=s?x(s):x("common.selectPlaceholder","Select..."),j=t;let w=n;m&&w&&!b(e)&&(w=!1);const N={label:h,error:g,required:w,wrapperClassName:ie.fieldWrapper};if("date"===a){const e=t.includes("dateOfBirth")?new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0]:void 0,a=p?"string"===typeof p?p:new Date(p).toISOString().split("T")[0]:"";return(0,D.jsxs)("div",{className:ie.fieldWrapper,children:[N.label&&(0,D.jsx)("label",{className:"boxed-date-label ".concat(g?"boxed-date-label--error":""),children:N.label}),(0,D.jsx)("input",{type:"date",value:a,onChange:e=>u(t,e.target.value||null),max:e,className:"w-full h-9 px-3 rounded-lg border bg-background text-xs text-left focus:outline-none focus:ring-2 focus:ring-ring transition-all ".concat(g?"date-input-error":""),style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)",borderColor:g?"var(--boxed-inputfield-error-color)":"hsl(var(--border) / 0.6)",color:g?"var(--boxed-inputfield-error-color)":"inherit"}})]},j)}if("dropdown"===a){const e=y(o);e.length,0;let a=null;return null!==p&&void 0!==p&&""!==p&&(a=e.find(e=>e.value===p),a||(a=e.find(e=>String(e.value)===String(p)))),(0,D.jsx)("div",{className:ie.fieldWrapper,children:(0,D.jsx)(k.A,{label:N.label,options:e,value:p,onChange:e=>{u(t,e)},placeholder:v||x("common.selectPlaceholder","Select..."),required:N.required,error:N.error})},j)}return(0,D.jsx)("div",{className:ie.fieldWrapper,children:(0,D.jsx)(F.A,(0,r.A)((0,r.A)({},N),{},{name:t,type:"url"===a?"url":"email"===a?"email":"tel"===a?"tel":"text",value:p||"",onChange:e=>u(t,e.target.value),infoText:d?x(d):void 0,placeholder:v}),t)},j)},w=(0,n.useMemo)(()=>{const e={},t=["general","address","legal","legalRep","billing","bankingFacility"];v.forEach(t=>{let a=t.group;a||(a=t.name.startsWith("address")?"address":t.name.startsWith("legalRepresentative")?"legalRep":t.name.startsWith("billingContact")?"billing":t.name.startsWith("facilityIBAN")||t.name.startsWith("facilityBank")?"bankingFacility":"general"),e[a]||(e[a]=[]),e[a].push(t)});return Object.keys(e).sort((e,a)=>{const r=t.indexOf(e),n=t.indexOf(a);return-1!==r&&-1!==n?r-n:-1!==r?-1:-1!==n?1:e.localeCompare(a)}).map(t=>({key:t,fields:e[t]}))},[v]),N=null===o||void 0===o||null===(t=o.tabs)||void 0===t?void 0:t.find(e=>e.id===a),T=e=>{switch(e){case"general":return(0,D.jsx)(s.V5Y,{});case"address":return(0,D.jsx)(s.HzC,{});case"legal":return(0,D.jsx)(s.qYx,{});case"legalRep":return(0,D.jsx)(s.JXP,{});case"billing":return(0,D.jsx)(s.jH2,{});case"bankingFacility":return(0,D.jsx)(s.lZI,{});default:return(0,D.jsx)(s.S8s,{})}},A=e=>{if("legalRep"===e)return x("facilityDetails.groupTitle_legalRep","Responsible Person");const t="facilityDetails.groupTitle_".concat(e),a=e.replace(/([A-Z])/g," $1").trim().replace(/^\w/,e=>e.toUpperCase());return x(t,a)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("style",{children:"\n        .facility-details-container {\n          container-type: inline-size;\n        }\n        @container (min-width: 700px) {\n          .facility-details-sections-wrapper {\n            flex-direction: row;\n          }\n        }\n      "}),(0,D.jsxs)("div",{className:"".concat(ie.sectionContainer," facility-details-container"),children:[(0,D.jsx)("div",{className:ie.headerCard,children:(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsx)("h2",{className:ie.sectionTitle,style:ie.sectionTitleStyle,children:N?x(N.labelKey):a}),(0,D.jsxs)("div",{className:ie.subtitleRow,children:[(0,D.jsx)("p",{className:ie.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:x("facilityDetails.subtitle","Please ensure facility details are accurate and up to date.")}),(0,D.jsxs)("div",{className:ie.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:ie.mandatoryMark,children:"*"})," ",x("common.mandatoryFields")]})]})]})}),(0,D.jsxs)("div",{className:ie.sectionsWrapper,children:[(0,D.jsx)("div",{className:ie.leftColumn,children:w.filter((e,t)=>t%2===0).map(e=>(0,D.jsx)("div",{className:ie.sectionCard,children:(0,D.jsxs)("div",{className:ie.grid,children:[(0,D.jsxs)("div",{className:ie.cardHeader,children:[(0,D.jsx)("div",{className:ie.cardIconWrapper,children:T(e.key)}),(0,D.jsx)("div",{className:ie.cardTitle,children:(0,D.jsx)("h3",{className:ie.cardTitleH3,style:ie.cardTitleH3Style,children:A(e.key)})})]}),e.fields.map(e=>j(e))]})},e.key))}),(0,D.jsx)("div",{className:ie.rightColumn,children:w.filter((e,t)=>t%2!==0).map(e=>(0,D.jsx)("div",{className:ie.sectionCard,children:(0,D.jsxs)("div",{className:ie.grid,children:[(0,D.jsxs)("div",{className:ie.cardHeader,children:[(0,D.jsx)("div",{className:ie.cardIconWrapper,children:T(e.key)}),(0,D.jsx)("div",{className:ie.cardTitle,children:(0,D.jsx)("h3",{className:ie.cardTitleH3,style:ie.cardTitleH3Style,children:A(e.key)})})]}),e.fields.map(e=>j(e))]})},e.key))})]}),(0,D.jsxs)("div",{className:ie.formActions,children:[(0,D.jsx)(C.A,{onClick:p,variant:"secondary",disabled:d,children:x("common.cancel")}),(0,D.jsx)(C.A,{onClick:m,variant:"confirmation",disabled:d,children:x(d?"common.saving":"common.saveAndContinue")})]})]})]})},se={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"facility-uploads-wrapper flex flex-col gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto",sectionContent:"space-y-4",errorText:"text-destructive text-sm mt-2",errorUpload:"border-destructive"},ce=e=>{let{formData:t,config:a,errors:i,isSubmitting:o,onInputChange:c,onArrayChange:d,onSaveAndContinue:u,onCancel:m,getNestedValue:p}=e;const{t:f}=(0,l.Bd)(["dashboardProfile","common","validation"]),{upload:x,uploadState:g}=(()=>{const[e,t]=(0,n.useState)({isLoading:!1,progress:0,error:null,type:null});return{upload:async(e,a,n)=>{t({isLoading:!0,progress:0,error:null,type:n});try{const l=await(0,E.QM)(e,a,e=>{t(t=>(0,r.A)((0,r.A)({},t),{},{progress:t.type===n?e:t.progress}))});return t({isLoading:!1,progress:0,error:null,type:null}),console.log("Upload complete for ".concat(n,": ").concat(l)),l}catch(l){throw console.error("Error uploading ".concat(n,":"),l),t({isLoading:!1,progress:0,error:l.message||"Upload failed",type:n}),l}},uploadState:e}})(),h=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.documentUploads)||[]},[a]),v=(0,n.useCallback)(()=>{m&&m()},[m]),y=(0,n.useCallback)(async(e,a)=>{if(!e||0===e.length)return;const r=e[0],{docType:n,name:l,isMultiple:i}=a;try{const e=p(t,"userId")||"unknown_user",a=p(t,"facilityId")||e,o=Date.now(),s=r.name.split(".").pop(),u=r.name.substring(0,r.name.lastIndexOf("."))||r.name,m="".concat(u.toLowerCase().replace(/[^a-z0-9]/g,"_"),"_").concat(o,".").concat(s),f="documents/facilities/".concat(a,"/").concat(n,"/").concat(m),g=await x(r,f,n),h=(new Date).toISOString(),v={documentId:"facility_doc_".concat(Date.now()),userId:e,facilityId:a,type:n,category:n,fileName:m,originalFileName:r.name,storageUrl:g,fileSize:r.size,fileType:r.type||"application/octet-stream",uploadedAt:h,status:"pending_verification"},y=p(t,"verification.verificationDocumentsProvided")||[];if(i){d("verification.verificationDocumentsProvided",[...y,v]);const e=p(t,l)||[];d(l,[...e,g])}else{const e=y.filter(e=>e.type!==n);d("verification.verificationDocumentsProvided",[...e,v]),c(l,g)}}catch(o){console.error("Error uploading ".concat(n,":"),o)}},[x,t,p,c,d]),b=(0,n.useCallback)((e,a)=>{const{name:r,isMultiple:n,docType:l}=e,i=p(t,"verification.verificationDocumentsProvided")||[];if(n){const e=p(t,r)||[];let n,o;if("number"===typeof a){const t=i.filter(e=>e.type===l)[a];o=i.filter(e=>e!==t),n=e.filter((e,t)=>t!==a)}else o=i.filter(e=>e.storageUrl!==a),n=e.filter(e=>e!==a);d("verification.verificationDocumentsProvided",o),d(r,n)}else{const e=i.filter(e=>e.type!==l);d("verification.verificationDocumentsProvided",e),c(r,"")}},[p,t,c,d]),j=(0,n.useCallback)(e=>{const{isMultiple:a,docType:r,name:n}=e,l=(p(t,"verification.verificationDocumentsProvided")||[]).filter(e=>e.type===r);return a?l.map(e=>({url:e.storageUrl,doc:e})):l.length>0?[{url:l[0].storageUrl,doc:l[0]}]:[]},[t,p]),w=e=>{let{fieldConfig:t}=e;const{docType:a,name:r,required:l,isMultiple:o,labelKey:c,accept:d}=t,u=j(t),m=p(i,r),x=f(c,a),h=g.isLoading&&g.type===a,v=(0,n.useRef)(null),w=o?f("documents.add".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Add ".concat(a)):u.length>0?f("documents.replace".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Replace ".concat(a)):f("documents.upload".concat(a.charAt(0).toUpperCase()+a.slice(1),"Button"),"Upload ".concat(a)),N=(e,a)=>{const r=e.url||e,n=e.doc||null,l=(null===n||void 0===n?void 0:n.originalFileName)||(e=>{if(!e)return"";try{const t=new URL(e).pathname.split("/");return decodeURIComponent(t[t.length-1])}catch(t){const a=e.split("/");return a[a.length-1]}})(r);return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:0,margin:0},children:[(0,D.jsx)("div",{style:{width:"32px",height:"32px",color:"hsl(var(--foreground))",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"0.75rem"},children:(0,D.jsx)(s.jH2,{})}),(0,D.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,D.jsx)("p",{style:{margin:0,fontWeight:500,fontSize:"var(--font-size-small)",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:l,children:l}),(0,D.jsxs)("p",{style:{margin:0,fontSize:"0.75rem",color:"hsl(var(--muted-foreground))",display:"flex",alignItems:"center",gap:"4px"},children:[(0,D.jsx)(s.A3x,{size:12})," ",f("common.uploaded")]})]}),(0,D.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,D.jsx)("button",{onClick:()=>v.current&&v.current.click(),className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-primary transition-colors",title:f("documents.replace"),"aria-label":f("documents.replace"),children:(0,D.jsx)(s.SG1,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>{b(t,o?a:r)},className:"flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-destructive transition-colors",title:f("documents.remove"),"aria-label":f("documents.remove"),children:(0,D.jsx)(s.IXo,{className:"w-4 h-4"})})]})]},r||a)};return(0,D.jsx)("div",{className:se.sectionCard,children:(0,D.jsxs)("div",{className:se.sectionContent,children:[(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,D.jsx)("div",{className:se.cardIconWrapper,children:(0,D.jsx)(s.YoE,{})}),(0,D.jsxs)("h3",{className:se.cardTitleH3,style:se.cardTitleH3Style,children:[x," ",l&&(0,D.jsx)("span",{className:se.mandatoryMark,children:"*"})]})]}),(0,D.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:0,paddingBottom:o||1!==u.length?void 0:0},children:o?u.map((e,t)=>{const a=e.url||e;return(0,D.jsxs)(n.Fragment,{children:[N(e,t),t<u.length-1&&(0,D.jsx)("div",{style:{height:"1px",backgroundColor:"hsl(var(--border) / 0.3)",margin:"0.5rem 0"}})]},a||t)}):u.length>0?N(u[0],0):null}),(0,D.jsx)("div",{style:{marginTop:0===u.length?0:o||1!==u.length?"1.5rem":0},children:o||0===u.length?(0,D.jsx)(A.A,{ref:v,onChange:e=>y(e,t),isLoading:h,progress:h?g.progress:0,accept:d||".pdf,.jpg,.png,.doc,.docx",label:w,documentName:x.toLowerCase(),className:m&&0===u.length?se.errorUpload:""}):(0,D.jsx)("input",{ref:v,type:"file",accept:d||".pdf,.jpg,.png,.doc,.docx",onChange:e=>{e.target.files&&e.target.files[0]&&(y([e.target.files[0]],t),e.target.value="")},style:{display:"none"}})}),m&&0===u.length&&(0,D.jsx)("p",{className:se.errorText,style:{marginTop:"0.5rem"},children:m}),g.type===a&&g.error&&(0,D.jsx)("p",{className:se.errorText,style:{marginTop:"0.5rem"},children:g.error})]})})};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("style",{children:"\n            .facility-uploads-wrapper {\n                 container-type: inline-size;\n            }\n             @container (min-width: 700px) {\n              .facility-uploads-wrapper {\n                flex-direction: row;\n              }\n            }\n            /* Fallback for browsers not supporting container queries or just media query */\n            @media (min-width: 1024px) {\n                 .facility-uploads-wrapper {\n                    flex-direction: row;\n                 }\n            }\n        "}),(0,D.jsxs)("div",{className:se.sectionContainer,children:[(0,D.jsxs)("div",{className:se.headerCard,children:[(0,D.jsx)("h2",{className:se.sectionTitle,style:se.sectionTitleStyle,children:f("documents.title")}),(0,D.jsxs)("div",{className:se.subtitleRow,children:[(0,D.jsx)("p",{className:se.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:f("documents.subtitle")}),(0,D.jsxs)("div",{className:se.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:se.mandatoryMark,children:"*"})," ",f("common.mandatoryFields")]})]})]}),(0,D.jsxs)("div",{className:se.sectionsWrapper,children:[(0,D.jsx)("div",{className:se.leftColumn,children:h.filter((e,t)=>t%2===0).map(e=>(0,D.jsx)(w,{fieldConfig:e},e.docType))}),(0,D.jsx)("div",{className:se.rightColumn,children:h.filter((e,t)=>t%2===1).map(e=>(0,D.jsx)(w,{fieldConfig:e},e.docType))})]}),(0,D.jsx)("div",{className:se.sectionCard,children:(0,D.jsxs)("div",{className:se.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:v,variant:"secondary",disabled:o||g.isLoading,children:f("common.cancel")}),(0,D.jsx)(C.A,{onClick:u,variant:"confirmation",disabled:o||g.isLoading,children:f(o?"common.saving":"common.saveAndContinue")})]})})]})]})},de=["name","type","required","labelKey","optionsKey","dependsOn","placeholder"],ue={sectionContainer:"flex flex-col gap-6 p-1 w-full max-w-[1000px] mx-auto",headerCard:"bg-card rounded-xl border border-border/60 p-6 pb-4 shadow-sm w-full max-w-[1000px] mx-auto",sectionTitle:"text-2xl font-semibold mb-2",sectionTitleStyle:{fontSize:"18px",color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},sectionSubtitle:"text-sm font-medium text-muted-foreground",subtitleRow:"flex items-end justify-between gap-4",mandatoryFieldLegend:"text-xs text-muted-foreground",mandatoryMark:"text-destructive",sectionsWrapper:"flex flex-col lg:flex-row gap-6 w-full max-w-[1000px] mx-auto",leftColumn:"flex flex-col gap-6 flex-1",rightColumn:"flex flex-col gap-6 flex-1",sectionCard:"bg-card rounded-xl border border-border/60 p-6 shadow-sm w-full",cardHeader:"flex items-center gap-4 mb-0",cardIconWrapper:"p-2 rounded-lg bg-primary/10 text-primary",cardTitle:"flex-1",cardTitleH3:"m-0",cardTitleH3Style:{color:"hsl(var(--card-foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},grid:"grid grid-cols-1 gap-6",fieldWrapper:"space-y-2",fullWidth:"md:col-span-2",formActions:"flex justify-end gap-4 w-full max-w-[1000px] mx-auto"},me=e=>{let{formData:t,config:a,errors:i,isSubmitting:o,onInputChange:c,onSaveAndContinue:d,onCancel:u,getNestedValue:m}=e;const{t:p,i18n:f}=(0,l.Bd)(["dashboardProfile","dropdowns","common","validation"]),x=(0,O.n)(),g=(0,n.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.fields)||void 0===e?void 0:e.settings)||[]},[a]),h=(0,n.useCallback)(()=>{u&&u(),window.location.reload()},[u]),v=(0,n.useCallback)(e=>{const t="educationLevels"===e?"education":e,a="".concat(t,"Options"),r=x[a];if(r&&r.length>0)return r;const n=f.getResourceBundle(f.language,"dropdowns");if(n){if(n[e])return Object.entries(n[e]).map(e=>{let[t,a]=e;return{value:t,label:a}});if(t!==e&&n[t])return Object.entries(n[t]).map(e=>{let[t,a]=e;return{value:t,label:a}})}return[]},[x,f]),y=(0,n.useCallback)(e=>{if(!e.dependsOn)return!0;const a=m(t,e.dependsOn);return e.dependsOnValue?e.dependsOnValue.includes(a):!e.dependsOnValueExclude||!e.dependsOnValueExclude.includes(a)},[t,m]),b=e=>{const{name:a,type:n,required:l,labelKey:o,optionsKey:s,dependsOn:d,placeholder:u}=e,f=(0,z.A)(e,de);if(!y(e))return null;const x=m(t,a),g=m(i,a),h=p(o,a);let b=l;d&&b&&(y(e)||(b=!1));const j={label:(0,D.jsxs)(D.Fragment,{children:[h," ",b&&(0,D.jsx)("span",{className:"boxed-inputfield-required",children:"*"})]}),error:g,required:b,wrapperClassName:ue.fieldWrapper},w=e=>(0,D.jsx)("div",{className:W()(ue.fieldWrapper,{[ue.fullWidth]:"textarea"===n}),children:e},a);switch(n){case"dropdown":const t=v(s);return w((0,D.jsx)(k.A,{label:j.label,options:t,value:x,onChange:e=>{c(a,e)},placeholder:u||p("common.selectPlaceholder","Select..."),required:j.required,error:j.error},a));case"checkbox":return"contractSettings"===e.group?w((0,D.jsx)(M,{label:h,checked:!!x,onChange:e=>c(a,e),marginBottom:"0"},a)):w((0,D.jsx)(U,(0,r.A)((0,r.A)({},j),{},{label:h,checked:!!x,onChange:e=>c(a,e.target.checked)}),a));case"textarea":return w((0,D.jsx)(R.A,(0,r.A)((0,r.A)({},j),{},{value:x||"",onChange:e=>c(a,e.target.value),placeholder:u,maxLength:f.maxLength}),a));default:return w((0,D.jsx)(F.A,(0,r.A)((0,r.A)({},j),{},{name:a,type:"number"===n?"number":"text",value:x||"",onChange:e=>c(a,e.target.value),min:"number"===n?f.min:void 0,max:"number"===n?f.max:void 0,placeholder:u}),a))}},j=(0,n.useMemo)(()=>{const e={};return g.forEach(t=>{const a=t.group||"general";e[a]||(e[a]=[]),e[a].push(t)}),e},[g]);return(0,D.jsxs)("div",{className:ue.sectionContainer,children:[(0,D.jsxs)("div",{className:ue.headerCard,children:[(0,D.jsx)("h2",{className:ue.sectionTitle,style:ue.sectionTitleStyle,children:p("settings.title")}),(0,D.jsxs)("div",{className:ue.subtitleRow,children:[(0,D.jsx)("p",{className:ue.sectionSubtitle,style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:p("settings.subtitle")}),(0,D.jsxs)("div",{className:ue.mandatoryFieldLegend,children:[(0,D.jsx)("span",{className:ue.mandatoryMark,children:"*"})," ",p("common.mandatoryFields")]})]})]}),(0,D.jsx)("div",{className:ue.sectionsWrapper,children:(0,D.jsxs)("div",{className:ue.leftColumn,children:[j.operationalSettings&&(0,D.jsx)("div",{className:ue.sectionCard,children:(0,D.jsxs)("div",{className:ue.grid,children:[(0,D.jsxs)("div",{className:ue.cardHeader,children:[(0,D.jsx)("div",{className:ue.cardIconWrapper,children:(0,D.jsx)(s.Ohp,{})}),(0,D.jsx)("div",{className:ue.cardTitle,children:(0,D.jsx)("h3",{className:ue.cardTitleH3,style:ue.cardTitleH3Style,children:p("settings.operationalSettingsTitle")})})]}),j.operationalSettings.map(b)]})}),j.contractSettings&&(0,D.jsx)("div",{className:ue.sectionCard,children:(0,D.jsxs)("div",{className:ue.grid,children:[(0,D.jsxs)("div",{className:ue.cardHeader,children:[(0,D.jsx)("div",{className:ue.cardIconWrapper,children:(0,D.jsx)(s.jH2,{})}),(0,D.jsx)("div",{className:ue.cardTitle,children:(0,D.jsx)("h3",{className:ue.cardTitleH3,style:ue.cardTitleH3Style,children:p("settings.contractSettingsTitle")})})]}),j.contractSettings.map(b)]})})]})}),(0,D.jsx)("div",{className:"w-full max-w-[1000px] mx-auto",children:(0,D.jsxs)("div",{className:ue.sectionCard,children:[(0,D.jsxs)("div",{className:ue.cardHeader,children:[(0,D.jsx)("div",{className:ue.cardIconWrapper,children:(0,D.jsx)(s.JOY,{})}),(0,D.jsx)("div",{className:ue.cardTitle,children:(0,D.jsx)("h3",{className:ue.cardTitleH3,style:ue.cardTitleH3Style,children:p("settings.accountDeletion.title","Account Management")})})]}),(0,D.jsx)("div",{className:"mt-4",children:(0,D.jsx)(ae,{})})]})}),(0,D.jsx)("div",{className:ue.sectionCard,children:(0,D.jsxs)("div",{className:ue.formActions,style:{marginTop:0},children:[(0,D.jsx)(C.A,{onClick:h,variant:"secondary",disabled:o,children:p("common.cancel")}),(0,D.jsx)(C.A,{onClick:d,variant:"confirmation",disabled:o,children:p(o?"common.saving":"common.saveAndContinue")})]})})]})},pe=(e,t)=>{if(!e||null===t||void 0===t||!t.tabs)return 0;const a=t.tabs.map(e=>e.id),r=a.filter(a=>fe(e,a,t));return a.length>0?Math.round(r.length/a.length*100):0},fe=(e,t,a)=>{if(!e||null===a||void 0===a||!a.fields||!a.fields[t])return!1;const r=a.fields[t];if(Array.isArray(r))return r.every(t=>{if(!t.required)return!0;if(t.dependsOn){const a=(0,o.get)(e,t.dependsOn);if(t.dependsOnValue&&!t.dependsOnValue.includes(a))return!0;if(t.dependsOnValueExclude&&t.dependsOnValueExclude.includes(a))return!0}const a=(0,o.get)(e,t.name);return null!==a&&void 0!==a&&""!==String(a).trim()});if("object"===typeof r){let t=!0;return Object.entries(r).forEach(a=>{let[r,n]=a;if(n.required&&n.minItems>0){const a=(0,o.get)(e,r);(!Array.isArray(a)||a.length<n.minItems)&&(t=!1)}}),t}return!0},xe=(e,t,a)=>{var r,n;if(null===a||void 0===a||!a.tabs)return t===(null===a||void 0===a||null===(r=a.tabs)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id);const l=a.tabs.findIndex(e=>e.id===t);if(l<=0)return!0;for(let i=0;i<l;i++)if(!fe(e,a.tabs[i].id,a))return!1;return!0},ge=()=>{var e,t,m,f,x,g,h,O,F;const{t:R}=(0,l.Bd)(["dashboardProfile","common","validation"]),{currentUser:L}=(0,c.A)(),{showNotification:_}=(0,d.h)(),W=(0,i.Zp)(),U=(0,i.zy)(),{setProfileCompletionStatus:M}=(0,y.M)(),q=(0,j.n)(),z=(0,w.K)(),{profileData:V,isLoading:K,error:G,updateProfileData:Q,initializeProfileDocument:X,refreshProfileData:J}=v(),[$,ee]=(0,n.useState)(""),[te,ae]=(0,n.useState)(null),[re,ne]=(0,n.useState)(null),[ie,se]=(0,n.useState)(!1),de=(0,n.useRef)(null),[ue,ge]=(0,n.useState)(!1),[he,ve]=(0,n.useState)({}),[ye,be]=(0,n.useState)("free"),[je,we]=(0,n.useState)(!1),[Ne,Ce]=(0,n.useState)(!0),[Te,Ae]=(0,n.useState)(!1),[ke,Se]=(0,n.useState)(""),[De,Ie]=(0,n.useState)(!1),[Ee,Pe]=(0,n.useState)(!1),[Oe,Fe]=(0,n.useState)(!1),[Re,Le]=(0,n.useState)(null),[He,_e]=(0,n.useState)(!1),[We,Ue]=(0,n.useState)(null),[Me,qe]=(0,n.useState)(!1),[Be,ze]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{if(null!==L&&void 0!==L&&L.uid){const e=await(0,P.FD)(L.uid);e&&ze(e)}})()},[L]);const Ve=(0,n.useRef)(null),Ke=(0,n.useMemo)(()=>!(!de.current||!te)&&!(0,o.isEqual)(de.current,te),[te]);(0,n.useEffect)(()=>{!L||V||K||G||X().then(e=>{e&&J()})},[L,V,K,G,X,J]);const{tutorialPassed:Ye,startTutorial:Ge,activeTutorial:Ze,completedTutorials:Qe,isTutorialActive:Xe,stepData:Je,currentStep:$e,isWaitingForSave:et,onTabCompleted:tt}=(0,b.s8)(),at=(0,n.useRef)(!1),[rt,nt]=(0,n.useState)(!1),[lt,it]=(0,n.useState)(0),ot=(0,n.useRef)(null),st="professional"===(null===te||void 0===te?void 0:te.role);(0,n.useEffect)(()=>{if(L&&te&&!Ye&&!(null!==Qe&&void 0!==Qe&&Qe.profileTabs)&&"profileTabs"!==Ze&&!at.current&&("dashboard"===Ze||U.pathname.includes("/profile"))){const e=setTimeout(()=>{at.current=!0,Ge("profileTabs")},500);return()=>clearTimeout(e)}},[Ye,Ze,Ge,L,te,Qe,Xe,U.pathname]),(0,n.useEffect)(()=>{if(null!==V&&void 0!==V&&V.profileType&&null!==V&&void 0!==V&&V.role){const e=V.role,t=V.profileType;(async()=>{se(!0),ne(null);try{var r,n,l,i,s,c,d;let u;if("professional"===e)u=await a(6456)("./professionals-".concat(t,".json"));else{if("facility"!==e&&"company"!==e)throw new Error("Unknown role: ".concat(e));u=await a.e(274).then(a.t.bind(a,4274,19))}ne(u.default||u);const m=(0,o.cloneDeep)(V);ae(m),de.current=m,ee((null===(r=u)||void 0===r||null===(n=r.default)||void 0===n||null===(l=n.tabs)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.id)||(null===(s=u)||void 0===s||null===(c=s.tabs)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.id)||"")}catch(u){console.error("[Profile] Error loading config:",u),_(R("errors.loadingConfig"),"error"),ve({_config:R("errors.loadingConfig")})}finally{se(!1)}})()}},[V,R,_]),(0,n.useEffect)(()=>{(()=>{if(te){var e;const t=te.platformSubscriptionPlan||te.subscriptionTier||(null===(e=te.subscription)||void 0===e?void 0:e.tier)||"free",a=t&&"free"!==t&&"starter"!==t&&"free"!==t.toLowerCase();be(a?"premium":"free")}else if(V){var t;const e=V.platformSubscriptionPlan||V.subscriptionTier||(null===(t=V.subscription)||void 0===t?void 0:t.tier)||"free",a=e&&"free"!==e&&"starter"!==e&&"free"!==e.toLowerCase();be(a?"premium":"free")}})()},[te,V]),(0,n.useEffect)(()=>{te&&L&&!te._onboardingDocumentsMerged&&(async(e,t,a)=>{if(!e||!a)return console.log("[mergeOnboardingDocuments] Missing formData or currentUser"),0;if(e._onboardingDocumentsMerged)return console.log("[mergeOnboardingDocuments] Already merged"),0;try{var n;const l=(0,u.doc)(p.db,"users",a.uid),i=await(0,u.getDoc)(l);if(!i.exists())return console.warn("[mergeOnboardingDocuments] User document does not exist"),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0;const o=i.data(),s=(null===o||void 0===o?void 0:o.onboardingDocuments)||[];if(0===s.length)return console.log("[mergeOnboardingDocuments] No onboarding documents found"),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0;console.log("[mergeOnboardingDocuments] Found ".concat(s.length," onboarding documents"));const c=(null===(n=e.verification)||void 0===n?void 0:n.verificationDocuments)||[],d=new Set(c.map(e=>e.storagePath||e.storageUrl)),m=s.filter(e=>!d.has(e.storagePath)&&!d.has(e.downloadURL));if(0===m.length)return console.log("[mergeOnboardingDocuments] All onboarding documents already exist in profile"),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0;console.log("[mergeOnboardingDocuments] Merging ".concat(m.length," new documents"));const f=m.map(e=>({documentId:e.uid||"onboarding_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:e.id_type||e.subfolder||"identity",category:e.id_type||e.subfolder||"identity",fileName:e.fileName,originalFileName:e.originalFileName||e.fileName,storageUrl:e.downloadURL,storagePath:e.storagePath,fileSize:e.fileSize,fileType:e.fileType,mimeType:e.fileType,uploadedAt:e.uploadedAt,status:e.verified?"verified":"pending_verification",verificationStatus:e.verified?"verified":"pending",source:"onboarding"}));return t(e=>(0,r.A)((0,r.A)({},e),{},{verification:(0,r.A)((0,r.A)({},e.verification),{},{verificationDocuments:[...c,...f]}),_onboardingDocumentsMerged:!0})),console.log("[mergeOnboardingDocuments] Successfully merged ".concat(f.length," onboarding documents")),f.length}catch(l){return console.error("[mergeOnboardingDocuments] Error:",l),t(e=>(0,r.A)((0,r.A)({},e),{},{_onboardingDocumentsMerged:!0})),0}})(te,ae,L)},[null===te||void 0===te?void 0:te.userId,null===te||void 0===te?void 0:te._onboardingDocumentsMerged,L]),(0,n.useEffect)(()=>{if(!re||!te||ie||K)return;const e=U.pathname.split("/"),t=e[e.length-1],a=re.tabs.map(e=>e.id);let r=$||a[0];t&&a.includes(t)?r=xe(te,t,re)?t:a.find(e=>xe(te,e,re))||a[0]:(U.pathname.endsWith("/profile")||U.pathname.endsWith("/profile/"))&&(r=a.find(e=>xe(te,e,re))||a[0]),r!==$&&ee(r);const n=U.pathname.substring(U.pathname.lastIndexOf("/")+1);r&&r!==n&&W("/dashboard/profile/".concat(r),{replace:!0})},[U.pathname,re,te,ie,K,$,W]);const ct=(0,n.useCallback)((e,t)=>{ae(a=>{const r=(0,o.cloneDeep)(a);return(0,o.set)(r,e,t),r}),ve(t=>{const a=(0,o.cloneDeep)(t);return(0,o.set)(a,e,void 0),a})},[]),dt=(0,n.useCallback)((e,t)=>{ae(a=>(0,r.A)((0,r.A)({},a),{},{[e]:t})),ve(t=>{const a=(0,r.A)({},t);return delete a[e],a})},[]),ut=(0,n.useCallback)((e,t)=>(0,o.get)(e,t),[]),mt=(0,n.useCallback)(async e=>{if(e&&e.storageUrl)try{_e(!0),_(R("dashboardProfile:documents.analyzing","Analyzing document..."),"info");const t=e.type||(st?"cv":"businessDocument"),a=e.mimeType||e.fileType||"application/pdf",r=await(0,P.tK)(e.storageUrl,t,e.storagePath,a);if(!r.success||!r.data)throw new Error("Analysis failed or returned no data");Ue(r.data),ze(r.data),qe(!0)}catch(t){console.error("[Profile] Error analyzing document:",t),_(R("dashboardProfile:documents.analysisError","Failed to analyze document"),"error")}finally{_e(!1)}},[st,_,R]),pt=(0,n.useCallback)(()=>{Pe(!1),Le(null)},[]),ft=(0,n.useCallback)(async e=>{if(!e||0===e.length||!L)return;if(!Re)return void _(R("dashboardProfile:documents.selectDocumentTypeFirst","Please select a document type first"),"warning");const t=e[0];nt(!0),it(0);try{var a,r;const e=L.uid,l=Re,i=Date.now(),s=t.name.split(".").pop(),c=t.name.substring(0,t.name.lastIndexOf("."))||t.name,d="".concat(c.toLowerCase().replace(/[^a-z0-9]/g,"_"),"_").concat(i,".").concat(s),u=st?"documents/".concat(e,"/").concat(l,"/").concat(d):"documents/facilities/".concat(e,"/").concat(l,"/").concat(d),m=await(0,E.QM)(t,u,e=>{it(e)}),p={documentId:"".concat(l,"_").concat(Date.now()),userId:e,type:l,category:l,fileName:d,originalFileName:t.name,storageUrl:m,storagePath:u,fileSize:t.size,fileType:t.type||"application/octet-stream",mimeType:t.type||"application/octet-stream",uploadedAt:(new Date).toISOString(),status:"pending_verification"};if(!te)return;const f=(0,o.cloneDeep)(te),x=null===re||void 0===re||null===(a=re.fields)||void 0===a||null===(r=a.documentUploads)||void 0===r?void 0:r.find(e=>e.docType===l),g=(null===x||void 0===x?void 0:x.name)||("cv"===l?"cvUrl":"verificationDocumentsProvided");if("cv"===l||"cvUrl"===g)f.documents||(f.documents={}),f.documents.cv||(f.documents.cv=[]),f.documents.cv.push(p);else if(st){const e=g.includes(".")?g:"documents.".concat(g),t=ut(f,e)||[];(0,o.set)(f,e,[...t,p])}else f.verification||(f.verification={}),f.verification.verificationDocumentsProvided||(f.verification.verificationDocumentsProvided=[]),f.verification.verificationDocumentsProvided.push(p);ae(f);try{await Q(f),console.log("[Profile] Document metadata saved to database"),_(R("dashboardProfile:documents.uploadSuccess","Document uploaded successfully"),"success"),setTimeout(()=>{pt(),mt(p)},500)}catch(n){console.error("[Profile] Error saving document metadata to database:",n),_(R("dashboardProfile:documents.uploadSuccessButSaveError","Document uploaded but failed to save metadata. Please try again."),"warning")}nt(!1),it(0)}catch(l){console.error("[Profile] Error uploading file:",l),nt(!1),it(0),_(R("dashboardProfile:documents.uploadError","Error uploading document"),"error")}},[L,st,te,re,Re,_,R,Q,mt,pt,ut]),xt=(0,n.useCallback)(()=>{ot.current&&ot.current.click()},[]),gt=Xe&&"profileTabs"===Ze&&0===$e&&!et,ht=(0,n.useCallback)(()=>{gt||(Le(null),Pe(!0))},[gt]),vt=(0,n.useCallback)(()=>{Fe(!1)},[]),yt=(0,n.useCallback)(e=>{console.log("Selected document:",e),Fe(!1),mt(e)},[mt]),bt=(0,n.useCallback)(async()=>{if(We&&te)try{ge(!0);const e=(0,P.DZ)(te,We);ae(e),await Q(e),_(R("dashboardProfile:documents.autoFillSuccess","Profile auto-filled successfully!"),"success"),qe(!1),Ue(null)}catch(e){console.error("[Profile] Error applying extracted data:",e),_(R("dashboardProfile:documents.autoFillError","Error updating profile"),"error")}finally{ge(!1)}},[We,te,Q,_,R]),jt=(0,n.useCallback)(()=>{bt()},[bt]),wt=(0,n.useCallback)(()=>{qe(!1),Ue(null)},[]),Nt=(0,n.useMemo)(()=>{if(!te)return[];return[...ut(te,"verification.verificationDocuments")||[],...ut(te,"documents.cv")||[],...ut(te,"verification.verificationDocumentsProvided")||[]].filter(e=>e&&e.storageUrl)},[te,ut]),Ct=(0,n.useMemo)(()=>{var e;if(!re)return[];return((null===(e=re.fields)||void 0===e?void 0:e.documentUploads)||[]).map(e=>{const t=e.labelKey?R("dashboardProfile:".concat(e.labelKey),e.docType):R("dashboardProfile:documents.".concat(e.docType),e.docType);return{value:e.docType,label:t,accept:e.accept||".pdf,.doc,.docx,.jpg,.png"}})},[re,R]),Tt=(0,n.useMemo)(()=>{var e,t;return Re&&re?null===(e=re.fields)||void 0===e||null===(t=e.documentUploads)||void 0===t?void 0:t.find(e=>e.docType===Re):null},[Re,re]),At=(0,n.useCallback)(()=>{Be&&(pt(),Ue(Be),qe(!0))},[Be,pt]),kt=(0,n.useCallback)(()=>{if(!re||!te)return!1;const e=$,t=re.fields[e];let a=!0;const r={},n=e=>{const{name:t,required:n,dependsOn:l,dependsOnValue:i,dependsOnValueExclude:s,validationRules:c}=e;let d=n,u=!0;if(l){const e=(0,o.get)(te,l);let t=!0;i&&!i.includes(e)&&(t=!1),s&&s.includes(e)&&(t=!1),t||(d=!1,u=!1)}const m=(0,o.get)(te,t);if(!d||null!==m&&void 0!==m&&""!==String(m).trim()||(a=!1,(0,o.set)(r,t,R("validation:required")),u=!1),u&&m&&c)if(c.minLength&&String(m).length<c.minLength)a=!1,(0,o.set)(r,t,R("validation:minLength",{count:c.minLength}));else if(c.pattern)try{new RegExp(c.pattern).test(String(m))||(a=!1,(0,o.set)(r,t,R(c.patternErrorKey||"validation:invalidFormat")))}catch(p){}};return Array.isArray(t)?t.forEach(n):"object"===typeof t&&Object.entries(t).forEach(e=>{let[t,n]=e;if(n.required&&n.minItems>0){const e=(0,o.get)(te,t);(!Array.isArray(e)||e.length<n.minItems)&&(a=!1,(0,o.set)(r,t,R("validation:minItemsRequired",{count:n.minItems})))}}),ve(r),a},[$,te,re,R]),St=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{navigateToNextTab:t=!1}=e;if(!L||!te)return _(R("errors.notLoggedIn"),"error"),!1;const a=kt();if(t&&!a)return _(R("validation:errorFixFieldsBeforeContinuing"),"warning"),!1;ge(!0);try{let e=!1;if(a){const t=(0,o.cloneDeep)(te);e=re.tabs.every(e=>e.id===$||fe(t,e.id,re))}const r=await Q(te);if(r){if(de.current=(0,o.cloneDeep)(r),ae((0,o.cloneDeep)(r)),_(R("validation:profileSaved"),"success"),e&&await M(!0),Xe&&"profileTabs"===Ze){fe(r,$,re)?(console.log("[Profile] Tab completed:",$,"- notifying tutorial context"),tt($,!0)):console.log("[Profile] Tab saved but not complete yet:",$)}if(t&&a){const e=re.tabs.findIndex(e=>e.id===$),t=re.tabs[e+1];t&&W("/dashboard/profile/".concat(t.id))}return!0}throw new Error("Profile update failed silently.")}catch(r){return _(r.message||R("validation:errorSavingProfile"),"error"),!1}finally{ge(!1)}},[L,te,Q,kt,_,R,$,re,W,M,Xe,Ze,tt]),Dt=(0,n.useCallback)(async()=>{await St({navigateToNextTab:!0})},[St]);(0,n.useEffect)(()=>{const e=null===z||void 0===z?void 0:z.setPageMobileState;if(e&&"function"===typeof e)if(q&&$&&!Ne){e(!0,()=>{var e,t;ee((null===re||void 0===re||null===(e=re.tabs)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id)||""),Ce(!0)})}else e(!1,null)},[q,$,Ne,re,z]);const It=(0,n.useCallback)(e=>{e!==$&&(xe(te,e,re)?Ke?(Se(e),Ae(!0)):(W("/dashboard/profile/".concat(e)),ve({}),q&&Ce(!1)):_(R("validation:completePreviousSteps"),"warning"))},[Ke,$,W,te,re,_,R,q]),Et=(0,n.useCallback)(async()=>{Ae(!1);const e=await St({navigateToNextTab:!1});W("/dashboard/profile/".concat(ke)),e||J()},[St,ke,W,J]),Pt=(0,n.useCallback)(()=>{Ae(!1),Se("")},[]),Ot=(0,n.useCallback)(()=>{Ke?Ie(!0):_(R("common:noChangesToCancel"),"info")},[Ke,_,R]),Ft=(0,n.useCallback)(()=>{de.current&&ae((0,o.cloneDeep)(de.current)),ve({}),Ie(!1),_(R("common:changesDiscarded"),"info")},[_,R]),Rt=(0,n.useCallback)(()=>{Ie(!1)},[]),Lt=K||ie,Ht=(0,n.useMemo)(()=>pe(te,re),[te,re]),_t=(0,n.useMemo)(()=>{if(!re||!te)return null;const e=re.tabs||[];for(const t of e)if(!fe(te,t.id,re)&&xe(te,t.id,re))return t.id;return null},[te,re]);return(0,D.jsxs)("div",{className:(0,S.cn)("h-full flex flex-col overflow-hidden animate-in fade-in duration-500 [&_button]:!text-sm",q&&"overflow-y-hidden"),children:[(0,D.jsx)("div",{className:(0,S.cn)("shrink-0 w-full z-20 bg-card/95 backdrop-blur-sm border-b border-border shadow-sm h-16 flex items-center",q?"px-4":"px-6"),children:(0,D.jsxs)("div",{className:"flex items-center justify-between gap-4 w-full",children:[(0,D.jsxs)("div",{className:(0,S.cn)("flex items-center gap-2 px-3 h-9 rounded-lg border transition-colors","premium"===ye?"bg-primary/10 border-primary/30 text-primary":"bg-muted/30 border-border/50 text-muted-foreground"),children:[(0,D.jsxs)("span",{className:"text-xs font-medium",children:[R("dashboardProfile:subscription.status"),":"]}),(0,D.jsx)("span",{className:"text-sm font-semibold",children:R("premium"===ye?"dashboardProfile:subscription.premium":"dashboardProfile:subscription.free")})]}),(0,D.jsxs)("div",{className:"flex-1 flex justify-center",children:[(0,D.jsx)("div",{className:"relative",ref:Ve,children:(0,D.jsxs)("button",{onClick:ht,disabled:rt||He||gt,className:(0,S.cn)("h-9 px-4 flex items-center justify-center gap-2 rounded-lg border transition-all shrink-0","bg-background border-border text-muted-foreground hover:text-foreground hover:bg-muted/50",(rt||He||gt)&&"opacity-50 cursor-not-allowed"),"data-tutorial":"profile-upload-button",children:[He?(0,D.jsx)(N.A,{size:"sm"}):(0,D.jsx)(s.B88,{className:"w-4 h-4"}),(0,D.jsx)("span",{className:"text-sm font-medium",children:He?R("dashboardProfile:documents.analyzing","Analyzing..."):R("dashboardProfile:documents.autofill","Auto Fill")})]})}),(0,D.jsx)(A.A,{ref:ot,onChange:ft,isLoading:rt,progress:lt,accept:".pdf,.doc,.docx,.jpg,.png",label:"",className:"hidden"})]}),te&&(0,D.jsxs)("div",{className:"flex items-center gap-3 px-3 h-9 bg-muted/30 rounded-lg border border-border/50",children:[(0,D.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Profile Completion"}),(0,D.jsx)("div",{className:"w-32 h-2.5 bg-muted rounded-full overflow-hidden shadow-inner",children:(0,D.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 transition-all duration-500 rounded-full",style:{width:"".concat(Ht,"%")}})}),(0,D.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:[Ht,"%"]})]})]})}),(0,D.jsx)(T.A,{isOpen:Ee,onClose:pt,title:R("dashboardProfile:documents.autofill","Auto Fill"),size:"medium",actions:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.A,{variant:"secondary",onClick:pt,children:R("common.cancel")}),Be&&(0,D.jsx)(C.A,{variant:"primary",onClick:At,children:R("personalDetails.useExistingData","Use Existing Data")})]}),children:(0,D.jsxs)("div",{className:"space-y-4",children:[Be&&(0,D.jsx)("div",{className:"p-4 rounded-lg bg-primary/10 border-2 border-primary",children:(0,D.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,D.jsx)(s.FrA,{className:"text-primary",size:18}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"font-semibold text-sm text-primary flex items-center gap-2",children:[R("personalDetails.useExistingData","Use Existing Data"),(0,D.jsx)("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full",children:R("common.cached","Cached")})]}),(0,D.jsx)("div",{className:"text-xs text-primary/80 mt-1",children:R("personalDetails.recentlyExtractedData","Recently extracted data available")})]})]})}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("div",{children:(0,D.jsx)(k.A,{label:R("dashboardProfile:documents.selectDocumentType","Document Type"),options:Ct,value:Re,onChange:Le,placeholder:R("dashboardProfile:documents.selectDocumentTypePlaceholder","Select document type...")})}),(0,D.jsxs)("div",{className:"mt-10",children:[(0,D.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:R("personalDetails.upload","Upload")}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)(A.A,{onChange:ft,isLoading:rt,progress:lt,accept:(null===Tt||void 0===Tt?void 0:Tt.accept)||".pdf,.doc,.docx,.jpg,.png",label:"",documentName:R("dashboardProfile:documents.clickToUpload","click to upload"),disabled:!Re}),!rt&&(0,D.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:(0,D.jsx)(s.B88,{className:"text-primary/50",size:24})})]}),!Re&&(0,D.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:R("dashboardProfile:documents.selectDocumentTypeFirst","Please select a document type first")})]})]})]})}),(0,D.jsxs)(T.A,{isOpen:Me,onClose:wt,title:R("dashboardProfile:documents.autoFillTitle","Auto Fill Profile?"),actions:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.A,{variant:"secondary",onClick:wt,disabled:ue,children:R("common.cancel")}),(0,D.jsx)(C.A,{variant:"primary",onClick:jt,isLoading:ue,children:R("dashboardProfile:documents.fillEmptyFields","Fill Empty Fields")})]}),children:[(0,D.jsx)("p",{className:"mb-4",children:R("dashboardProfile:documents.autoFillDescription","We have extracted information from your document. This will fill empty fields in your profile (Personal Details, Professional Background, etc.). Existing data will NOT be overwritten. Do you want to proceed?")}),(0,D.jsxs)("div",{className:"p-4 rounded-lg border text-sm bg-primary/5 border-primary/20 text-secondary",children:[(0,D.jsx)("p",{className:"mb-2 font-medium",children:R("dashboardProfile:documents.extractedSummary","Extracted Data Summary:")}),(0,D.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(null===We||void 0===We||null===(e=We.personalDetails)||void 0===e||null===(t=e.identity)||void 0===t?void 0:t.legalFirstName)&&(0,D.jsxs)("li",{children:[R("personalDetails.firstName"),": ",We.personalDetails.identity.legalFirstName]}),(null===We||void 0===We||null===(m=We.personalDetails)||void 0===m||null===(f=m.identity)||void 0===f?void 0:f.legalLastName)&&(0,D.jsxs)("li",{children:[R("personalDetails.lastName"),": ",We.personalDetails.identity.legalLastName]}),(null===We||void 0===We||null===(x=We.personalDetails)||void 0===x||null===(g=x.contact)||void 0===g?void 0:g.primaryEmail)&&(0,D.jsxs)("li",{children:[R("personalDetails.email"),": ",We.personalDetails.contact.primaryEmail]}),(null===We||void 0===We||null===(h=We.professionalBackground)||void 0===h?void 0:h.professionalSummary)&&(0,D.jsxs)("li",{className:"mt-2",children:[(0,D.jsxs)("span",{className:"font-medium",children:[R("professionalBackground.summary","Professional Summary"),":"]}),(0,D.jsxs)("p",{className:"mt-1 italic",children:['"',We.professionalBackground.professionalSummary,'"']})]}),(null===We||void 0===We||null===(O=We.professionalBackground)||void 0===O||null===(F=O.workExperience)||void 0===F?void 0:F.length)>0&&(0,D.jsxs)("li",{children:[R("professionalBackground.experience"),": ",We.professionalBackground.workExperience.length," items"]})]})]})]}),(0,D.jsxs)("div",{className:(0,S.cn)("flex-1 flex overflow-hidden min-h-0 relative",q?"p-0":"p-4 gap-4"),children:[(0,D.jsx)("div",{className:(0,S.cn)("flex flex-col transition-all duration-300 shrink-0",q?(0,S.cn)("absolute inset-0 z-10 bg-background overflow-y-auto",Ne?"translate-x-0":"-translate-x-full"):(0,S.cn)(je?"w-[70px]":"w-full md:w-[320px] lg:w-[360px]","overflow-hidden")),children:re&&te&&(0,D.jsx)(I,{profile:te,config:re,activeTab:$,onTabChange:It,isTabCompleted:e=>fe(te,e,re),isTabAccessible:(e,t,a)=>xe(e,t,a),nextIncompleteSection:_t,highlightTabId:(null===Je||void 0===Je?void 0:Je.highlightTab)||_t,collapsed:je,onToggle:()=>we(!je)})}),(0,D.jsx)("div",{className:(0,S.cn)("flex-1 flex flex-col bg-transparent relative min-w-0 min-h-0 transition-all duration-300 custom-scrollbar",q&&!Ne?"translate-x-0 overflow-y-auto":q?"translate-x-full absolute inset-0 z-20 overflow-y-auto":"overflow-y-auto"),style:{scrollbarGutter:"stable"},children:(()=>{if(Lt&&!te)return(0,D.jsx)(N.A,{});if(G)return(0,D.jsxs)("div",{className:"p-8 text-center text-red-500",children:[R("errors.loadingProfile"),": ",G.message]});if(!re&&!Lt&&V)return(0,D.jsx)("div",{className:"p-8 text-center text-red-500",children:R("errors.loadingConfig")});return V&&V.role&&!["professional","facility","company"].includes(V.role)?(0,D.jsx)("div",{className:"p-8 text-center text-red-500",children:R("errors.accessDenied")}):null})()||(0,D.jsx)("div",{className:"flex-1",children:(0,D.jsx)("div",{className:"w-full",children:(0,D.jsx)("div",{className:"animate-in slide-in-from-bottom-2 duration-500",children:(()=>{if(!re||!te||!$)return null;const e={formData:te,config:re,errors:he,isSubmitting:ue,onInputChange:ct,onArrayChange:dt,onSaveAndContinue:Dt,onCancel:Ot,getNestedValue:ut},t="facility"===te.role||"company"===te.role;switch($){case"personalDetails":return(0,D.jsx)(H,(0,r.A)((0,r.A)({},e),{},{onTriggerUpload:xt}));case"professionalBackground":return(0,D.jsx)(B,(0,r.A)({},e));case"billingInformation":return(0,D.jsx)(Y,(0,r.A)({},e));case"documentUploads":return(0,D.jsx)(Z,(0,r.A)({},e));case"facilityCoreDetails":case"facilityLegalBilling":return(0,D.jsx)(oe,(0,r.A)({activeTab:$},e));case"facilityDocuments":return(0,D.jsx)(ce,(0,r.A)({},e));case"settings":return t?(0,D.jsx)(me,(0,r.A)({},e)):(0,D.jsx)(le,(0,r.A)({},e));default:return(0,D.jsx)("div",{children:R("common.selectTab")})}})()})})})})]}),Oe&&(0,D.jsx)(T.A,{isOpen:Oe,onClose:vt,title:R("personalDetails.selectDocument","Select Document"),size:"small",children:(0,D.jsxs)("div",{className:"space-y-4",children:[0===Nt.length?(0,D.jsxs)("div",{className:"text-center py-12 animate-in fade-in duration-500",children:[(0,D.jsx)("div",{className:"mx-auto w-20 h-20 rounded-full bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center mb-6 shadow-lg shadow-primary/15",children:(0,D.jsx)(s.jH2,{className:"text-primary/60",size:36})}),(0,D.jsx)("p",{className:"text-muted-foreground text-base",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:R("personalDetails.noDocumentsAvailable","No documents available. Please upload a document first.")})]}):(0,D.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:Nt.map((e,t)=>(0,D.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 border border-border rounded-lg hover:bg-muted/30 transition-colors cursor-pointer",onClick:()=>yt(e),children:[(0,D.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,D.jsx)("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:(0,D.jsx)(s.jH2,{size:20})}),(0,D.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,D.jsx)("div",{className:"font-semibold text-sm truncate mb-1",style:{color:"hsl(var(--foreground))",fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:e.originalFileName||e.fileName||"Document ".concat(t+1)}),(0,D.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",style:{fontFamily:"var(--font-family-text, Roboto, sans-serif)"},children:[e.type&&(0,D.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary font-medium",children:R("dashboardProfile:documents.".concat(e.type),e.type)}),e.uploadedAt&&(0,D.jsxs)("span",{children:["\u2022 ",new Date(e.uploadedAt).toLocaleDateString()]})]})]})]}),(0,D.jsx)("div",{className:"shrink-0"})]},t))}),(0,D.jsx)("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:(0,D.jsx)(C.A,{variant:"secondary",onClick:vt,children:R("common.cancel")})})]})}),(0,D.jsx)(T.A,{isOpen:Te,onClose:Pt,title:R("validation:confirmTabChangeTitle"),actions:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.A,{onClick:Pt,variant:"secondary",children:R("common:cancel")}),(0,D.jsx)(C.A,{onClick:Et,variant:"confirmation",children:R("common:saveAndContinue")})]}),children:(0,D.jsx)("p",{children:R("validation:unsavedChangesWarningNavigate")})}),(0,D.jsx)(T.A,{isOpen:De,onClose:Rt,title:R("validation:confirmCancelTitle"),messageType:"warning",actions:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.A,{onClick:Rt,variant:"secondary",children:R("common:no")}),(0,D.jsx)(C.A,{onClick:Ft,variant:"warning",children:R("common:yesDiscard")})]}),children:(0,D.jsx)("p",{children:R("validation:discardChangesWarning")})})]})}},6456:(e,t,a)=>{var r={"./professionals-doctor.json":[1038,38],"./professionals-pharmacist.json":[5555,555]};function n(e){if(!a.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],n=t[0];return a.e(t[1]).then(()=>a.t(n,19))}n.keys=()=>Object.keys(r),n.id=6456,e.exports=n},8264:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});var r=a(5043);const n=()=>{const[e,t]=(0,r.useState)(()=>"undefined"!==typeof window&&window.innerWidth<768);return(0,r.useEffect)(()=>{const e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}}}]);
//# sourceMappingURL=83.e11d7676.chunk.js.map